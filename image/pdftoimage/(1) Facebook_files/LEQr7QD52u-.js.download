if (self.CavalryLogger) { CavalryLogger.start_js(["eXeB8"]); }

__d("MessengerStoryAttachmentTransformer.bs",["fbt","URI","bs_string","bs_js_dict","bs_caml_array","bs_belt_Option","bs_caml_format","bs_caml_option","CurrentUser","FundsAvailability","bs_js_null_undefined","P2PTransferStatus","MNCommerceBubbleType","PaymentModulesClient","MercuryAttachmentType","bs_caml_builtin_exceptions","P2PPaymentRequestStatus","ServicesCalendarSyncType","MNCommerceCallToActionType","LeadGenInfoFieldTypes"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;function i(a){return a.map(function(a){var c=a.user_confirmation;c=c==null?[null,null,null,null,!1]:[c.cancel_button_label,c.continue_button_label,c.confirmation_message,c.confirmation_title,!0];var d=a.payment_metadata;return{action_link:a.action_link,action_type:b("bs_js_null_undefined").fromOption(b("bs_js_dict").get(b("MNCommerceCallToActionType"),a.action_open_type)),action_objects:a.action_objects,title:a.title,confirmation_cancel_label:c[0],confirmation_continue_label:c[1],confirmation_message:c[2],confirmation_title:c[3],id:a.id,is_disabled:a.is_disabled,is_mutable_by_server:a.is_mutable_by_server,logging_token:a.logging_token,payment_metadata:d==null?{payment_module_config:null,total_price:null}:{payment_module_config:d.payment_module_config,total_price:d.total_price},render_style:a.render_style,webview_metadata:{fallback_url:a.webview_metadata.fallback_url,messenger_extensions:a.webview_metadata.messenger_extensions,webview_height_ratio:a.webview_metadata.webview_height_ratio,webview_share_button:a.webview_metadata.webview_share_button},should_show_user_confirmation:c[4],page_id:a.page_id}})}function j(a){return a.map(function(a){var c=a.url;c=c==null?null:new(h||(h=b("URI")))(c).getUnqualifiedURI().toString();return{title:a.title,uri:c}})}function a(a){if(!(a==null)&&a!=="")return"#"+b("bs_string").sub(a,2,a.length-2|0);else return null}function c(a){if(a==null)return null;else return{url:a.uri,src:a.uri,width:a.width,height:a.height}}function k(a,b){__p&&__p();var c=b.cover_photo,d;if(c==null)d=[null,null,null];else{var e=c.photo.image;e=e==null?[null,null]:[e.uri,{height:e.height,width:e.width}];d=[c.photo.id,e[0],e[1]]}c=b.location;e=c==null?[null,null]:[c.latitude,c.longitude];c=b.overall_star_rating;return{address:b.address.single_line_full_address,category:b.top_category_name,coverPhotoID:d[0],coverPhotoURL:d[1],coverPhotoDimensions:d[2],latitude:e[0],longitude:e[1],name:b.name,rating:c==null?null:c.value,pageID:b.id,priceRange:b.price_range_description,viewerID:a}}function l(a){var b=a.group_commerce_item_seller,c=a.primary_photo,d;if(c==null)d=null;else{c=c.image;d=c==null?null:c.uri}return{caption:a.group_commerce_item_description.text,desc:a.group_commerce_item_description.text,owner_id:b==null?null:b.id,price:a.formatted_price.text,text:a.group_commerce_item_description.text,title:a.group_commerce_item_title,thumb_url:d,url:a.url}}function m(a){return{app_name:a.application_name,artists:a.artist_names,audio_url:a.audio_url,duration_ms:a.duration_ms,title:a.music_title}}function n(a){var c=a.payment;return{id:a.id,desc:a.desc,display_total_cost:a.total_cost,merchant_name:a.merchant_name,target_url:a.target_url,thumb_url:a.thumb_url,raw_amount:a.raw_amount,payment_id:c==null?null:c.id,total_cost:{amount:b("bs_caml_format").caml_float_of_string(a.price_amount),currency:a.price_currency},name:a.name}}function o(a){return{fundraiserID:a.fundraiserID,canDonate:a.canDonate,hasViewerDonated:a.hasViewerDonated,fundraiserDetailedProgressText:a.fundraiserDetailedProgressText,fundraiserSubtitleText:a.fundraiserSubtitleText,focusedCoverPhoto:a.focusedCoverPhoto}}function p(a){return{id:a.id,name:a.name,is_malicious:a.is_malicious,attach_type:b("MercuryAttachmentType").FILE,url:a.uri,extension:a.extension,filesize:a.filesize}}function q(a){return{id:a.id,url_shimhash:a.url_shimhash,attach_type:b("MercuryAttachmentType").VIDEO,url:a.playable_url,extension:a.extension,filesize:a.filesize,name:a.filename,height:a.height,width:a.width}}function r(a){return{id:a.id,name:a.name,desc:a.desc,thumb_url:a.thumb_url,item_url:a.item_url,title:a.name,text:a.desc,source:a.source,image_aspect_ratio:a.image_aspect_ratio,metalines:{metaline_1:a.first_metaline,metaline_2:a.second_metaline,metaline_3:a.third_metaline},default_action:a.default_action,call_to_actions:i(a.call_to_actions)}}function s(a){__p&&__p();var c=function(a){a=a.services_vertical_info;if(a==null)return;else return{isEligibleForAppointmentCalendar:a.is_eligible_for_appointment_calendar,timezoneName:a.time_zone_name}},d=a.page;c=d==null?[void 0,void 0,void 0]:[d.id,b("bs_js_null_undefined").fromOption(b("bs_js_dict").get(b("ServicesCalendarSyncType"),d.calendar_sync_type)),c(d)];d=a.native_component_flow_request;var e;if(d==null)e=null;else{var f=d.page,h=d.page,i=d.page,j;if(i==null)j=void 0;else{i=i.profile_picture;j=i==null?void 0:i.uri}i=d.suggested_time_range;var k=d.user,l=d.user,m=d.job_application,n=d.user,o;if(n==null)o=void 0;else{n=n.profile_picture;o=n==null?void 0:n.uri}e={additionalInfo:d.additional_info,appointmentAddress:d.appointment_address,archivedStatus:d.archived_status,availability:d.availability,consumer_phone_number:d.consumer_phone_number,hasSavedToCalendar:d.has_saved_to_calendar,recurMessage:d.recur_message,requestFlowType:d.request_flow_type,generalInfo:d.service_general_info,id:d.id,pageID:f==null?void 0:f.id,pageName:h==null?void 0:h.name,pageProfilePic:j,preferredTimeRange:i==null?null:{end:i.end,start:i.start},productItems:d.services_product_items,reminderBubbleText:d.reminder_bubble_text,requestAdminApprovalType:d.request_admin_approval_type,requestedTime:d.requested_time,specialRequest:d.special_request,status:d.booking_status_value,statusLabel:d.status,subtitle:d.ls_xma_subtitle,title:d.ls_xma_title,userID:k==null?void 0:k.id,username:l==null?void 0:l.short_name,jobApplicationID:m==null?void 0:m.id,userProfilePic:o}}n=a.message_bubble_type;var p;switch(n){case"CANCELLED":p=["Cancelled",g._("annullato")];break;case"DECLINED":p=["Declined",g._("Rifiutato")];break;case"REQUESTED":p=["Requested",g._("richiesto")];break;case"SCHEDULEED":p=["Scheduled",g._("Fissata")];break;default:throw[b("bs_caml_builtin_exceptions").invalid_argument,"Erroneous target status"]}f=a.user;return{id:a.id,pageID:c[0],calendarSyncType:c[1],userID:f==null?"0":f.id,status:p[0],statusLabel:p[1],viewerID:b("CurrentUser").getAccountID(),requestMetadata:e,servicesVerticalInfo:c[2]}}function t(a){return{id:a.id,page_id:a.page.id,user_id:a.consumer.id,time_ranges:a.formatted_available_time_ranges.map(function(a){return{start:a.start,end:a.end}}),has_booking_request_created:a.has_booking_request_created}}function u(a){return{id:a.id}}function v(a){return{live_location_id:a.live_location_id,is_expired:a.is_expired,expiration_time:a.expiration_time,sender:a.sender,coordinate:a.coordinate,location_title:a.location_title,sender_destination:a.sender_destination,stop_reason:a.stop_reason}}function w(a){return{sender_wec_number:a.sender_wec_number,sender_wec_number_formated:a.sender_wec_number_formated,sender_wec_number_fbid:a.sender_wec_number_fbid,sender_wec_name:a.sender_wec_name}}function x(a){var b=a.preview;b=b==null?null:b.uri;var c=a.large_preview;c=c==null?null:c.uri;return{id:a.id,extension:a.extension,preview:a.preview,large_preview:a.large_preview,attach_type:"photo",large_preview_url:c,preview_url:b}}function y(a){return{id:a.id,name:a.filename,url_shimhash:a.url_shimhash,attach_type:b("MercuryAttachmentType").AUDIO,url:a.playable_url,extension:a.extension,filesize:a.filesize,duration:a.duration}}function z(a){var b=a.first_metaline;return{desc:a.description,id:a.id,image_aspect_ratio:a.image_aspect_ratio,item_url:a.target_url,metalines:b==null?{}:{metaline_1:b},name:a.name,source:a.source_name,text:a.description,thumb_url:a.image_url,title:a.name,default_action:a.default_action,call_to_actions:i(a.call_to_actions),media_blob_attachments:a.media_blob_attachments}}function A(a){var b=a.business_items.nodes.map(z),c=i(a.call_to_actions);return{message:a.message,call_to_actions:c,items:b}}function B(a){return{message:a.message,call_to_actions:i(a.call_to_actions),items:a.promotion_items.nodes.map(z)}}function C(a){var c=a.structured_address.streets,d=a.partner_logo;return{account_holder_name:a.account_holder_name,adjustments:a.adjustments.map(function(a){return{adjustment_type:a.adjustment_type,display_adjustment_amount:a.adjustment_amount}}),cancellation_url:a.cancellation_url,items:a.items.nodes.map(z),merchant_name:a.merchant_name,messenger_commerce_bubble_type:b("bs_js_null_undefined").fromOption(b("bs_js_dict").get(b("MNCommerceBubbleType"),a.messenger_commerce_bubble_type)),order_id:a.order_id,order_time:a.order_time,order_url:a.order_url,payment_method:a.payment_method,receipt_id:a.receipt_id,recipient_name:a.recipient_name,shipping_cost:a.shipping_cost,shipping_method:a.shipping_method,status:a.status,structured_address:{city:a.structured_address.city,state:a.structured_address.state,country:a.structured_address.country,postal_code:a.structured_address.postal_code,street_1:b("bs_caml_array").caml_array_get(c,0),street_2:b("bs_caml_array").caml_array_get(c,1)},subtotal:a.subtotal,total_cost:a.total_cost,total_tax:a.total_tax,partner_logo:d==null?void 0:d.uri}}function D(a,c){return{payment_modules_client:b("bs_js_null_undefined").fromOption(b("bs_js_dict").get(b("PaymentModulesClient"),c.payment_modules_client)),is_viewer_seller:c.is_viewer_seller,payment_snippet:c.payment_snippet,item_list:c.item_list.map(function(a){return{item_id:a.item_id,name:a.name,subtitle:a.subtitle,description:a.description,unit_price:a.unit_price,image_urls:a.images.map(function(a){return a.uri}),quantity:a.quantity}}),components:c.components,payment_call_to_actions:c.payment_call_to_actions,click_action:c.click_action,actor_id:a,invoicer_id:c.invoicer_id}}var E=function(a){__p&&__p();var c=b("LeadGenInfoFieldTypes"),d={},e=[];for(var a=a.field_data_list,f=Array.isArray(a),g=0,a=f?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var h;if(f){if(g>=a.length)break;h=a[g++]}else{g=a.next();if(g.done)break;h=g.value}h=h;var i=h.field_type,j=h.label;h=h.values;i===c.CUSTOM||i===c.ZIP?e.push({label:j,values:h}):d[i]={label:j,values:h}}d.questions=e;return d};function F(a,b){var c=b.invite_recipient;c=c==null?null:c.id;var d=b.invite_sender;d=d==null?null:d.id;return{quick_invite_id:b.id,recipient_id:c,sender_id:d,is_viewer_recipient:a===c}}function G(a){var b=function(a){if(a==null)return null;else return a.uri},c=a.listing_category;c=c==null?[null,null]:[c.offer_image,c.request_image];return{listingType:a.listing_type,mapURI:b(a.map_image),offerURI:b(c[0]),requestURI:b(c[1])}}function H(a){return{sender:a.sender,receiver:a.receiver,transfer_id:a.transfer_id,bubbleView:a.bubble_view}}function I(a){__p&&__p();var c=a.receiver_profile,d;if(c==null)d=null;else{var e=c.profile_picture;d={id:c.id,name:c.short_name,full_name:c.name,picture:e==null?null:e.uri,profile_url:c.url}}e=a.sender;if(e==null)c={};else{var f=e.profile_picture;c={id:e.id,name:e.name,full_name:e.full_name,picture:f==null?null:f.uri,profile_uri:e.url}}f=a.transfer_context;if(f==null)e=[null,null,null];else{var g=f.transfer_theme;e=[f.memoText,f.memo_images.map(function(a){a=a.image;if(a==null)return null;else return a.uri}),g==null?null:g.id]}f=a.platform_item;g=f==null?null:{name:f.name,description:f.description,image:f.photos.map(function(a){a=a.image;if(a==null)return null;else return a.uri}),refURL:f.url};f=a.amount_fb_discount;return{sender:c,amountWithSymbol:a.transaction_amount.formatted_amount,status:b("bs_js_null_undefined").fromOption(b("bs_js_dict").get(b("P2PTransferStatus"),a.transfer_status)),receiver:d,transfer_id:a.transfer_id,completedTime:a.completedTime,updatedTime:a.updatedTime,creationTime:a.creationTime,amount:a.transaction_amount.amount,memoText:e[0],memoPhotoURLs:e[1],themeID:e[2],discountAmount:f==null?null:f.formatted,fundsAvailability:b("bs_js_null_undefined").fromOption(b("bs_js_dict").get(b("FundsAvailability"),a.funds_availability)),groupThreadFBID:a.group_thread_fbid,platform_item:g,statusDescription:{markup:a.status_description},bubbleView:a.bubble_view,currencyCode:a.currency_amount.currency}}function J(a){__p&&__p();var c=a.requester,d;if(c==null)d=void 0;else{var e=c.profile_picture;d={id:c.id,name:c.short_name,full_name:c.name,picture:e==null?null:e.uri,profile_url:c.url}}e=a.requestee;if(e==null)c=void 0;else{var f=e.profile_picture;c={id:e.id,name:e.short_name,full_name:e.name,picture:f==null?null:f.uri,profile_url:e.url}}f=b("bs_js_null_undefined").fromOption(b("bs_js_dict").get(b("P2PPaymentRequestStatus"),a.request_status));e=a.transfer;e=e==null?[null,""]:[I(e),e.id];var g=a.request_theme;return{amount:a.transaction_amount.amount,amountWithSymbol:a.amount.formatted,requestee:c,requester:d,currentStatus:f,currency:a.amount.currency,creationTime:a.creation_time,groupThreadFBID:a.group_thread_fbid,id:a.id,memoText:a.memo_text,themeID:g==null?null:g.id,transfer:e[0],transferID:e[1],updatedTime:a.updated_time,bubbleView:a.bubble_view,statusDescription:{markup:a.status_description}}}function K(a){var b=J({amount:a.amount,transaction_amount:a.transaction_amount,requester:a.requester,requestee:a.requestee,request_status:a.request_status,request_theme:a.request_theme,id:a.id,memo_text:a.memo_text,transfer:a.transfer,creation_time:a.creation_time,group_thread_fbid:a.group_thread_fbid,updated_time:a.updated_time,bubble_view:a.bubble_view,status_description:a.status_description});a={individualRequests:a.individual_requests.map(J)};return Object.assign(b,a)}function L(a,c,d){__p&&__p();var e=c.media,f=e==null?null:e.animated_image,g=e==null?null:e.image,h={};c.properties.forEach(function(b){var a=b.value;h[b.key]=a==null?null:a.text;return 0});var i=c.target,z;if(i==null)z=null;else switch(i.tag|0){case 0:z=G(i[0]);break;case 1:z=H(i[0]);break;case 2:z=I(i[0]);break;case 3:z=K(i[0]);break;case 4:z=D(a,i[0]);break;case 7:z=B(i[0]);break;case 8:z=A(i[0]);break;case 10:z=E(i[0]);break;case 11:z=v(i[0]);break;case 12:z=F(a,i[0]);break;case 13:z=s(i[0]);break;case 14:z=t(i[0]);break;case 15:z=u(i[0]);break;case 16:var J=i[0],L=J.genie_sender;L=L==null?[null,null]:[L.messaging_actor.id,L.messaging_actor.name];var N=L[0],O={action_links:[],messaging_attribution:null,messenger_call_to_actions:[],xma_layout_info:null,deduplication_key:null,description:null,media:null,properties:[],source:null,style_list:[],title_with_entities:null,url:null,subattachments:[],target:null},P=c.media,Q;if(P==null)Q=null;else{P=P.pack;if(P==null){P=J.story_attachment;Q=P==null||d==null?null:M(a,{legacy_attachment_id:N,story_attachment:{action_links:d.action_links,messaging_attribution:d.messaging_attribution,messenger_call_to_actions:d.messenger_call_to_actions,xma_layout_info:d.xma_layout_info,deduplication_key:d.deduplication_key,description:d.description,media:d.media,properties:d.properties,source:d.source,style_list:d.style_list,title_with_entities:d.title_with_entities,url:d.url,subattachments:d.subattachments,target:d.target},genie_attachment:{genie_message:{story_attachment:O}}})}else Q=d==null?null:M(a,{legacy_attachment_id:N,story_attachment:O,genie_attachment:{genie_message:{story_attachment:O}}})}z={genie_id:N,genie_name:L[1],attachment:Q};break;case 18:z=m(i[0]);break;case 20:z=r(i[0]);break;case 21:z=n(i[0]);break;case 22:z=o(i[0]);break;case 23:z=C(i[0]);break;case 25:z=l(i[0]);break;case 26:z=k(a,i[0]);break;case 38:z=w(i[0]);break;case 39:z=x(i[0]);break;case 40:z=y(i[0]);break;case 41:z=p(i[0]);break;case 42:z=q(i[0]);break;default:z=i[0]}J=c.target;P=J==null||J.tag!==7?null:0;d=c.description;O=c.source;N=c.title_with_entities;return{description:d==null?null:d.text,media:{animated_image:f==null?null:f.uri,animated_image_size:f==null?{height:null,width:null}:{height:f.height,width:f.width},image:g==null?null:g.uri,image_size:g==null?{height:null,width:null}:{height:g.height,width:g.width},duration:e==null?null:e.playable_duration,playable:e==null?null:e.is_playable,source:e==null?null:e.playable_url},source:O==null?null:O.text,style_list:c.style_list,title:N==null?null:N.text,action_links:j(c.action_links),messaging_attribution:c.messaging_attribution,messenger_ctas:c.messenger_call_to_actions.map(function(a){return{id:a.id,page_id:b("bs_belt_Option").getWithDefault(b("bs_caml_option").nullable_to_opt(a.page_id),""),action_title:a.title,action_url:a.action_link,action_open_type:b("bs_js_null_undefined").fromOption(b("bs_js_dict").get(b("MNCommerceCallToActionType"),a.action_open_type)),is_high_confidence:b("bs_belt_Option").getWithDefault(b("bs_caml_option").nullable_to_opt(a.is_high_confidence),!1),is_mutable_by_server:a.is_mutable_by_server,native_url:a.native_url,is_disabled:a.is_disabled,webview_metadata:{fallback_url:a.webview_metadata.fallback_url,messenger_extensions:a.webview_metadata.messenger_extensions,webview_height_ratio:a.webview_metadata.webview_height_ratio,webview_share_button:a.webview_metadata.webview_share_button}}}),xma_layout_info:c.xma_layout_info,properties:h,uri:c.url,deduplication_key:c.deduplication_key,target:z,label:P}}function M(a,c){__p&&__p();var d=c.genie_attachment,e;if(d==null)e=null;else{d=d.genie_message;if(d==null)e=null;else{d=d.story_attachment;e=d==null?null:{description:d.description,media:d.media,source:d.source,style_list:d.style_list,title_with_entities:d.title_with_entities,properties:d.properties,url:d.url,deduplication_key:d.deduplication_key,action_links:d.action_links,messaging_attribution:d.messaging_attribution,messenger_call_to_actions:d.messenger_call_to_actions,xma_layout_info:d.xma_layout_info,target:d.target,subattachments:d.subattachments}}}d=c.story_attachment;var f;if(d==null)f=null;else{var g={description:null,media:null,source:null,style_list:[],title_with_entities:null,properties:[],url:null,deduplication_key:null,action_links:[],messaging_attribution:null,messenger_call_to_actions:[],xma_layout_info:null,target:null,subattachments:[]};c={share_id:c.legacy_attachment_id,subattachments:d.subattachments.map(function(b){return L(a,b,g)})};var h={description:d.description,media:d.media,source:d.source,style_list:d.style_list,title_with_entities:d.title_with_entities,properties:d.properties,url:d.url,deduplication_key:d.deduplication_key,action_links:d.action_links,messaging_attribution:d.messaging_attribution,messenger_call_to_actions:d.messenger_call_to_actions,xma_layout_info:d.xma_layout_info,target:d.target};d=e==null?{description:d.description,media:d.media,source:d.source,style_list:d.style_list,title_with_entities:d.title_with_entities,properties:d.properties,url:d.url,deduplication_key:d.deduplication_key,action_links:d.action_links,messaging_attribution:d.messaging_attribution,messenger_call_to_actions:d.messenger_call_to_actions,xma_layout_info:d.xma_layout_info,target:d.target,subattachments:d.subattachments}:{description:e.description,media:e.media,source:e.source,style_list:e.style_list,title_with_entities:e.title_with_entities,properties:e.properties,url:e.url,deduplication_key:e.deduplication_key,action_links:e.action_links,messaging_attribution:e.messaging_attribution,messenger_call_to_actions:e.messenger_call_to_actions,xma_layout_info:e.xma_layout_info,target:e.target,subattachments:e.subattachments};f=Object.assign(c,L(a,h,d))}return{app_attribution:null,attach_type:b("MercuryAttachmentType").SHARE,name:null,url:null,rel:null,preview_url:null,preview_width:null,preview_height:null,large_preview_url:null,large_preview_width:null,large_preview_height:null,icon_type:null,metadata:null,share:f,thumbnail_url:null}}f._getCallToActions=i;f._getActionLinks=j;f._getColor=a;f._getLogo=c;f._getPageTarget=k;f._getGroupCommerceProductItemTarget=l;f._getExternalSongTarget=m;f._getAgentSuggestionItemTarget=n;f._getFundraiserTarget=o;f._getWECFileTarget=p;f._getWECMessageVideoTarget=q;f._getRetailItemTarget=r;f._getPagesPlatformBookingMessageTarget=s;f._getServicesAppointmentAvailabilityTarget=t;f._getServicesGenericAdminTextTarget=u;f._getMessageLiveLocationTarget=v;f._getWECMessageTarget=w;f._getWECMessageImageTarget=x;f._getWECMessageAudioTarget=y;f._getBusinessRetailItem=z;f._getMessengerBusinessMessageTarget=A;f._getMessengerRetailPromotionTarget=B;f._getMessengerRetailReceiptTarget=C;f._getPagesPlatformAttachmentTarget=D;f._getPagesPlatformLeadGenInfoTarget=E;f._getQuickInviteTarget=F;f._getCrisisListingTarget=G;f._getMoneyTransferTarget=H;f._getP2PTransferTarget=I;f._getP2PTransferRequestTarget=J;f._getP2PTransferRequestWithIndividualRequests=K;f.transformStoryAttachment=L;f.getExtensibleAttachmentPayload=M}),null);
__d("getByPath",[],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a,b,c){a=a;for(var d=0;d<b.length;d++){var e=b[d];if(a&&typeof a!=="string"&&typeof a!=="number"&&e in a)a=a[e];else return c}return a}e.exports=a}),null);
__d("MessengerMessageTransformer.bs",["bs_block","bs_js_dict","FBIDCheck","getByPath","MercuryIDs","bs_caml_format","bs_caml_option","CurrentUser","MessagingTag","bs_js_null_undefined","MercuryActionType","MessagingTagUtils","MessagingSourceEnum","StoryAttachmentStyle","MNCommerceMessageType","MercuryLogMessageType","MessageUnsendabilityStatus.bs","P2PPaymentLogMessageSubtype","MessagingGenericAdminTextType","MessengerAttachmentTransformer.bs","InstantGameUpdateXMATUpdateType"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function g(a){__p&&__p();a=a.blob_attachments;var c=[];a==null||a.forEach(function(a){__p&&__p();if(a.__typename==="MessageImage"){c.push(b("bs_block").__(0,[{attribution_app:a.attribution_app,attribution_metadata:a.attribution_metadata,blurred_image_uri:a.blurred_image_uri,filename:a.filename,id:a.id,preview:a.preview,large_preview:a.large_preview,thumbnail:a.thumbnail,legacy_attachment_id:a.legacy_attachment_id,original_dimensions:a.original_dimensions,original_extension:a.original_extension,render_as_sticker:a.render_as_sticker,photo_encodings:a.photo_encodings}]));return 0}else if(a.__typename==="MessageAnimatedImage"){c.push(b("bs_block").__(1,[{attribution_app:a.attribution_app,attribution_metadata:a.attribution_metadata,filename:a.filename,animated_image:a.animated_image,legacy_attachment_id:a.legacy_attachment_id,preview_image:a.preview_image,original_dimensions:a.original_dimensions}]));return 0}else if(a.__typename==="MessageAudio"){c.push(b("bs_block").__(2,[{attribution_app:a.attribution_app,attribution_metadata:a.attribution_metadata,filename:a.filename,playable_url:a.playable_url,playable_duration_in_ms:a.playable_duration_in_ms,is_voicemail:a.is_voicemail,audio_type:a.audio_type,url_shimhash:a.url_shimhash,url_skipshim:a.url_skipshim}]));return 0}else if(a.__typename==="MessageVideo"){c.push(b("bs_block").__(3,[{attribution_app:a.attribution_app,attribution_metadata:a.attribution_metadata,filename:a.filename,playable_url:a.playable_url,playable_duration_in_ms:a.playable_duration_in_ms,legacy_attachment_id:a.legacy_attachment_id,chat_image:a.chat_image,video_type:a.video_type,original_dimensions:a.original_dimensions,large_image:a.large_image,inbox_image:a.inbox_image}]));return 0}else if(a.__typename==="MessageFile"){c.push(b("bs_block").__(4,[{attribution_app:a.attribution_app,attribution_metadata:a.attribution_metadata,filename:a.filename,url:a.url,mimetype:a.mimetype,content_type:a.content_type,is_malicious:a.is_malicious,message_file_fbid:a.message_file_fbid,url_shimhash:a.url_shimhash,url_skipshim:a.url_skipshim,preview_url:a.preview_url,preview:a.preview}]));return 0}else return 0});return c}function h(a,c,d){var e=c.call_capture_attachments;if(e==null)return[];else return b("MessengerAttachmentTransformer.bs").transformAttachment(a,{extensible_attachment:null,blob_attachments:g({blob_attachments:e.edges.map(function(a){return a.node})}),sticker:null},c.message_id,d)}function i(a,c,d,e,f){__p&&__p();if(c.__typename==="GroupPollExtensibleMessageAdminText"){var g=c.question,i;if(g==null)i=[{},null];else{var j=Object.assign({},g);Object.assign(j,{total_count:c.total_count,options:g.options.nodes.map(function(a){var b=Object.assign({},a);return Object.assign(b,{total_count:a.voters.nodes.length,voters:a.voters.nodes.map(function(a){return a.id})})})});i=[j,g.id]}j={message_type:b("bs_js_null_undefined").fromOption(b("bs_js_dict").get(b("MessagingGenericAdminTextType"),d)),untypedData:{event_type:c.event_type.toLowerCase(),question_id:i[1],question_json:b("bs_js_null_undefined").fromOption(b("bs_caml_option").undefined_to_opt(JSON.stringify(i[0])))}}}else if(c.__typename==="InstantGameUpdateExtensibleMessageAdminText"){j={message_type:b("bs_js_null_undefined").fromOption(b("bs_js_dict").get(b("MessagingGenericAdminTextType"),d)),untypedData:{game_id:(g=b("getByPath"))(c,["game","id"]),update_type:b("bs_js_null_undefined").fromOption(b("bs_js_dict").get(b("InstantGameUpdateXMATUpdateType"),c.update_type)),collapsed_text:c.collapsed_text,expanded_text:c.expanded_text,leaderboard_json:c.leaderboard_json,cta_url:g(c,["instant_game_update_data","cta_url"]),cta_title:g(c,["instant_game_update_data","cta_title"]),custom_image_url:g(c,["instant_game_update_data","photo","image","uri"]),template:g(c,["instant_game_update_data","template"])}}}else if(c.__typename==="MessengerAdContextAdminText")j={message_type:b("bs_js_null_undefined").fromOption(b("bs_js_dict").get(b("MessagingGenericAdminTextType"),d)),untypedData:{ad_url:c.ad_url}};else if(c.__typename==="AdExtensibleMessageAdminText")j={message_type:b("bs_js_null_undefined").fromOption(b("bs_js_dict").get(b("MessagingGenericAdminTextType"),d)),untypedData:{ad_client_token:c.ad_client_token,ad_id:c.ad_id,ad_preferences_link:c.ad_preferences_link,ad_properties:c.ad_properties}};else if(c.__typename==="MessengerCallLogExtensibleMessageAdminText")j={message_type:b("bs_js_null_undefined").fromOption(b("bs_js_dict").get(b("MessagingGenericAdminTextType"),d)),untypedData:Object.assign(Object.assign({},c),{call_capture_attachments:h(a,c,f)})};else if(c.__typename==="ThemeColorExtensibleMessageAdminText"||c.__typename==="ThreadIconExtensibleMessageAdminText"||c.__typename==="ThreadNicknameExtensibleMessageAdminText"||c.__typename==="AcceptPendingThreadExtensibleMessageAdminText"||c.__typename==="AddContactExtensibleMessageAdminText"||c.__typename==="RtcCallLogExtensibleMessageAdminText"||c.__typename==="GameScoreExtensibleMessageAdminText"||c.__typename==="ConfirmFriendRequestExtensibleMessageAdminText"||c.__typename==="MessengerGrowthGenericExtensibleMessageAdminText"||c.__typename==="PartiesInviteExtensibleMessageAdminText"||c.__typename==="AppointmentReminderExtensibleMessageAdminText"||c.__typename==="LinkCTAExtensibleMessageAdminText"||c.__typename==="GraphQLServicesAppointmentsOptOutExtensibleMessageAdminText"||c.__typename==="ServicesLeadGenSurveyExtensibleMessageAdminText"||c.__typename==="ServicesLeadGenSurveyEditExtensibleMessageAdminText"||c.__typename==="MessengerIcebreakerVoteCastExtensibleMessageAdminText"||c.__typename==="PagesMarkAsPaidExtensibleMessageAdminText"||c.__typename==="PagesMarkAsPaidNewExtensibleMessageAdminText"||c.__typename==="WorkBotInstalledExtensibleMessageAdminText"||c.__typename==="WorkChatReminderLinkCTAExtensibleMessageAdminText"||c.__typename==="PageThreadActionSystemAddDetailsXMAT"||c.__typename==="PostSharedFromGroupExtensibleMessageAdminText")j={message_type:b("bs_js_null_undefined").fromOption(b("bs_js_dict").get(b("MessagingGenericAdminTextType"),d)),untypedData:Object.assign({},c)};else if(c.__typename==="LightweightEventCreateExtensibleMessageAdminText"||c.__typename==="LightweightEventDeleteExtensibleMessageAdminText"||c.__typename==="LightweightEventNotifyBeforeEventExtensibleMessageAdminText"||c.__typename==="LightweightEventNotifyExtensibleMessageAdminText"||c.__typename==="LightweightEventUpdateExtensibleMessageAdminText"||c.__typename==="LightweightEventUpdateLocationExtensibleMessageAdminText"||c.__typename==="LightweightEventUpdateTimeExtensibleMessageAdminText"||c.__typename==="LightweightEventUpdateTitleExtensibleMessageAdminText"||c.__typename==="LightweightEventRSVPExtensibleMessageAdminText"){i=c.event_reminder;if(i==null)g=void 0;else{a=i.lightweight_event_creator;f=a==null?void 0:a.id;a=i.location_page;a=a==null?void 0:a.id;var k=i.timezone_id;k=k==null?void 0:k.timezone;var l=i.location_coordinates;l=l==null?{latitude:void 0,longitude:void 0}:l;var m=i.event_reminder_members;m=m==null?void 0:m.edges;g={event_creator_id:f,event_id:i.id,event_location_id:a,event_location_name:i.location_name,event_seconds_to_notify_before:i.seconds_to_notify_before,event_time:i.time,event_end_time:i.end_time,event_timezone:k,event_title:i.event_title,event_type:i.lightweight_event_type,event_track_rsvp:i.allows_rsvp,latitude:l.latitude,longitude:l.longitude,guest_state_list:m,guest_id:c.guest_id,guest_status:c.guest_status}}j={message_type:b("bs_js_null_undefined").fromOption(b("bs_js_dict").get(b("MessagingGenericAdminTextType"),d)),untypedData:g}}else j=c.__typename==="AdReplyMessageAdminText"?{message_type:b("bs_js_null_undefined").fromOption(b("bs_js_dict").get(b("MessagingGenericAdminTextType"),d)),untypedData:{ad_url:c.ad_url,should_show_url:c.should_show_url}}:{message_type:b("bs_js_null_undefined").fromOption(b("bs_js_dict").get(b("MessagingGenericAdminTextType"),d)),untypedData:void 0};return{log_message_body:e,log_message_data:j,log_message_type:b("MercuryLogMessageType").GENERIC_ADMIN_TEXT}}function j(a){return a.map(function(a){if(a==="p2p_transfer")return b("StoryAttachmentStyle").ORION;else if(a==="p2p_payment_request")return b("StoryAttachmentStyle").ORION_REQUEST;else return a})}function k(a){__p&&__p();var c=a.target,d;if(c==null)d=null;else if(c.__typename==="CrisisListing")d=b("bs_block").__(0,[{listing_type:c.listing_type,listing_category:c.listing_category,map_image:c.map_image}]);else if(c.__typename==="MoneyTransfer")d=b("bs_block").__(1,[{sender:c.sender,receiver:c.receiver,transfer_id:c.transfer_id,bubble_view:c.bubble_view}]);else if(c.__typename==="PeerToPeerTransfer")d=b("bs_block").__(2,[{sender:c.sender,receiver_profile:c.receiver_profile,transaction_amount:c.transaction_amount,transfer_status:c.transfer_status,transfer_id:c.transfer_id,completedTime:c.completedTime,updatedTime:c.updatedTime,creationTime:c.creationTime,transfer_context:c.transfer_context,amount_fb_discount:c.amount_fb_discount,funds_availability:c.funds_availability,group_thread_fbid:c.group_thread_fbid,platform_item:c.platform_item,id:c.id,status_description:c.status_description,bubble_view:c.bubble_view,currency_amount:c.currency_amount}]);else if(c.__typename==="PeerToPeerPaymentRequest")d=b("bs_block").__(3,[{amount:c.amount,transaction_amount:c.transaction_amount,requester:c.requester,requestee:c.requestee,request_status:c.request_status,request_theme:c.request_theme,id:c.id,memo_text:c.memo_text,transfer:c.transfer,creation_time:c.creation_time,group_thread_fbid:c.group_thread_fbid,updated_time:c.updated_time,status_description:c.status_description,bubble_view:c.bubble_view,individual_requests:c.individual_requests}]);else if(c.__typename==="PaymentPlatformAttachment")d=b("bs_block").__(4,[{payment_modules_client:c.payment_modules_client,is_viewer_seller:c.is_viewer_seller,payment_snippet:c.payment_snippet,item_list:c.item_list,components:c.components,payment_call_to_actions:c.payment_call_to_actions,click_action:c.click_action,invoicer_id:c.invoicer_id}]);else if(c.__typename==="MomentsAppMessengerInvitation")d=b("bs_block").__(5,[{snippet:c.snippet}]);else if(c.__typename==="MomentsAppMessengerPhotoRequest")d=b("bs_block").__(6,[{snippet:c.snippet}]);else if(c.__typename==="MessengerRetailPromotion")d=b("bs_block").__(7,[{message:c.message,call_to_actions:c.call_to_actions,promotion_items:c.promotion_items}]);else if(c.__typename==="MessengerBusinessMessage")d=b("bs_block").__(8,[{message:c.message,call_to_actions:c.call_to_actions,business_items:c.business_items}]);else if(c.__typename==="Video")d=b("bs_block").__(9,[{video_id:c.video_id,video_messenger_cta_payload:c.video_messenger_cta_payload}]);else if(c.__typename==="PagesPlatformLeadGenInfo")d=b("bs_block").__(10,[{field_data_list:c.field_data_list}]);else if(c.__typename==="MessageLiveLocation")d=b("bs_block").__(11,[{live_location_id:c.live_location_id,is_expired:c.is_expired,expiration_time:c.expiration_time,sender:c.sender,coordinate:c.coordinate,location_title:c.location_title,sender_destination:c.sender_destination,stop_reason:c.stop_reason}]);else if(c.__typename==="QuickInvite")d=b("bs_block").__(12,[{id:c.id,invite_sender:c.invite_sender,invite_recipient:c.invite_recipient}]);else if(c.__typename==="PagesPlatformBookingMessage")d=b("bs_block").__(13,[{id:c.id,page:c.page,message_bubble_type:c.message_bubble_type,user:c.user,native_component_flow_request:c.native_component_flow_request}]);else if(c.__typename==="ServicesAppointmentAvailability")d=b("bs_block").__(14,[{id:c.id,page:c.page,consumer:c.consumer,formatted_available_time_ranges:c.formatted_available_time_ranges,has_booking_request_created:c.has_booking_request_created}]);else if(c.__typename==="ServicesGenericAdminText")d=b("bs_block").__(15,[{id:c.id}]);else if(c.__typename==="GenieMessage")d=b("bs_block").__(16,[{genie_sender:c.genie_sender,story_attachment:c.story_attachment}]);else if(c.__typename==="Event")d=b("bs_block").__(17,[{eventID:c.eventID,guestStatus:c.guestStatus,canViewerJoin:c.canViewerJoin,timeString:c.timeString,event_place:c.event_place,social_context:c.social_context,watchStatus:c.watchStatus,connection_style:c.connection_style,canViewerWatch:c.canViewerWatch,profile_picture:c.profile_picture,name:c.name,start_timestamp:c.start_timestamp}]);else if(c.__typename==="ExternalSong")d=b("bs_block").__(18,[{application_name:c.application_name,artist_names:c.artist_names,audio_url:c.audio_url,duration_ms:c.duration_ms,music_title:c.music_title}]);else if(c.__typename==="LightweightAction")d=b("bs_block").__(19,[{lwa_state:c.lwa_state,lwa_type:c.lwa_type}]);else if(c.__typename==="MessengerRetailItem")d=b("bs_block").__(20,[{id:c.id,name:c.name,desc:c.desc,thumb_url:c.thumb_url,item_url:c.item_url,source:c.source,image_aspect_ratio:c.image_aspect_ratio,first_metaline:c.first_metaline,second_metaline:c.second_metaline,third_metaline:c.third_metaline,default_action:c.default_action,call_to_actions:c.call_to_actions}]);else if(c.__typename==="AgentItemSuggestion")d=b("bs_block").__(21,[{id:c.id,desc:c.desc,total_cost:c.total_cost,merchant_name:c.merchant_name,target_url:c.target_url,thumb_url:c.thumb_url,raw_amount:c.raw_amount,payment:c.payment,price_amount:c.price_amount,price_currency:c.price_currency,name:c.name}]);else if(c.__typename==="FundraiserPersonToCharity"||c.__typename==="FundraiserPersonForPerson"){var e=c.fundraiser_detailed_progress_text,f=c.fundraiser_subtitle_text,g=c.focused_cover_photo;d=b("bs_block").__(22,[{fundraiserID:c.id,canDonate:c.can_donate,hasViewerDonated:c.has_viewer_donated,fundraiserDetailedProgressText:e==null?null:e.text,fundraiserSubtitleText:f==null?null:f.text,focusedCoverPhoto:g==null?null:{src:g.photo.image.uri,data:{height:g.photo.image.height,width:g.photo.image.width}}}])}else d=c.__typename==="MessengerRetailReceipt"?b("bs_block").__(23,[{account_holder_name:c.account_holder_name,adjustments:c.retail_adjustments,cancellation_url:c.cancellation_url,items:c.retail_items,merchant_name:c.merchant_name,messenger_commerce_bubble_type:c.bubble_type,order_id:c.receipt_id,order_time:c.order_time_for_display,order_url:c.receipt_url,payment_method:c.order_payment_method,receipt_id:c.id,recipient_name:c.recipient_name,shipping_cost:c.shipping_cost,shipping_method:c.shipping_method,status:c.status,structured_address:c.structured_address,subtotal:c.subtotal,total_cost:c.total,total_tax:c.tax,partner_logo:c.partner_log}]):c.__typename==="JobApplication"?b("bs_block").__(24,[{id:c.id}]):c.__typename==="GroupCommerceProductItem"?b("bs_block").__(25,[{group_commerce_item_description:c.group_commerce_item_description,group_commerce_item_seller:c.group_commerce_item_seller,formatted_price:c.formatted_price,group_commerce_item_title:c.group_commerce_item_title,primary_photo:c.primary_photo,url:c.url}]):c.__typename==="Page"?b("bs_block").__(26,[{address:c.address,top_category_name:c.top_category_name,cover_photo:c.cover_photo,location:c.location,name:c.name,overall_star_rating:c.overall_star_rating,id:c.id,price_range_description:c.price_range_description}]):c.__typename==="MessengerEventReminder"?b("bs_block").__(27,[{is_active:c.is_active,event_title:c.event_title,time:c.time}]):c.__typename==="FormProgressStoryAttachment"?b("bs_block").__(52,[{progress:c.progress,url:c.url}]):c.__typename==="AirlineBoardingPassCollectionMessageAttachment"?b("bs_block").__(28,[{tint_color:c.tint_color,logo:c.logo,flight_label:c.flight_label,boarding_time_label:c.boarding_time_label,departure_label:c.departure_label,passenger_names_label:c.passenger_names_label,passenger_seat_label:c.passenger_seat_label,flight_terminal_label:c.flight_terminal_label,flight_gate_label:c.flight_gate_label,view_boarding_pass_cta_label:c.view_boarding_pass_cta_label,boarding_passes:c.boarding_passes,share_cta_label:c.share_cta_label,message_cta_label:c.message_cta_label,boarding_pass_title_label:c.boarding_pass_title_label,boarding_pass_error_title_label:c.boarding_pass_error_title_label}]):c.__typename==="AirlineCheckInReminderMessageAttachment"?b("bs_block").__(29,[{pnr_number:c.pnr_number,tint_color:c.tint_color,checkin_url:c.checkin_url,booking_number_label:c.booking_number_label,flight_label:c.flight_label,arrival_time_label:c.arrival_time_label,departure_time_label:c.departure_time_label,checkin_cta_label:c.checkin_cta_label,logo:c.logo,flight_infos:c.flight_infos}]):c.__typename==="AirlineUpdateMessageAttachment"?b("bs_block").__(30,[{pnr_number:c.pnr_number,tint_color:c.tint_color,update_type:c.update_type,departure_time_label:c.departure_time_label,arrival_time_label:c.arrival_time_label,booking_number_label:c.booking_number_label,flight_gate_label:c.flight_gate_label,flight_label:c.flight_label,flight_status_label:c.flight_status_label,passenger_names_label:c.passenger_names_label,passenger_seat_label:c.passenger_seat_label,logo:c.logo,flight_info:c.flight_info,hightlighted_labels:c.hightlighted_labels}]):c.__typename==="AirlineItineraryMessageAttachment"?b("bs_block").__(31,[{confirmation_number:c.confirmation_number,pnr_number:c.pnr_number,tint_color:c.tint_color,formatted_total:c.formatted_total,itemized_price_infos:c.itemized_price_infos,formatted_tax:c.formatted_tax,formatted_base_price:c.formatted_base_price,passenger_infos:c.passenger_infos,logo:c.logo,aircraft_type_label:c.aircraft_type_label,arrival_time_label:c.arrival_time_label,base_price_label:c.base_price_label,booking_number_label:c.booking_number_label,cabin_type_label:c.cabin_type_label,departure_time_label:c.departure_time_label,flight_confirmation_label:c.flight_confirmation_label,flight_date_label:c.flight_date_label,flight_label:c.flight_label,flight_terminal_label:c.flight_terminal_label,itinerary_error_title_label:c.itinerary_error_title_label,itinerary_title_label:c.itinerary_title_label,passenger_name_label:c.passenger_name_label,passenger_names_label:c.passenger_names_label,passenger_seat_label:c.passenger_seat_label,purchase_summary_label:c.purchase_summary_label,taxes_label:c.taxes_label,total_label:c.total_label,view_details_cta_label:c.view_details_cta_label,itinerary_legs:c.itinerary_legs}]):c.__typename==="MessengerRetailShipmentTrackingEvent"?b("bs_block").__(32,[{id:c.id,shipment:c.shipment,tracking_event_time_for_display:c.tracking_event_time_for_display,shipment_tracking_event_type:c.shipment_tracking_event_type,messenger_commerce_location:c.messenger_commerce_location,tracking_event_description:c.tracking_event_description,bubble_type:c.bubble_type}]):c.__typename==="MessengerRetailShipment"?b("bs_block").__(33,[{id:c.id,tracking_number:c.tracking_number,shipdate_for_display:c.shipdate_for_display,estimated_delivery_time_for_display:c.estimated_delivery_time_for_display,commerce_origin:c.commerce_origin,commerce_destination:c.commerce_destination,retail_carrier:c.retail_carrier,shipment_tracking_events:c.shipment_tracking_events,receipt:c.receipt,recipient:c.recipient,retail_shipment_items:c.retail_shipment_items,bubble_type:c.bubble_type}]):c.__typename==="EventAttendanceConfirmation"?b("bs_block").__(35,[{id:c.id,num_guests:c.num_guests,attendee_answers:c.attendee_answers,event:c.event}]):c.__typename==="LeadGenDeepLinkData"?b("bs_block").__(34,[{id:c.id,cover_image:c.cover_image,headline:c.headline,name:c.name,page:c.page}]):c.__typename==="UserLeadGenInfo"?b("bs_block").__(36,[{id:c.id,field_data:c.field_data}]):c.__typename==="WECMessageAudio"?b("bs_block").__(40,[{id:c.id,filename:c.filename,playable_url:c.playable_url,url_shimhash:c.url_shimhash,filesize:c.filesize,extension:c.extension,duration:c.duration}]):c.__typename==="IceBreakerMessageAttachment"?b("bs_block").__(37,[{ice_breaker_title:c.ice_breaker_title,ice_breaker_messages:c.ice_breaker_messages,ad_id:c.ad_id}]):c.__typename==="WECMessage"?b("bs_block").__(38,[{sender_wec_number:c.sender_wec_number,sender_wec_number_formated:c.sender_wec_number_formated,sender_wec_number_fbid:c.sender_wec_number_fbid,sender_wec_name:c.sender_wec_name}]):c.__typename==="WECMessageImage"?b("bs_block").__(39,[{id:c.id,extension:c.extension,preview:c.preview,large_preview:c.large_preview}]):c.__typename==="WECMessageFile"?b("bs_block").__(41,[{id:c.id,name:c.name,is_malicious:c.is_malicious,uri:c.uri,extension:c.extension,filesize:c.filesize}]):c.__typename==="WECMessageVideo"?b("bs_block").__(42,[{id:c.id,playable_url:c.playable_url,url_shimhash:c.url_shimhash,filesize:c.filesize,extension:c.extension,filename:c.filename,height:c.height,width:c.width}]):c.__typename==="MontageDirect"?b("bs_block").__(43,[{message_state:c.message_state,is_keep_disabled:c.is_keep_disabled,blob_media_type:c.blob_media_type,blob_media:c.blob_media,image:c.image}]):c.__typename==="MBirthdayReminderAttachment"?b("bs_block").__(44,[{friend_id:c.friend_id,confidence:c.confidence,birthday_date:c.birthday_date}]):c.__typename==="MPersonalRemindersList"?b("bs_block").__(45,[{has_more_upcoming_reminders:c.has_more_upcoming_reminders,personal_reminders:c.personal_reminders}]):c.__typename==="MentorshipMessengerCurriculumStep"?b("bs_block").__(46,[{id:c.id,module_name:c.module_name,mentorship_program:c.mentorship_program,program_name:c.program_name,curriculum_message:c.curriculum_message,prompt:c.prompt,step_count:c.step_count,total_steps:c.total_steps}]):c.__typename==="MentorshipMessengerDiscussionTopicSet"?b("bs_block").__(47,[{id:c.id,topics:c.topics}]):c.__typename==="MentorshipMessengerLeavePrompt"?b("bs_block").__(48,[{mentorship_program:c.mentorship_program,id:c.id,xma_type:c.xma_type}]):c.__typename==="MentorshipMessengerReminder"?b("bs_block").__(49,[{id:c.id,xma_type:c.xma_type}]):c.__typename==="MentorshipMessengerSurvey"?b("bs_block").__(50,[{id:c.id,xma_type:c.xma_type,xma_title:c.xma_title,xma_disclaimer:c.xma_disclaimer,mentorship_program:c.mentorship_program}]):c.__typename==="MentorshipMessengerProgressTracker"?b("bs_block").__(51,[{id:c.id,xma_type:c.xma_type,xma_title:c.xma_title,xma_body:c.xma_body}]):c.__typename==="Story"?b("bs_block").__(53,[{title:c.title,description:c.description,actors:c.actors,to:c.to,attachments:c.attachments,attached_story:c.attached_story}]):c.__typename==="User"?b("bs_block").__(54,[{type:c.__typename,id:c.id,name:c.name,profile_picture:c.profile_picture,cover_photo:c.cover_photo,work_info:c.work_info,subscribe_status:c.subscribe_status}]):c.__typename==="Group"?b("bs_block").__(55,[{type:c.__typename,id:c.id,name:c.name,cover_photo:c.cover_photo,visibility:c.visibility,visibility_sentence:c.visibility_sentence,viewer_join_state:c.viewer_join_state,group_general_chat:c.group_general_chat,work_groups_sync_metadata:c.work_groups_sync_metadata}]):c.__typename==="AppContent"?b("bs_block").__(56,[{type:c.__typename,attachment_icon:c.attachment_icon,privacy_status:c.privacy_status}]):null;return{description:a.description,media:a.media,source:a.source,style_list:j(a.style_list),title_with_entities:a.title_with_entities,properties:a.properties,url:a.url,deduplication_key:a.deduplication_key,action_links:a.action_links,messaging_attribution:a.messaging_attribution,messenger_call_to_actions:a.messenger_call_to_actions,xma_layout_info:a.xma_layout_info,target:d}}function l(a){var b=k({description:a.description,media:a.media,source:a.source,style_list:a.style_list,title_with_entities:a.title_with_entities,properties:a.properties,url:a.url,deduplication_key:a.deduplication_key,action_links:a.action_links,messaging_attribution:a.messaging_attribution,messenger_call_to_actions:a.messenger_call_to_actions,xma_layout_info:a.xma_layout_info,target:a.target});if(b==null)return null;else{a=a.subattachments.map(k);return Object.assign({subattachments:a},b)}}function m(a){__p&&__p();a=a.message;if(a==null)return[];else{var b=[];a.ranges.forEach(function(a){__p&&__p();var c=a.entity;if(c==null)return 0;else{var d=c.id;c=c.thread_key;if(d==null)if(c==null)return 0;else{c=c.thread_fbid;if(c==null)return 0;else{b.push({id:c,offset:a.offset,length:a.length,type:a.__typename});return 0}}else{b.push({id:d,offset:a.offset,length:a.length,type:a.__typename});return 0}}});return b}}function n(a,c,d,e){__p&&__p();var f={};c.message_reactions.forEach(function(a){f[a.user.id]=a.reaction;return 0});var j=b("FBIDCheck").isUser_deprecated(c.message_sender.id),k=j?b("MessagingTagUtils").getSourceFromTags(c.tags_list):b("MessagingSourceEnum").UNKNOWN;j=j?b("MessagingTagUtils").getSourceTags(c.tags_list,k):[];var o=c.message_id,p=d.thread_id,q=d.thread_fbid,r=d.other_user_fbid;r=p==null?q==null?r==null?null:b("MercuryIDs").getThreadIDFromUserID(r):b("MercuryIDs").getThreadIDFromThreadFBID(q):p;q=c.tags_list.some(function(a){if(a===b("MessagingTag").ACTION_COPIED_MESSAGE||a===b("MessagingTag").ACTION_COPIED_SELF_MESSAGE||a===b("MessagingTag").ACTION_COPIED_ATTACHMENT)return!0;else return a===b("MessagingTag").ACTION_COPIED_SELF_ATTACHMENT});p=c.commerce_message_type;var s=c.customizations,t=c.replied_to_message,u;if(t==null)u=null;else{var v=t.message;u=v==null?{status:t.status,message:null}:{status:t.status,message:b("bs_js_null_undefined").fromOption(b("bs_caml_option").some(n(a,v,d,e)))}}t=c.error_data;v=c.unsent_timestamp_precise;v=v==null||v==="0"?null:b("bs_js_null_undefined").fromOption(b("bs_caml_format").caml_float_of_string(v));var w=c.unsender;r={thread_id:r,thread_fbid:d.thread_fbid,other_user_fbid:d.other_user_fbid,action_type:c.__typename==="UserMessage"?b("MercuryActionType").USER_GENERATED_MESSAGE:b("MercuryActionType").LOG_MESSAGE,message_id:o,threading_id:null,offline_threading_id:c.offline_threading_id,author:b("MercuryIDs").getParticipantIDFromUserID(c.message_sender.id),author_email:c.message_sender.email,ephemeral_ttl_mode:c.ttl,timestamp:b("bs_caml_format").caml_float_of_string(c.timestamp_precise),is_unread:c.unread,is_filtered_content:c.tags_list.indexOf(b("MessagingTag").FILTERED_CONTENT)!==-1,is_filtered_content_bh:c.tags_list.indexOf(b("MessagingTag").FILTERED_CONTENT_BH)!==-1,is_filtered_content_account:c.tags_list.indexOf(b("MessagingTag").FILTERED_CONTENT_ACCOUNT)!==-1,is_filtered_content_quasar:c.tags_list.indexOf(b("MessagingTag").FILTERED_CONTENT_QUASAR)!==-1,is_filtered_content_invalid_app:c.tags_list.indexOf(b("MessagingTag").FILTERED_CONTENT_INVALID_APP)!==-1,is_sponsored:c.is_sponsored,is_one_way_sent:c.tags_list.some(function(a){return a===b("MessagingTag").ONE_WAY_MESSAGE}),ad_id:c.ad_id,ad_client_token:c.ad_client_token,commerce_message_type:p==null?null:b("bs_js_null_undefined").fromOption(b("bs_js_dict").get(b("MNCommerceMessageType"),p)),customizations:s==null?[]:s,source:k,source_tags:j,tags:c.tags_list,is_spoof_warning:c.tags_list.indexOf(b("MessagingTag").DOMAIN_AUTH_FAIL)!==-1||c.tags_list.indexOf(b("MessagingTag").SPAM_SPOOFING)!==-1||c.tags_list.indexOf(b("MessagingTag").SPOOF_WARNING)!==-1,folder:d.folder,platform_xmd:c.platform_xmd_encoded,m_suggestions:c.m_suggestions,message_source:c.message_source_data,montage_reply_data:c.montage_reply_data,replied_to_message:u,skip_bump_thread:!1,profile_ranges:m(c),reactions:f,error_data:t==null?null:{description:t.description},removed_timestamp:v,unsender:w==null?null:{id:b("MercuryIDs").getParticipantIDFromUserID(w.messaging_actor.id),name:w.messaging_actor.name,short_name:w.messaging_actor.short_name},verse_group_role_xmd:c.verse_group_role_xmd,mib_direct_message_data:c.mib_direct_message_data,message_unsendability_status:b("MessageUnsendabilityStatus.bs").fromNullableString(c.message_unsendability_status),has_attachment:null,attachments:null,raw_attachments:null,ranges:null,meta_ranges:null,status:null,log_message_type:null,log_message_data:null,log_message_body:null,body:null,subject:null,creator_info:null,is_forwarded:q,preview_attachments:null,sticker_id:null};if(c.__typename==="UserMessage"){p=g(c);s=c.extensible_attachment;if(s==null)k=null;else{j=s.story_attachment;u=s.genie_attachment;if(u==null)t=null;else{v=u.genie_message;if(v==null)w=null;else{q=v.story_attachment;w={story_attachment:q==null?null:l(q)}}t={genie_message:w}}k={legacy_attachment_id:s.legacy_attachment_id,story_attachment:j==null?null:l(j),genie_attachment:t}}u=b("MessengerAttachmentTransformer.bs").transformAttachment(a,{extensible_attachment:k,blob_attachments:p,sticker:c.sticker},o,e);v=c.message;q=c.page_admin_sender;Object.assign(r,{body:v==null?null:v.text,creator_info:q==null?null:{creatorID:q.admin_id,creatorName:q.name,creatorType:q.sender_type,labelType:q.label_type,pageID:q.page_id,profileURI:q.profile_uri},subject:null,has_attachment:u.length>0,attachments:u,raw_attachments:null,ranges:void 0,meta_ranges:c.meta_ranges.map(function(a){return babelHelpers["extends"]({},a,{data:JSON.parse(a.data)})})})}else if(c.__typename==="VoiceCallMessage"||c.__typename==="VideoCallMessage"){w=c.__typename;s=w==="VoiceCallMessage"?b("MercuryLogMessageType").PHONE_CALL:b("MercuryLogMessageType").VIDEO_CALL;j=c.message_sender.id;t=d.other_user_fbid;k=t==null?null:b("MercuryIDs").getParticipantIDFromUserID(j===t?b("CurrentUser").getID():t);p=c.answered;Object.assign(r,{log_message_type:s,log_message_data:{answered:p==null?!1:p,call_capture_attachments:h(a,c,e),caller:b("MercuryIDs").getParticipantIDFromUserID(j),callee:k},log_message_body:c.snippet})}else if(c.__typename==="ThreadNameMessage")Object.assign(r,{log_message_type:b("MercuryLogMessageType").THREAD_NAME,log_message_data:{name:c.thread_name},log_message_body:c.snippet});else if(c.__typename==="ThreadImageMessage"){o=c.image_with_metadata;if(o==null)v=null;else{q=o.preview;v={preview_url:q==null?null:q.uri,metadata:{fbid:o.legacy_attachment_id,dimensions:String(o.original_dimensions.x)+(","+String(o.original_dimensions.y))}}}Object.assign(r,{log_message_type:b("MercuryLogMessageType").THREAD_IMAGE,log_message_data:{image:v},log_message_body:c.snippet})}else if(c.__typename==="ParticipantsAddedMessage"){u=c.participants_added;Object.assign(r,{log_message_type:b("MercuryLogMessageType").SUBSCRIBE,log_message_data:{added_participants:u==null?[]:u.map(function(a){return b("MercuryIDs").getParticipantIDFromUserID(a.id)})},log_message_body:c.snippet})}else if(c.__typename==="ParticipantLeftMessage"){w=c.participants_removed;Object.assign(r,{log_message_type:b("MercuryLogMessageType").UNSUBSCRIBE,log_message_data:{removed_participants:w==null?[]:w.map(function(a){return b("MercuryIDs").getParticipantIDFromUserID(a.id)})},log_message_body:c.snippet})}else if(c.__typename==="GenericAdminTextMessage"){d=c.extensible_message_admin_text;t=c.extensible_message_admin_text_type;d==null?t==null||Object.assign(r,{log_message_body:c.snippet,log_message_data:{message_type:b("bs_js_null_undefined").fromOption(b("bs_js_dict").get(b("MessagingGenericAdminTextType"),t)),untypedData:void 0},log_message_type:b("MercuryLogMessageType").GENERIC_ADMIN_TEXT}):t==null||Object.assign(r,i(a,d,t,c.snippet,e))}else if(c.__typename==="P2PPaymentRequestMessage"||c.__typename==="P2PPaymentMessage"){s=c.p2p_sender;p=c.p2p_receiver;j=c.amount;k=c.message_type;Object.assign(r,{log_message_body:c.snippet,log_message_data:{transfer_id:c.transfer_id,senderId:s==null?null:b("MercuryIDs").getParticipantIDFromUserID(s.id),receiverId:p==null?null:b("MercuryIDs").getParticipantIDFromUserID(p.id),formattedAmount:j==null?null:j.formatted,subtype:k==null?null:b("bs_js_null_undefined").fromOption(b("bs_js_dict").get(b("P2PPaymentLogMessageSubtype"),k))},log_message_type:b("MercuryLogMessageType").ORION})}return r}f.unsafeCastBlobAttachments=g;f._getCallCaptureAttachments=h;f._getGenericAdminTextMessage=i;f._getStyleList=j;f.unsafeCastExtensibleAttachmentWithoutSubattachments=k;f.unsafeCastExtensibleAttachment=l;f._getProfileRanges=m;f.transformMessage=n}),null);
__d("MessengerPaperclipIconSVGM4React.bs",["cx","React"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var c;return(c=b("React")).jsx("svg",{children:c.jsxs("g",{children:[c.jsx("polygon",{points:"0 36 36 36 36 0 0 0"}),c.jsx("path",{d:"M18,31 C13.5815,31 10,27.4185 10,23 L10,11 C10,7.6865 12.6865,5 16,5 C19.3135,5 22,7.6865 22,11 L22,21 C22,23.209 20.209,25 18,25 C15.791,25 14,23.209 14,21 L14,14.5 C14,13.6715 14.6715,13 15.5,13 C16.3285,13 17,13.6715 17,14.5 L17,21 C17,21.552 17.448,22 18,22 C18.552,22 19,21.552 19,21 L19,11 C19,9.3435 17.6565,8 16,8 C14.3435,8 13,9.3435 13,11 L13,23 C13,25.761 15.239,28 18,28 C20.761,28 23,25.761 23,23 L23,14.5 C23,13.6715 23.6715,13 24.5,13 C25.3285,13 26,13.6715 26,14.5 L26,23 C26,27.4185 22.4185,31 18,31",fill:a})],fill:"none",fillRule:"evenodd"}),className:"_7oal",height:"36px",width:"36px",viewBox:"0 0 36 36"})}f.make=a}),null);
__d("MessengerPaperclipIconSVGM4React.re",["MessengerPaperclipIconSVGM4React.bs"],(function(a,b,c,d,e,f){a=function(a){a=b("MessengerPaperclipIconSVGM4React.bs").make(a.fill);return a};f.make=a}),null);
__d("MessengerParticipantUtils.bs",["bs_belt_Set","bs_caml_obj","MercuryIDs"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function g(a,c,d){var e=b("MercuryIDs").getParticipantIDFromUserID(a);a=d.participants.filter(function(a){return b("bs_caml_obj").caml_notequal(a,e)});return a.filter(function(a){return b("bs_belt_Set").has(c,a)})}d=b("bs_belt_Set").has;function h(a,b,c){if(c.is_canonical)return[];else return g(a,b,c)}function a(a,b,c){return h(a,b,c).length>0}function c(a,b,c){return g(a,b,c).length>0}f.findIntersection=g;f.has=d;f.participantsInGroupThread=h;f.areParticipantsInGroupThread=a;f.areParticipantsInThread=c}),null);
__d("MessengerParticipantsWebGraphQLQuery",["WebGraphQLQueryBase"],(function(a,b,c,d,e,f){"use strict";__p&&__p();e.exports=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}b.__getDocID=function(){return"2459283430857531"};b.getQueryID=function(){return"2623372101056687"};return b}(b("WebGraphQLQueryBase"))}),null);
__d("MessengerThreadCannotReplyReason.bs",["bs_js_dict","MessengerThreadCannotReplyReason"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a){if(a==null)return;else return b("bs_js_dict").get(b("MessengerThreadCannotReplyReason"),a)}function c(a){if(a==null)return null;else if(a!==0)switch(a-1|0){case 0:return b("MessengerThreadCannotReplyReason").RECIPIENTS_NOT_LOADABLE;case 1:return b("MessengerThreadCannotReplyReason").BLOCKED;case 2:return b("MessengerThreadCannotReplyReason").MESSENGER_BLOCKEE}else return b("MessengerThreadCannotReplyReason").BLOCKED}f.fromName=a;f.fromMessageThreadCannotReplyReason=c}),null);
__d("MessengerServerPayloadTransformer.bs",["fbt","URI","FBID.bs","bs_array","bs_string","bs_js_dict","bs_js_json","getByPath","bs_caml_array","ChatConfig","MercuryIDs","bs_belt_Option","bs_caml_format","bs_caml_option","CurrentUser","GenderConst","bs_js_null_undefined","DisplayGenderConst","MessagingThreadType","isMessengerDotComURI","WorkForeignEntityType","MercuryParticipantTypes","MessengerGroupAdminType","MessengerGroupsSyncStatus.bs","MessengerGroupThreadSubType","MessengerMessageTransformer.bs","MessengerAttachmentTransformer.bs","MessengerGroupAdminModelStatus.bs","MessengerObjectAssociationType","MessageThreadUnsendabilityStatus.bs","MessengerThreadCannotReplyReason","MessengerThreadCannotReplyReason.bs"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;function i(a){__p&&__p();var c=a.location_coordinates;c=c==null?[null,null]:[c.latitude,c.longitude];var d=a.location_page,e;if(d==null)e=null;else{d=d.address;e=d==null?null:d.full_address}d=a.allows_rsvp;d=d?1:0;var f=b("bs_array").fold_left(function(a,b){a[b.node.id]=b.guest_list_state;return a},{},a.event_reminder_members.edges),g=a.lightweight_event_creator;return{creator_id:g==null?null:g.id,event_members:f,event_time:a.time,event_type:a.lightweight_event_type,latitude:c[0],longitude:c[1],location_address:e,location_name:a.location_name,note:a.note,oid:a.id,related_event:a.related_event,repeat_mode:a.repeat_mode,seconds_to_notify_before:a.seconds_to_notify_before,status:a.lightweight_event_status,title:a.event_title,track_rsvp:d}}function j(a){__p&&__p();a=a.associated_object;if(a==null)return null;else{var c=a.action_link,d;if(c==null)d=null;else{var e=b("CurrentUser").isWorkUser();d=e?c:new(h||(h=b("URI")))(c).setDomain("www.facebook.com")}e=a.profile_picture;c=a.group_general_chat;var f=a.group_events,g=a.group_saves,i=a.verse_group_link;return{id:a.id,name:a.name,action_link:d,profile_picture:e==null?null:{uri:e.uri},group_general_chat:c==null?null:{id:c.id},room_type:a.room_type,privacy_mode:a.privacy_mode,approval_mode_toggleable:a.approval_mode_toggleable,start_timestamp:a.start_timestamp,event_place:a.event_place,mentorship_program:a.mentorship_program,group_events:f==null?{count:0}:{count:f.count},group_saves:g==null?{count:0}:{count:g.count},verse_group_link:i==null?null:new(h||(h=b("URI")))(i).setDomain("www.facebook.com")}}}function k(a){a=a.related_page_thread;if(a==null)return null;else{var b=a.custom_thread_tags.nodes.map(function(a){return{id:a.id,name:a.name,color:a.color}}),c=a.custom_thread_labels.nodes.map(function(a){return{id:a.id,name:a.name,color:a.label_color}}),d=a.page;d=d==null?null:d.id;return{flagged:a.is_flagged,pageID:d,customTags:b,customLabels:c}}}function l(a){__p&&__p();var c=a.thread_key.other_user_id;if(c==null)return!1;else{a=a.all_participants.edges;return b("bs_array").fold_left(function(a,b){b=b.node.messaging_actor;if(b.id===c)return b.__typename==="User";else return a},!1,a)}}function m(a){__p&&__p();if(a.length!==0){var b={};a.forEach(function(a){var c=a.nickname;if(c==null)return 0;else{b[a.participant_id]=c;return 0}});return b}else return null}function n(a){return"#"+b("bs_string").sub(a,2,a.length-2|0)}function o(a){if(a==null||a==="")return null;else return n(a)}function a(a){return a.thread_key.thread_fbid}function c(a){return a.thread_key.other_user_id}function d(a){return b("bs_caml_option").nullable_to_opt(b("getByPath")(a,["messages","page_info"]))}function e(a){var c=b("CurrentUser").isWorkUser();c=c?g._("Utente di Workplace"):g._("Utente Facebook");return{id:"fbid:"+a,fbid:b("FBID.bs").ofStringExn(a),gender:b("GenderConst").UNKNOWN_SINGULAR,href:null,image_src:null,big_image_src:null,name:c,short_name:c,user_type:null,vanity:null,accepts_messenger_user_feedback:!1,is_friend:!1,is_viewer_managing_parent:!1,is_messenger_user:!1,is_aloha_proxy_confirmed:!1,is_business_enabled:!1,is_messenger_platform_bot:!1,is_messenger_ignored:null,is_messenger_blocked:!1,is_facebook_blocked:!0,is_subscribed_to_page_updates:!1,title:null,company_name:null,employee:!1,instant_game_channel:null,work_foreign_entity_info:null,timezone:null,wec_group_admins:[],wec_group_creation_time:null,wec_group_invite_link:null,wec_group_participant_count:null,wec_group_participants:[],verification_status:null}}function p(a){__p&&__p();var c=a.profile_picture_url;if(c==null){var d=a.big_image_src;d=d==null?null:d.uri}else d=c;c=a.gender;var e=a.url,f;if(e==null)f=null;else{var g=b("isMessengerDotComURI")(new(h||(h=b("URI")))(e));f=g?new(h||(h=b("URI")))(e).getUnqualifiedURI().setDomain("www.facebook.com").setProtocol("https").toString():e}g=a.__typename;var i;switch(g){case"MessengerCallGuestUser":i=b("MercuryParticipantTypes").GUEST;break;case"NeoApprovedUser":i=b("MercuryParticipantTypes").PARENT_APPROVED_USER;break;case"Page":i=b("MercuryParticipantTypes").PAGE;break;case"User":i=b("MercuryParticipantTypes").USER;break;default:i=null}e=a.accepts_messenger_user_feedback;g=a.is_viewer_friend;var j=a.is_viewer_managing_parent,k=a.is_messenger_user,l=a.is_aloha_proxy_confirmed,m=a.is_messenger_platform_bot,n=a.is_message_blocked_by_viewer,o=a.is_blocked_by_viewer,p=a.is_viewer_subscribed_to_message_updates,q=a.work_info,r;if(q==null)r=null;else{var s=q.work_community;s=s==null?null:s.name;q=q.job_title;r=s==null?q==null?null:q:q==null||q.length===0?s:""+(String(q)+(" \u2022 "+(String(s)+"")))}q=a.work_info;if(q==null)s=null;else{q=q.work_community;q=q==null?null:q.name;var t=a.work_foreign_entity_info;s=q==null||t==null||t.type!==b("WorkForeignEntityType").FOREIGN?null:q}t=a.is_employee;q=a.work_foreign_entity_info;var u=a.wec_group_creation_time,v=a.wec_group_invite_link,w=a.wec_group_participants,x=a.wec_group_participants,y=a.wec_group_admins;return{id:"fbid:"+a.id,fbid:a.id,gender:c==null?b("GenderConst").NOT_A_PERSON:c===b("DisplayGenderConst").MALE?b("GenderConst").MALE_SINGULAR:c===b("DisplayGenderConst").FEMALE?b("GenderConst").FEMALE_SINGULAR:b("GenderConst").NOT_A_PERSON,href:f,image_src:d,big_image_src:d,name:a.name,short_name:b("bs_belt_Option").getWithDefault(b("bs_caml_option").nullable_to_opt(a.short_name),a.name),user_type:i,vanity:a.username,accepts_messenger_user_feedback:e==null?!1:e,is_friend:g==null?!1:g,is_viewer_managing_parent:j==null?!1:j,is_messenger_user:k==null?!1:k,is_aloha_proxy_confirmed:l==null?!1:l,is_business_enabled:a.__typename==="Page",is_messenger_platform_bot:m==null?!1:m,is_messenger_ignored:null,is_messenger_blocked:n==null?!1:n,is_facebook_blocked:o==null?!1:o,is_subscribed_to_page_updates:p==null?!0:p,title:r,company_name:s,employee:t==null?!1:t,instant_game_channel:a.__typename==="Page"?a.instant_game_channel:null,work_foreign_entity_info:q==null?null:q,timezone:null,wec_group_creation_time:u==null?null:u,wec_group_invite_link:v==null?null:v,wec_group_participant_count:w==null?null:w.count,wec_group_participants:x==null?[]:x.nodes.map(function(a){return{id:b("MercuryIDs").getParticipantIDFromUserID(a.messaging_actor.id),name:a.messaging_actor.name}}),wec_group_admins:y==null?[]:y.nodes.map(function(a){return{id:b("MercuryIDs").getParticipantIDFromUserID(a.messaging_actor.id),name:a.messaging_actor.name}}),verification_status:a.verification_status}}function q(a){return a.all_participants.edges.map(function(a){return p(a.node.messaging_actor)})}function r(a,c){__p&&__p();c=c.read_receipts;if(c==null)return;else{var d={};c.nodes.forEach(function(c){var e=c.actor;if(!(e==null)&&a!==e.id){d[e.id]={action:b("bs_caml_format").caml_float_of_string(c.action),watermark:b("bs_caml_format").caml_float_of_string(c.watermark)};return 0}else return 0});return b("bs_caml_option").some(d)}}function s(a){__p&&__p();a=a.delivery_receipts;if(a==null)return[];else return a.nodes.sort(function(a,c){a=b("bs_caml_format").caml_float_of_string(a.timestamp_precise);c=b("bs_caml_format").caml_float_of_string(c.timestamp_precise);if(a>c)return-1;else if(a===c)return 0;else return 1})}function t(a,c,d){var e=c.messages;if(e==null)return;else return e.nodes.map(function(e){return b("MessengerMessageTransformer.bs").transformMessage(a,e,{thread_id:null,thread_fbid:c.thread_key.thread_fbid,other_user_fbid:c.thread_key.other_user_id,folder:c.folder.toLowerCase()},d)})}function u(a,c,d){__p&&__p();var e=c.last_message.nodes.map(function(e){__p&&__p();var f=b("MessengerMessageTransformer.bs").unsafeCastBlobAttachments(e),g=e.extensible_attachment,h;if(g==null)h=null;else{var i=g.story_attachment,a=g.genie_attachment,c;if(a==null)c=null;else{a=a.genie_message;var d;if(a==null)d=null;else{a=a.story_attachment;d={story_attachment:a==null?null:b("MessengerMessageTransformer.bs").unsafeCastExtensibleAttachment(a)}}c={genie_message:d}}h={legacy_attachment_id:g.legacy_attachment_id,story_attachment:i==null?null:b("MessengerMessageTransformer.bs").unsafeCastExtensibleAttachment(i),genie_attachment:c}}return{message_id:e.message_id,snippet:e.snippet,message_sender:e.message_sender,timestamp_precise:e.timestamp_precise,commerce_message_type:e.commerce_message_type,extensible_attachment:h,blob_attachments:f,sticker:e.sticker,extensible_message_admin_text:e.extensible_message_admin_text,platform_xmd_encoded:e.platform_xmd_encoded}}),f={id:c.id,thread_key:c.thread_key,name:c.name,all_participants:c.all_participants,last_message:{nodes:e},unread_count:c.unread_count,message_count:c.messages_count,image:c.image,updated_time_precise:c.updated_time_precise,mute_until:c.mute_until,is_pinned:c.is_pinned,is_pin_protected:c.is_pin_protected,is_viewer_subscribed:c.is_viewer_subscribed,is_canonical_neo_user:c.is_canonical_neo_user,thread_queue_enabled:c.thread_queue_enabled,folder:c.folder,unread_mentions_count:c.unread_mentions_count,has_viewer_archived:c.has_viewer_archived,is_page_follow_up:c.is_page_follow_up,is_page_unresponded_thread:c.is_page_unresponded_thread,cannot_reply_reason:c.cannot_reply_reason,can_viewer_report:c.can_viewer_report,ephemeral_ttl_mode:c.ephemeral_ttl_mode,customization_info:c.customization_info,thread_admins:c.thread_admins,approval_mode:c.approval_mode,joinable_mode:c.joinable_mode,thread_queue_metadata:c.thread_queue_metadata,event_reminders:c.event_reminders,montage_thread:c.montage_thread,last_read_receipt:c.last_read_receipt,related_page_thread:c.related_page_thread,rtc_call_data:c.rtc_call_data,associated_object:c.associated_object,reactions_mute_mode:c.reactions_mute_mode,mentions_mute_mode:c.mentions_mute_mode,privacy_mode:c.privacy_mode,customization_enabled:c.customization_enabled,thread_type:c.thread_type,group_thread_subtype:c.group_thread_subtype,thread_pin_timestamp:c.thread_pin_timestamp,page_unsubscribe_status:c.page_unsubscribe_status,participant_add_mode_as_string:c.participant_add_mode_as_string,participants_event_status:c.participants_event_status,marketplace_thread_data:c.marketplace_thread_data,page_comm_item:c.page_comm_item,group_approval_queue:c.group_approval_queue,admin_model_status_string:c.admin_model_status_string,groups_sync_status_string:c.groups_sync_status_string,work_groups_sync_metadata:c.work_groups_sync_metadata,pinned_messages:c.pinned_messages,description:c.description,joinable_link:c.joinable_link,linked_mentorship_programs:c.linked_mentorship_programs,theme:c.thread_theme,thread_connectivity_data:c.thread_connectivity_data,thread_unsendability_status:c.thread_unsendability_status,is_business_page_active:c.is_business_page_active,thread_associated_job_applications:c.thread_associated_job_applications,thread_associated_page_admin:c.thread_associated_page_admin};e=f.customization_info;if(e==null)c=[null,null,null];else{var g=e.emoji;c=[o(e.outgoing_bubble_color),g==null?null:{emoji:g},m(e.participant_customizations)]}g=c[0];e=f.theme;if(e==null)g=[g,g,g,[],null];else{var h=e.gradient_colors.length,p=n(e.fallback_color),q=b("FBID.bs").ofString(e.id);q=q!==void 0?b("bs_caml_option").valFromOption(q):null;if(h>0&&b("ChatConfig").get("chat_tab_has_gradients")){e=e.gradient_colors.map(n);g=[p,b("bs_caml_array").caml_array_get(e,0),b("bs_caml_array").caml_array_get(e,h-1|0),e,q]}else g=[p,p,p,[],q]}h=f.page_comm_item;e=h==null?[null,null,null,null,null,[]]:[h.comm_status,h.comm_source_id,h.id,h.subtitle,h.comm_item_owners,h.comm_icon_type];p=f.last_message.nodes;q=p.length!==0?b("bs_caml_option").some(p[0]):void 0;h=f.last_read_receipt.nodes;p=h.length!==0?b("bs_caml_option").some(h[0]):void 0;if(q!==void 0){h=b("bs_caml_option").valFromOption(q);h=b("MessengerAttachmentTransformer.bs").transformAttachment(a,{extensible_attachment:h.extensible_attachment,blob_attachments:h.blob_attachments,sticker:h.sticker},h.message_id,d)}else h=[];var r;if(q!==void 0){d=b("bs_caml_option").valFromOption(q).extensible_message_admin_text;if(d==null)r=null;else{d=d.game;r=d==null?null:d.id}}else r=null;d=b("MessengerThreadCannotReplyReason.bs").fromName(f.cannot_reply_reason);var s=f.thread_key.other_user_id;if(s==null){var t=f.thread_key.thread_fbid;t=t==null?null:t}else t=s;s=b("bs_array").fold_left(function(a,c){a[c.id]=b("MessengerGroupAdminType").REGULAR_ADMIN;return a},{},f.thread_admins);s=b("bs_array").fold_left(function(a,c){var d=c.node.messaging_actor.id;c=c.admin_type;var e=b("bs_js_dict").get(a,d);c==null||e!==void 0&&(a[d]=c);return a},s,f.all_participants.edges);var u=f.thread_queue_metadata,v=f.thread_type,w=f.group_thread_subtype,x=f.montage_thread,y=f.image,z=f.thread_key.other_user_id,A;if(q!==void 0){var B=b("bs_caml_option").valFromOption(q).platform_xmd_encoded;if(B==null)A=!1;else{try{B=JSON.parse(B)}catch(a){B={}}B=b("bs_js_json").classify(B);A=typeof B==="number"||B.tag!==2?!1:b("bs_js_dict").get(B[0],"landing_exp")!==void 0}}else A=!1;B=f.thread_queue_metadata;var C=f.event_reminders.nodes,D=f.name,E=f.associated_object,F;if(E==null)F=null;else{E=E.group_general_chat;if(E==null||t==null)F=null;else{E=E.id===t;F=E?b("MessengerObjectAssociationType").GENERAL_CHAT:b("MessengerObjectAssociationType").REGULAR_CHAT}}E=f.rtc_call_data;var G;if(E==null)G=null;else{var H=E.initiator;G={call_state:E.call_state,server_info_data:E.server_info_data,initiator_fbid:H==null?null:b("bs_js_null_undefined").fromOption(b("FBID.bs").ofString(H.id))}}E=f.marketplace_thread_data;if(E==null)H=null;else{var I=E.for_sale_item,J;if(I==null)J=null;else{var K=I.formatted_price,L=I.location,M;if(L==null)M=null;else{L=L.reverse_geocode;M={reverse_geocode:L==null?null:{city:L.city,state:L.state}}}L=I.primary_photo;var N;if(L==null)N=null;else{L=L.image;N=L==null?null:L.uri}L=I.product_item;J={id:I.id,story_id:I.story_id,title:I.group_commerce_item_title,price:K==null?null:K.text,location:M,is_pending:I.is_pending,is_sold:I.is_sold,image_uri:N,is_commerce_post_item:L==null?!1:L.is_commerce_post_item,url:I.url}}K=E.buyer;M=E.seller;N=E.rating_state;H={for_sale_item:J,buyer_fbid:K==null?null:K.id,seller_fbid:M==null?null:M.id,is_eligible_to_rate:N==null?null:N.is_eligible_to_rate,eligible_profile_selling_invoice_actions:E.eligible_profile_selling_invoice_actions}}L=f.group_approval_queue;I=f.work_groups_sync_metadata;if(I==null)J=null;else{K=I.fb_group;J=K==null?null:K}M=f.pinned_messages;N=f.linked_mentorship_programs;E=f.thread_associated_job_applications;return{admins:s,approval_mode:f.approval_mode,approval_queue_ids:u==null?[]:u.approval_requests.nodes.map(function(a){return b("MercuryIDs").getParticipantIDFromUserID(b("FBID.bs").ofStringExn(a.id))}),can_reply:d===void 0,cannot_reply_reason:d!==void 0?b("bs_caml_option").valFromOption(d):null,can_viewer_report:f.can_viewer_report,solid_color:g[0],header_color:g[1],footer_color:g[2],gradient_colors:g[3],theme_id:g[4],thread_connectivity_data:f.thread_connectivity_data,custom_like_icon:c[1],custom_nickname:c[2],customization_enabled:f.customization_enabled,thread_type:v==null?null:b("bs_js_null_undefined").fromOption(b("bs_js_dict").get(b("MessagingThreadType"),v)),group_thread_subtype:w==null?null:b("bs_js_null_undefined").fromOption(b("bs_js_dict").get(b("MessengerGroupThreadSubType"),w)),page_unsubscribe_status:f.page_unsubscribe_status,participant_add_mode:f.participant_add_mode_as_string,ephemeral_ttl_mode:f.ephemeral_ttl_mode,folder:f.folder.toLowerCase(),has_email_participant:d!==void 0?b("bs_caml_option").valFromOption(d)===b("MessengerThreadCannotReplyReason").HAS_EMAIL_PARTICIPANT:!1,has_montage:!(x==null),unread_mentions_count:f.unread_mentions_count,image_src:y==null?null:y.uri,is_archived:f.has_viewer_archived,is_pinned:f.is_pinned,is_page_follow_up:f.is_page_follow_up,is_page_unresponded_thread:f.is_page_unresponded_thread,is_canonical_user:l(f),is_canonical:!(z==null),is_from_weak_entry_point:A,is_pin_protected:f.is_pin_protected,is_subscribed:f.is_viewer_subscribed,is_canonical_neo_user:f.is_canonical_neo_user,is_thread_queue_enabled:!(B==null),joinable_mode:{mode:b("bs_caml_format").caml_int_of_string(f.joinable_mode.mode),link:f.joinable_mode.link},last_message_timestamp:q!==void 0?b("bs_caml_format").caml_float_of_string(b("bs_caml_option").valFromOption(q).timestamp_precise):0,last_message_id:null,last_message_type:q!==void 0?b("bs_caml_option").valFromOption(q).commerce_message_type:null,last_read_timestamp:p!==void 0?b("bs_caml_format").caml_float_of_string(b("bs_caml_option").valFromOption(p).timestamp_precise):0,lightweight_event:C.length!==0?i(C[0]):null,lightweight_events:b("bs_array").fold_left(function(a,b){a[b.id]=i(b);return a},{},f.event_reminders.nodes),message_count:f.message_count,mute_until:f.mute_until,name:D==null?"":D,object_association_type:F,other_user_fbid:f.thread_key.other_user_id,page_thread_info:k(f),participants:f.all_participants.edges.map(function(a){return b("MercuryIDs").getParticipantIDFromUserID(a.node.messaging_actor.id)}),participants_event_status:f.participants_event_status,read_only:d!==void 0?b("bs_caml_option").valFromOption(d)===b("MessengerThreadCannotReplyReason").READ_ONLY:!1,recipients_loadable:d!==void 0?b("bs_caml_option").valFromOption(d)!==b("MessengerThreadCannotReplyReason").RECIPIENTS_NOT_LOADABLE:!0,server_timestamp:b("bs_caml_format").caml_float_of_string(f.updated_time_precise),snippet_attachments:h,snippet_sender:q!==void 0?b("MercuryIDs").getParticipantIDFromUserID(b("bs_caml_option").valFromOption(q).message_sender.messaging_actor.id):null,snippet:q!==void 0?b("bs_caml_option").valFromOption(q).snippet:null,thread_fbid:t,thread_id:"",thread_pin_timestamp:f.thread_pin_timestamp,timestamp:b("bs_caml_format").caml_float_of_string(f.updated_time_precise),unread_count:f.unread_count,rtc_call_data:G,marketplace_thread_data:H,associated_object:j(f),reactions_mute_mode:f.reactions_mute_mode==="REACTIONS_NOT_MUTED"?0:1,mentions_mute_mode:f.mentions_mute_mode==="MENTIONS_NOT_MUTED"?0:1,comm_status:e[0],page_comm_item_id:e[2],comm_source_id:e[1],subtitle:e[3],comm_item_owners:e[4],comm_icon_type:e[5],group_approval_queue:L==null?null:L.nodes,game_id:r,admin_model_status:b("MessengerGroupAdminModelStatus.bs").fromNullableString(f.admin_model_status_string),groups_sync_status:b("MessengerGroupsSyncStatus.bs").fromNullableString(f.groups_sync_status_string),work_associated_group:J,pinned_messages:M==null?null:M.map(function(c){var d=c.message;return{message_id:c.message_id,pinning_time:c.pinning_time,message:d==null?null:b("MessengerMessageTransformer.bs").transformMessage(a,d,{thread_id:null,thread_fbid:f.thread_key.thread_fbid,other_user_fbid:f.thread_key.other_user_id,folder:f.folder.toLowerCase()},!1)}}),description:f.description,joinable_link:f.joinable_link,linked_mentorship_programs:N==null?null:N,thread_unsendability_status:b("MessageThreadUnsendabilityStatus.bs").fromNullableString(f.thread_unsendability_status),is_business_page_active:f.is_business_page_active,thread_associated_job_applications:E==null?null:E,thread_associated_page_admin:f.thread_associated_page_admin,graphql_token:f.id}}f.getThreadFBID=a;f.getOtherUserID=c;f.getMessagePageInfo=d;f.getBlockedParticipant=e;f.transformParticipant=p;f.transformParticipants=q;f.transformReadReceipts=r;f.transformDeliveryReceipts=s;f.transformMessages=t;f.transformThread=u}),null);
__d("MessengerParticipantsFetcher.bs",["Promise","BanzaiODS","WebGraphQL","MessengerServerPayloadTransformer.bs","MessengerParticipantsWebGraphQLQuery"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a){__p&&__p();var c=new(b("MessengerParticipantsWebGraphQLQuery"))(a);return b("WebGraphQL").exec(c,{actorID:null,batchName:"MessengerParticipantsFetcher"})["catch"](function(a){b("BanzaiODS").bumpEntityKey(2966,"messenger_webgraphql","fetch_participants.failure");return b("Promise").reject(a)}).then(function(c){__p&&__p();b("BanzaiODS").bumpEntityKey(2966,"messenger_webgraphql","fetch_participants.success");var d=[],e=new Set();c.messaging_actors.forEach(function(a){if(a==null)return 0;else{a=b("MessengerServerPayloadTransformer.bs").transformParticipant(a);e.add(a.fbid);d.push(a);return 0}});c=a.ids.filter(function(a){return!e.has(a)});c.length>0&&c.forEach(function(a){d.push(b("MessengerServerPayloadTransformer.bs").getBlockedParticipant(a));return 0});return d})}f.$$fetch=a}),null);
__d("MessengerParticipants.bs",["fbt","Promise","FBID.bs","bs_curry","bs_js_dict","bs_caml_obj","BanzaiODS","immutable","bs_belt_Array","MercuryIDs","bs_caml_option","CurrentUser","MercuryAssert","ImageSourceType","ImmutableObject","bs_js_null_undefined","ImageSourceRequest","MercuryVanityIDMap.bs","PhotoResizeModeConst","MercuryParticipantTypes","MercuryParticipantsConstants","MessengerParticipantsFetcher.bs"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=[1],i={},j=new Set(),k={},l=function(b,a){delete b[a];return 0},m=function(b,a){delete b[a];return 0};function n(a){a=b("CurrentUser").isWorkUser();if(a)return g._("Utente di Workplace");else return g._("Utente Facebook")}function o(a){__p&&__p();var c=a.user_type;if(c==null||!(b("bs_caml_obj").caml_equal(c,b("MercuryParticipantTypes").USER)||b("bs_caml_obj").caml_equal(c,b("MercuryParticipantTypes").FRIEND)))return a;else{c=a.href;var d=a.vanity;if(c==null&&d==null){c=n(0);return Object.assign(a,{name:c,short_name:c})}else return a}}function a(a){Object.keys(i).forEach(function(a){return b("bs_curry")._2(m,i,a)});return 0}function c(a){__p&&__p();a=a.participants;if(a==null)return 0;else{a.map(function(a){__p&&__p();var c=a.id,d=a.vanity;d==null||b("MercuryVanityIDMap.bs").set(d,c);d=b("bs_js_dict").get(i,c);if(d!==void 0){i[c]=b("ImmutableObject").set(b("bs_caml_option").valFromOption(d),a);return 0}else{i[c]=new(b("ImmutableObject"))(o(a));return 0}});return 0}}function p(a,c){__p&&__p();var d={},e=[];a.forEach(function(a){var c=b("bs_js_dict").get(i,a);if(c!==void 0){d[a]=b("bs_caml_option").valFromOption(c);return 0}else{e.push(a);return 0}});if(e.length!==0){var f=[];e.forEach(function(a){__p&&__p();if(j.has(a))return 0;else{var c=b("MercuryIDs").getUserIDFromParticipantID(a);if(c==null)return 0;else{f.push(c);j.add(a);return 0}}});var g=h[0].toString();k[g]=[a,c];h[0]=h[0]+1|0;f.length>0&&b("MessengerParticipantsFetcher.bs").$$fetch({ids:f}).then(function(a){__p&&__p();a.forEach(function(a){i[a.id]=new(b("ImmutableObject"))(a);var c=a.id;a=a.vanity;a==null||b("MercuryVanityIDMap.bs").set(a,c);j["delete"](c);return 0});Object.keys(k).forEach(function(a){__p&&__p();var d=b("bs_js_dict").get(k,a);if(d!==void 0){d=d;var e=d[0],c={};e.forEach(function(d){var a=b("bs_js_dict").get(i,d);if(a!==void 0){c[d]=b("bs_caml_option").valFromOption(a);return 0}else return 0});if(Object.keys(c).length===e.length){b("bs_curry")._2(l,k,a);return d[1](c)}else return 0}else return 0});b("BanzaiODS").bumpEntityKey(2966,"messenger_webgraphql","fetch_participant.success");return b("Promise").resolve(0)})["catch"](function(a){b("BanzaiODS").bumpEntityKey(2966,"messenger_webgraphql","fetch_participant.failure");return b("Promise").resolve(0)});return g}else{c(d);return null}}function d(a,c){b("MercuryAssert").isParticipantID(a);return p([a],function(d){d=b("bs_js_dict").get(d,a);if(d!==void 0)return b("bs_curry")._1(c,b("bs_caml_option").valFromOption(d));else return 0})}function q(a){return b("bs_js_null_undefined").fromOption(b("bs_js_dict").get(i,a))}function r(c,d){__p&&__p();var e=[],a=[];c.forEach(function(b){var c=q(b);c==null?e.push(b):a.push(c);return 0});if(e.length!==0){var f=p(e,function(a){return b("bs_curry")._1(d,b("bs_belt_Array").keepMap(c,function(a){return b("bs_caml_option").nullable_to_opt(q(a))}))});return[a,f]}else return[a,null]}function e(a,c){var d=function(a){return b("immutable").Map(a.map(function(a){return[a.id,a]}))},e=function(a){return b("bs_curry")._1(c,d(a))};a=r(a,e);return[d(a[0]),a[1]]}function s(a){return b("bs_curry")._2(l,k,a)}function t(a,c,d){new(b("ImageSourceRequest"))().setFBID(b("bs_js_null_undefined").fromOption(b("bs_caml_option").nullable_to_opt(b("MercuryIDs").getUserIDFromParticipantID(a)))).setType(b("ImageSourceType").PROFILE_PICTURE).setDimensions(c,c).setResizeMode(b("PhotoResizeModeConst").COVER).setCallback(function(c){return b("bs_curry")._2(d,a,c)}).send();return 0}function u(a,c,d,e){__p&&__p();b("MercuryAssert").allParticipantIDs(a);var f=[!1],g=p(a,function(e){__p&&__p();var g={},h=function(d,e){g[d]=e;if(!f[0]&&a.length===Object.keys(g).length)return b("bs_curry")._1(c,g);else return 0},j=function(a,c){var d=b("bs_js_dict").get(e,a);d!==void 0&&(e[a]=b("ImmutableObject").set(b("bs_caml_option").valFromOption(d),{big_image_src:c.uri}));return h(a,c.uri)};Object.keys(e).map(function(a){return a}).forEach(function(a){__p&&__p();var c=b("bs_js_dict").get(e,a);if(c!==void 0){c=b("bs_caml_option").valFromOption(c);var f=d===b("MercuryParticipantsConstants").BIG_IMAGE_SIZE;f=f?b("bs_caml_option").nullable_to_opt(c.big_image_src):void 0;if(f!==void 0)return h(c.id,f);else return t(a,d,j)}else return t(a,d,j)});return 0});return{remove:function(a){f[0]=!0;if(g==null)return 0;else return s(g)}}}function v(a,c,d){return u(a,c,b("MercuryParticipantsConstants").BIG_IMAGE_SIZE,0)}function w(a,c){return v(a,function(d){return b("bs_curry")._1(c,a.map(function(a){return b("bs_js_null_undefined").fromOption(b("bs_js_dict").get(d,a))}))},0)}function x(a,c,d){return u(a,function(d){return b("bs_curry")._1(c,a.map(function(a){return b("bs_js_null_undefined").fromOption(b("bs_js_dict").get(d,a))}))},d,0)}function y(a){__p&&__p();if(a==null)return null;else if(b("MercuryVanityIDMap.bs").hasVanity(a)){var c=b("MercuryVanityIDMap.bs").getID(a);if(c==null)return null;else return c}else{c=/^\d+$/;if(c.test(a)){c=b("FBID.bs").ofString(a);if(c!==void 0)return b("MercuryIDs").getParticipantIDFromUserID(b("bs_caml_option").valFromOption(c));else return null}else return null}}f.reset=a;f.addParticipants=c;f.getDefaultName=n;f.get=d;f.getNow=q;f.getMulti=p;f.getMultiEager=r;f.getMultiEagerMap=e;f.removeCallback=s;f.getBigImageMultiWithSize=u;f.getBigImageMulti=v;f.getOrderedBigImageMulti=w;f.getOrderedBigImageMultiWithSize=x;f.getIDFromVanityOrFBID=y}),null);
__d("MessengerPersonas.bs",["bs_js_dict","bs_js_null_undefined"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g={};function a(a){if(a==null)return 0;else{var c=b("bs_js_dict").get(g,a.id);if(c!==void 0)return 0;else{g[a.id]=a;return 0}}}function c(a){return b("bs_js_null_undefined").fromOption(b("bs_js_dict").get(g,a))}f.personas=g;f.addPersona=a;f.getNow=c}),null);
__d("MessengerPhotoIconSVGM4React.bs",["cx","React"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var c=a.size;c=c!==void 0?c:36;a=a.fill;return b("React").jsx("svg",{children:b("React").jsx("g",{children:b("React").jsxs("g",{children:[b("React").jsx("polygon",{points:"0 36 36 36 36 0 0 0"}),b("React").jsx("path",{d:"M13.5,11 C12.1195,11 11,12.119 11,13.5 C11,14.881 12.1195,16 13.5,16 C14.8805,16 16,14.881 16,13.5 C16,12.119 14.8805,11 13.5,11 M26.638,21.467 L21.2375,18.767 C19.199,17.7485 16.801,17.7485 14.7625,18.767 L9.362,21.467 C9.1955,21.55 9,21.429 9,21.243 L9,11 C9,9.8955 9.8955,9 11,9 L25,9 C26.1045,9 27,9.8955 27,11 L27,21.243 C27,21.429 26.8045,21.55 26.638,21.467 M25,7 L11,7 C8.7905,7 7,8.791 7,11 L7,25 C7,27.209 8.7905,29 11,29 L25,29 C27.209,29 29,27.209 29,25 L29,11 C29,8.791 27.209,7 25,7",fill:a})],id:"Group"}),fill:"none",fillRule:"evenodd"}),className:"_7oal",height:String(c)+"px",width:String(c)+"px",viewBox:"0 0 36 36"})}c=a;f.make=c}),null);
__d("MessengerPhotoIconSVGM4React.re",["MessengerPhotoIconSVGM4React.bs"],(function(a,b,c,d,e,f){(function(a){return null});a=b("MessengerPhotoIconSVGM4React.bs").make;f.make=a}),null);
__d("MessengerReactIconSVGM4React.bs",["React"],(function(a,b,c,d,e,f){"use strict";function a(a){var c;return(c=b("React")).jsx("svg",{children:c.jsxs("g",{children:[c.jsx("polygon",{points:"0 36 36 36 36 0 0 0"}),c.jsx("path",{d:"M14.4951,17.5 C13.5576,17.5 12.9951,16.75 12.9951,15.5 C12.9951,14.25 13.5576,13.5 14.4951,13.5 C15.4326,13.5 15.9951,14.25 15.9951,15.5 C15.9951,16.75 15.4326,17.5 14.4951,17.5 M21.4951,17.5 C20.5576,17.5 19.9951,16.75 19.9951,15.5 C19.9951,14.25 20.5576,13.5 21.4951,13.5 C22.4326,13.5 22.9951,14.25 22.9951,15.5 C22.9951,16.75 22.4326,17.5 21.4951,17.5 M18.0071,25.0055 C15.7176,25.0055 13.5461,23.9185 12.1981,22.0985 C11.8691,21.6545 11.9626,21.028 12.4061,20.6985 C12.8491,20.369 13.4756,20.4625 13.8041,20.9065 C14.7766,22.2195 16.3481,23.004 18.0071,23.004 C19.6666,23.004 21.2376,22.2195 22.2101,20.9065 C22.5386,20.4625 23.1656,20.3695 23.6086,20.698 C24.0516,21.0275 24.1451,21.6545 23.8166,22.0985 C22.4686,23.9185 20.2971,25.0055 18.0071,25.0055 M18.0001,8 C12.4771,8 8.0001,12.477 8.0001,18 C8.0001,23.523 12.4771,28 18.0001,28 C23.5231,28 28.0001,23.523 28.0001,18 C28.0001,12.477 23.5231,8 18.0001,8 M18.0001,30 C11.3726,30 6.0001,24.6275 6.0001,18 C6.0001,11.3725 11.3726,6 18.0001,6 C24.6276,6 30.0001,11.3725 30.0001,18 C30.0001,24.6275 24.6276,30 18.0001,30",fill:a})],fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"}),height:"22px",width:"22px",viewBox:"0 0 36 36"})}function c(a){var c;return(c=b("React")).jsx("svg",{children:c.jsxs("g",{children:[c.jsx("polygon",{points:"0,26 26,26 26,0 0,0 "}),c.jsx("path",{d:"m19.1311,16.73095c-0.4325,-0.3545 -1.0775,-0.302 -1.441,0.122c-1.171,1.3615 -2.883,2.142 -4.697,2.142c-1.8135,0 -3.526,-0.7805 -4.697,-2.142c-0.363,-0.4225 -1.008,-0.4765 -1.441,-0.122c-0.432,0.355 -0.488,0.986 -0.1245,1.408c1.5605,1.8145 3.8435,2.855 6.2625,2.855c2.4195,0 4.702,-1.0405 6.2625,-2.855c0.3635,-0.422 0.3075,-1.053 -0.1245,-1.408m-2.1355,-7.731c-0.9375,0 -1.5,0.75 -1.5,2c0,1.25 0.5625,2 1.5,2c0.9375,0 1.5,-0.75 1.5,-2c0,-1.25 -0.5625,-2 -1.5,-2m-8,0c-0.9375,0 -1.5,0.75 -1.5,2c0,1.25 0.5625,2 1.5,2c0.9375,0 1.5,-0.75 1.5,-2c0,-1.25 -0.5625,-2 -1.5,-2m4.0045,16c-6.6275,0 -12,-5.3725 -12,-12c0,-6.6275 5.3725,-12 12,-12c6.6275,0 12,5.3725 12,12c0,6.6275 -5.3725,12 -12,12",fill:a})],fill:"none",fillRule:"evenodd"}),height:"24px",width:"24px",viewBox:"0 0 26 26"})}f.make=a;f.makeSolid=c}),null);
__d("MessengerReactionsUtil.bs",["bs_js_dict","EmojiFormat.bs","MessengerReactionNames","WorkChatRedesignedMessageListCheck.bs"],(function(a,b,c,d,e,f){"use strict";__p&&__p();c=b("WorkChatRedesignedMessageListCheck.bs").enabled?[[b("MessengerReactionNames").THUMBSUP,[128077]],[b("MessengerReactionNames").LOVE,[128525]],[b("MessengerReactionNames").HAHA,[128518]],[b("MessengerReactionNames").WOW,[128558]],[b("MessengerReactionNames").SAD,[128546]],[b("MessengerReactionNames").ANGRY,[128544]]]:[[b("MessengerReactionNames").LOVE,[128525]],[b("MessengerReactionNames").HAHA,[128518]],[b("MessengerReactionNames").WOW,[128558]],[b("MessengerReactionNames").SAD,[128546]],[b("MessengerReactionNames").ANGRY,[128544]],[b("MessengerReactionNames").THUMBSUP,[128077]],[b("MessengerReactionNames").THUMBSDOWN,[128078]]];var g={};c.forEach(function(a,c){g[b("EmojiFormat.bs").codeArrayToUnicode(a[1])]=c+1|0;return 0});function a(a,c){a=b("bs_js_dict").get(g,a);c=b("bs_js_dict").get(g,c);if(a!==void 0)if(c!==void 0)return a-c|0;else return-1;else if(c!==void 0)return 1;else return 0}d=c.map(function(a){return b("EmojiFormat.bs").codeArrayToUnicode(a[1])});f.reactionsSortOrder=c;f.orderMap=g;f.sortFunction=a;f.defaultReactions=d}),null);
__d("MessengerReactionsUtil.re",["bs_curry","MessengerReactionsUtil.bs"],(function(a,b,c,d,e,f){a=b("MessengerReactionsUtil.bs").reactionsSortOrder.map(function(a){return{name:a[0],emojis:a[1]}});f.reactionsSortOrder=a;c=function(a,c){a=b("bs_curry")._2(b("MessengerReactionsUtil.bs").sortFunction,a,c);return a};f.sortFunction=c;d=b("MessengerReactionsUtil.bs").defaultReactions;f.defaultReactions=d}),null);
__d("MessengerRealtimeAttachmentTransformer.bs",["MessengerMessageTransformer.bs","MessengerAttachmentTransformer.bs"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a,c,d){__p&&__p();var e=b("MessengerMessageTransformer.bs").unsafeCastBlobAttachments(c),f=c.extensible_attachment,g;if(f==null)g=null;else{var h=f.story_attachment,i=f.genie_attachment,j;if(i==null)j=null;else{i=i.genie_message;var k;if(i==null)k=null;else{i=i.story_attachment;k={story_attachment:i==null?null:b("MessengerMessageTransformer.bs").unsafeCastExtensibleAttachment(i)}}j={genie_message:k}}g={legacy_attachment_id:f.legacy_attachment_id,story_attachment:h==null?null:b("MessengerMessageTransformer.bs").unsafeCastExtensibleAttachment(h),genie_attachment:j}}return b("MessengerAttachmentTransformer.bs").transformAttachment(a,{extensible_attachment:g,blob_attachments:e,sticker:c.sticker},null,d)}f.transform=a}),null);
__d("MessengerSharedPhotosVideosBaseData.bs",["bs_js_dict"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g={};function a(a){return b("bs_js_dict").get(g,a)}function h(a,b){g[a]=b;return 0}function c(a,c){__p&&__p();var d=b("bs_js_dict").get(g,a);if(d!==void 0){d=d;var e=d[1];if(e!==void 0){e=e;var f=e[0];if(f.length!==0){f=f.filter(function(a){return!c.some(function(b){return b===a.node.legacy_attachment_id})});d=d[0];f=[f,e[1],e[2],e[3]];e=[d,f];return h(a,e)}else return 0}else return 0}else return 0}f.data=g;f.get=a;f.set=h;f.localRemove=c}),null);
__d("MessengerSourceContext.bs",["React","MercuryTriodeSourceUtil"],(function(a,b,c,d,e,f){"use strict";a=b("MercuryTriodeSourceUtil").getMercuryTriodeSource();c=b("React").createContext(a);f.defaultContextValue=a;f.context=c}),null);
__d("MessengerSourceContext.re",["MessengerSourceContext.bs"],(function(a,b,c,d,e,f){a=b("MessengerSourceContext.bs").context;f.context=a}),null);
__d("MessengerSurfaceType.bs",[],(function(a,b,c,d,e,f){"use strict";a="MESSENGER";b="WORK_QUIKCHAT";f.messenger=a;f.workQuickchat=b}),null);
__d("MessengerSurfaceContext.bs",["React","MessengerSurfaceType.bs"],(function(a,b,c,d,e,f){"use strict";a=b("React").createContext(b("MessengerSurfaceType.bs").messenger);c=b("MessengerSurfaceType.bs").messenger;f.defaultValue=c;f.context=a}),null);
__d("MessengerSurfaceContext.re",["MessengerSurfaceContext.bs"],(function(a,b,c,d,e,f){a=b("MessengerSurfaceContext.bs").context;f.context=a}),null);
__d("MessengerSurfaceType.re",["MessengerSurfaceType.bs"],(function(a,b,c,d,e,f){a=b("MessengerSurfaceType.bs").messenger;f.messenger=a;c=b("MessengerSurfaceType.bs").workQuickchat;f.workQuickchat=c}),null);
__d("MessengerTextWithEmoticonsReact.bs",["ReasonReact.bs","bs_js_null_undefined","MessengerTextWithEmoticons.react"],(function(a,b,c,d,e,f){"use strict";function a(a,c,d,e,f){var g;return b("ReasonReact.bs").wrapJsForReason(b("MessengerTextWithEmoticons.react"),{renderEmoji:(g=b("bs_js_null_undefined")).fromOption(a),renderEmoticons:g.fromOption(c),text:g.fromOption(d),customSize:g.fromOption(e)},f)}f.make=a}),null);
__d("MessengerThreadsWebGraphQLQuery",["WebGraphQLQueryBase"],(function(a,b,c,d,e,f){"use strict";__p&&__p();e.exports=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}b.__getDocID=function(){return"2102001433236093"};b.getQueryID=function(){return"521094482074202"};return b}(b("WebGraphQLQueryBase"))}),null);
__d("MessengerThreadFetcher.bs",["Promise","bs_curry","gkx","FBIDCheck","bs_belt_Array","bs_caml_int32","LogHistory","MercuryIDs","bs_caml_option","MercuryDispatcher","MercuryThreadIDMap","MercuryPayloadSource","bs_caml_builtin_exceptions","setTimeoutAcrossTransitions","MessengerGraphQLThreadFetcher.bs"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=new Map();function h(a,c){__p&&__p();var d=c.other_user_fbid;if(d==null){c=c.thread_fbid;if(c==null)throw[b("bs_caml_builtin_exceptions").invalid_argument,"Encountered thread with no server identifier"];else c=[c,b("MercuryIDs").getThreadIDFromThreadFBID(c)]}else c=[d,b("MercuryIDs").getThreadIDFromUserID(d)];d=c[1];c=c[0];a=b("MercuryThreadIDMap").getForFBID(a);var e={},f=a.getClientIDFromServerIDNow(c);if(f==null){b("gkx")("1143875")&&b("LogHistory").getInstance("MessengerThreadFetcher").debug("setServerIDToClientID",d);a.setServerIDToClientID(c,d);e[c]=d;return[d,e]}else return[f,e]}function i(a,c,d){__p&&__p();var e=!b("FBIDCheck").isUser_deprecated(a);return b("MessengerGraphQLThreadFetcher.bs").fetchAll(a,[{id:c,limit:0,loadReadReceipts:!1,loadDeliveryReceipts:!1,timestamp:null,isCanonical:d}],e).then(function(c){__p&&__p();c=b("bs_belt_Array").get(c,0);if(c!==void 0){c=b("bs_caml_option").valFromOption(c).thread;if(c==null)return b("Promise").resolve(!1);else{var d=h(a,c);b("MercuryDispatcher").getForFBID(a).handleUpdate({threads:[Object.assign(c,{thread_id:d[0]})],pinned_thread_ids:[],newlyAddedClientIDs:d[1],actions:[],preprocessed:!0,payload_source:b("MercuryPayloadSource").SERVER_FETCH_THREAD_INFO});return b("Promise").resolve(!0)}}else return b("Promise").resolve(!1)})}function j(a,c,d){__p&&__p();return i(a,c,d).then(function(d){__p&&__p();var e=g.get(a);if(e==null)return b("Promise").resolve(!1);else{var f=e.get(c);if(f==null)return b("Promise").resolve(!1);else{b("bs_belt_Array").forEach(f[1],function(a){return b("bs_curry")._1(a,d)});e["delete"](c);return b("Promise").resolve(d)}}})["catch"](function(e){__p&&__p();var f=g.get(a);if(f==null)return b("Promise").resolve(!1);else{e=f.get(c);if(e==null)return b("Promise").resolve(!1);else{var h=e[1];e=e[0];if(e<5||b("gkx")("678666")){var k=b("bs_caml_int32").imul(Math.pow(2,Math.min(e,5)),1e3),l=new(b("Promise"))(function(e,g){__p&&__p();b("setTimeoutAcrossTransitions")(function(g){i(a,c,d).then(function(a){e(a);b("bs_belt_Array").forEach(h,function(c){return b("bs_curry")._1(c,a)});f["delete"](c);return b("Promise").resolve(a)})["catch"](function(b){return j(a,c,d)});return 0},k);return 0});f.set(c,[e+1|0,h]);return l}else{f["delete"](c);return b("Promise").resolve(!1)}}}})}function a(a,b,c,d){__p&&__p();var e=g.get(a);if(e==null){var f=new Map();f.set(b,[0,[d]]);g.set(a,f);j(a,b,c);return 0}else{f=e.get(b);if(f==null){e.set(b,[0,[d]]);j(a,b,c);return 0}else{f[1].push(d);return 0}}}f.$$fetch=a}),null);
__d("MessengerDeltaTransformer.bs",["Promise","FBID.bs","bs_block","bs_curry","gkx","bs_js_dict","bs_js_json","bs_caml_obj","FBIDCheck","bs_belt_Array","bs_caml_array","DateConsts","LogHistory","MercuryIDs","bs_belt_Option","bs_caml_option","MessagingTag","MessengerState.bs","MontageActions","bs_js_null_undefined","MercuryActionType","MercuryDispatcher","MSuggestionActions","MercuryThreadIDMap","PageCommItemStatus","MercuryPayloadSource","MercuryProfileRanges","MercuryLogMessageType","MercuryServerRequests","MercurySyncDeltaTypes","MessagingThreadAction","MessageThreadReadState","MessengerThreadFetcher.bs","bs_caml_builtin_exceptions","MercuryGlobalActionType","MessengerWebDeltaEvents","PagesMessagingEventType","MessengerGroupsSyncStatus","MessengerGroupsSyncStatus.bs","MessageUnsendabilityStatus.bs","MessengerApprovalModeTypes","IrisProtocolMessageLifetime","MessengerApprovalQueueTypes","MessengerGroupRequestSource","MercuryMessageCustomizations","MessageThreadReadStateEffect","MessengerParticipantsFetcher.bs","MessengerWebDeltasTypedLogger","ChatReliabilityInstrumentation","RepliedToMessageStatusForGraphQL","ClientSyncProtocol_GroupsSyncAction","MessengerRealtimeAttachmentTransformer.bs","MessengerWebDeltasTypedLoggerBootloader.bs","MessageLiveLocationClientSyncProtocolStopReason"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function g(a){try{return JSON.parse(a)}catch(a){return{}}}c=b("gkx")("780647");var h=c?0:1;function i(a,c){__p&&__p();var d=b("bs_belt_Option").map(b("bs_caml_option").nullable_to_opt(c.otherUserFbId),function(a){return a.toString()});c=b("bs_belt_Option").map(b("bs_caml_option").nullable_to_opt(c.threadFbId),function(a){return a.toString()});a=b("MercuryThreadIDMap").getForFBID(a);if(d!==void 0){d=d;d=[b("bs_caml_option").some(b("MercuryIDs").getThreadIDFromUserID(b("FBID.bs").ofStringExn(d))),d]}else if(c!==void 0){c=c;d=[b("bs_caml_option").some(b("MercuryIDs").getThreadIDFromThreadFBID(b("FBID.bs").ofStringExn(c))),c]}else d=[void 0,void 0];c=d[1];d=d[0];if(c!==void 0&&d!==void 0){c=c;var e=a.hasClientIDForServerID(c);if(e)return b("bs_caml_option").nullable_to_opt(a.getClientIDFromServerIDNow(c));else return b("bs_caml_option").valFromOption(d)}}function j(a,c){__p&&__p();var d=parseInt(c.messageMetadata.timestamp,10),e=b("MessageThreadReadStateEffect").extractThreadStateEffectFromDelta(a,c),f=c.messageMetadata.actorFbId.toString(),h=b("bs_caml_obj").caml_equal(e,b("MessageThreadReadState").MARK_UNREAD)&&a!==f,j=!b("FBIDCheck").isUser_deprecated(a),k=c.attachments;k=k==null?[]:b("bs_belt_Array").keepMapU(k,function(e){__p&&__p();var c=e.mercury;if(c==null){e=e.mercuryJSON;e=e==null?null:g(e)}else e=c;if(e==null)return;else{c=e.extensible_attachment;var d=e.blob_attachment;e=e.sticker_attachment;e=c==null?d==null?e==null?[]:b("MessengerRealtimeAttachmentTransformer.bs").transform(a,{extensible_attachment:null,blob_attachments:null,sticker:e},j):b("MessengerRealtimeAttachmentTransformer.bs").transform(a,{extensible_attachment:null,blob_attachments:[d],sticker:null},j):b("MessengerRealtimeAttachmentTransformer.bs").transform(a,{extensible_attachment:b("bs_js_null_undefined").fromOption(c==null?void 0:b("bs_caml_option").some(c)),blob_attachments:null,sticker:null},j);return b("bs_belt_Array").get(e,0)}});var l=c.messageMetadata.tags;l=l==null?void 0:b("bs_js_null_undefined").fromOption(b("bs_belt_Array").get(l,0));var m=c.data,n;if(m==null)n=null;else{var o=b("bs_js_dict").get(m,"adminSignatureCreatorID");n=o!==void 0?{creatorID:b("bs_js_null_undefined").fromOption(b("bs_js_dict").get(m,"adminSignatureCreatorID")),creatorName:b("bs_js_null_undefined").fromOption(b("bs_js_dict").get(m,"adminSignatureCreatorName")),creatorType:b("bs_js_null_undefined").fromOption(b("bs_js_dict").get(m,"adminSignatureCreatorType")),labelType:b("bs_js_null_undefined").fromOption(b("bs_js_dict").get(m,"adminSignatureLabelType")),pageID:b("bs_js_null_undefined").fromOption(b("bs_js_dict").get(m,"adminSignaturePageID")),profileURI:b("bs_js_null_undefined").fromOption(b("bs_js_dict").get(m,"adminSignatureProfileURI"))}:null}o=i(a,c.messageMetadata.threadKey);if(o!==void 0){m=c.ttl;var p=c.messageMetadata.threadKey.threadFbId,q=c.messageMetadata.threadKey.otherUserFbId,r=c.body,s=c.data;if(s==null){var t=c.untypedData;t=t==null?!1:b("bs_belt_Option").getWithDefault(b("bs_js_dict").get(t,"is_sponsored"),"false")==="true"}else t=b("bs_belt_Option").getWithDefault(b("bs_js_dict").get(s,"is_sponsored"),"false")==="true";s=c.data;var u=c.data,v;if(u==null)v=null;else{u=b("bs_js_dict").get(u,"customization");v=u!==void 0?b("MercuryMessageCustomizations").parseCustomizations(u):null}u=c.data;var w=c.data,x=c.data,y;if(x==null)y=null;else{x=b("bs_js_dict").get(x,"mib_direct_message_data");y=x!==void 0?g(x):null}x=c.data;var z;if(x==null)z=null;else{x=b("bs_js_dict").get(x,"message_source_data");if(x!==void 0){x=g(x);x=b("bs_js_json").classify(x);if(typeof x==="number"||x.tag!==2)z=null;else{x=b("bs_js_dict").get(x[0],"message_source");z=x!==void 0?b("bs_js_null_undefined").fromOption(x):null}}else z=null}x=c.messageMetadata.skipBumpThread;var A=c.data,B;if(A==null)B=null;else{A=b("bs_js_dict").get(A,"montage_reply_data");B=A!==void 0?g(A):null}A=c.data;var C;if(A==null)C=null;else{A=b("bs_js_dict").get(A,"meta_ranges");C=A!==void 0?g(A):null}return{message_id:c.messageMetadata.messageId,threading_id:null,offline_threading_id:c.messageMetadata.offlineThreadingId,author:b("MercuryIDs").getParticipantIDFromUserID(b("FBID.bs").ofStringExn(f)),author_email:f+"@facebook.com",ephemeral_ttl_mode:m==null?0:b("bs_belt_Option").getWithDefault(b("bs_js_dict").get(b("IrisProtocolMessageLifetime"),m),0),timestamp:d,is_unread:h,is_filtered_content:!1,is_filtered_content_bh:!1,is_filtered_content_account:!1,is_filtered_content_quasar:!1,is_filtered_content_invalid_app:!1,is_one_way_sent:b("bs_belt_Option").getWithDefault(b("bs_caml_option").nullable_to_opt(c.messageMetadata.tags),[]).some(function(a){return a===b("MessagingTag").ONE_WAY_MESSAGE}),is_forwarded:b("bs_belt_Option").getWithDefault(b("bs_caml_option").nullable_to_opt(c.messageMetadata.tags),[]).some(function(a){if(a===b("MessagingTag").ACTION_COPIED_MESSAGE||a===b("MessagingTag").ACTION_COPIED_SELF_MESSAGE||a===b("MessagingTag").ACTION_COPIED_ATTACHMENT)return!0;else return a===b("MessagingTag").ACTION_COPIED_SELF_ATTACHMENT}),source:l,tags:c.messageMetadata.tags,is_spoof_warning:!1,folder:null,thread_fbid:p==null?null:p.toString(),other_user_fbid:q==null?null:q.toString(),body:r==null?"":r,html_body:null,subject:null,has_attachment:k.length!==0,attachments:k,ranges:void 0,thread_id:o,action_type:b("MercuryActionType").USER_GENERATED_MESSAGE,is_from_iris:!0,is_sponsored:t,commerce_message_type:s==null?null:b("bs_js_null_undefined").fromOption(b("bs_js_dict").get(s,"commerce_message_type")),customizations:v,platform_xmd:u==null?null:b("bs_js_null_undefined").fromOption(b("bs_js_dict").get(u,"platform_xmd")),profile_ranges:b("MercuryProfileRanges").extractFromDelta(c),verse_group_role_xmd:w==null?null:b("bs_js_null_undefined").fromOption(b("bs_js_dict").get(w,"verse_group_role_id")),mib_direct_message_data:y,message_source:z,skip_bump_thread:x==null?!1:x,thread_read_state_effect:e,montage_reply_data:B,meta_ranges:C,creator_info:n,message_unsendability_status:b("MessageUnsendabilityStatus.bs").fromNullableString(c.messageMetadata.unsendType),comm_status:j?b("PageCommItemStatus").TODO:null}}else throw[b("bs_caml_builtin_exceptions").invalid_argument,"invalid thread id"]}function k(a,c){b("LogHistory").getInstance("MessengerDeltaTransformer").debug(a,c);return 0}function l(a,c,d,e){return b("bs_curry")._1(b("MessengerWebDeltasTypedLoggerBootloader.bs").LoadableMessengerWebDeltasTypedLogger.load,function(f){f=new(b("MessengerWebDeltasTypedLogger"))();f=f.setDeltaEvent(a).setDeltaType(c).setIgnoreReason(d).setSyncSeqID(e);f.log();return 0})}function m(a){return l(b("MessengerWebDeltaEvents").DELTA_RECEIVED,a,null,null)}function n(a,c){l(b("MessengerWebDeltaEvents").DELTA_IGNORED,a,c,null);return k("DeltaIgnored",a)}function o(a,c,d,e,f){return b("MessengerThreadFetcher.bs").$$fetch(a,c,d,function(c){if(c){b("MercuryDispatcher").getForFBID(a).handleUpdate({actions:[e],pinned_thread_ids:[],newlyAddedClientIDs:{},preprocessed:!0,payload_source:b("MercuryPayloadSource").CLIENT_CHANNEL_MESSAGE});return m(f)}else return n(f,"thread fetch failed")})}function p(a,c,d,e){__p&&__p();var f=c.other_user_fbid;if(f==null){var g=c.thread_fbid;if(g==null)throw[b("bs_caml_builtin_exceptions").invalid_argument,"invalid thread id"];else g=[g,!1]}else g=[f,!0];f=g[1];g=g[0];var h=b("MercuryThreadIDMap").getForFBID(a);h=h.getClientIDFromServerIDNow(g);var i=h==null?null:b("MessengerState.bs").getThreadMetaNow(a,h),j=b("gkx")("1143875");if(h==null)if(e)return o(a,g,f,c,d);else return n(d,"thread not already loaded, not required to be loaded");else if(i==null)if(e){if(j){o(a,g,f,c,d);k("ThreadMetaMissing",g);b("ChatReliabilityInstrumentation").logTHREAD_INFO_MISSING(b("LogHistory").formatEntries(b("LogHistory").getEntries()));return 0}else if(j)return n(d,"thread not already loaded, not required to be loaded")}else if(j)return n(d,"thread not already loaded, not required to be loaded");b("MercuryDispatcher").getForFBID(a).handleUpdate({actions:[c],pinned_thread_ids:[],newlyAddedClientIDs:{},preprocessed:!0,payload_source:b("MercuryPayloadSource").CLIENT_CHANNEL_MESSAGE});return m(d)}function q(a,c){__p&&__p();var d=c.threadKey.threadFbId,e=d==null?void 0:b("bs_caml_option").some(d);if(d==null){d=c.threadKey.otherUserFbId;var f=d==null?void 0:b("bs_caml_option").some(d);d=d==null?[void 0,void 0]:[f,{otherUserFbId:b("bs_js_null_undefined").fromOption(f),threadFbId:null}]}else d=[e,{otherUserFbId:null,threadFbId:b("bs_js_null_undefined").fromOption(e)}];f=d[1];e=d[0];if(e!==void 0&&f!==void 0){d=i(a,b("bs_caml_option").valFromOption(f));if(d!==void 0)return{thread_id:d,action_type:b("MercuryActionType").REACTION_UPDATE,messageId:c.messageId,offlineThreadingId:c.offlineThreadingId,reaction:c.reaction,senderId:c.senderId.toString(),thread_fbid:e.toString(),other_user_fbid:null,userId:c.userId.toString()};else return}}function r(a){return a/Math.pow(10,8)}function s(a,c){__p&&__p();var d=c.threadKey.threadFbId,e=d==null?void 0:b("bs_caml_option").some(d),f=c.threadKey.otherUserFbId,g=f==null?void 0:b("bs_caml_option").some(f);d=d==null?f==null?[void 0,void 0]:[g,{otherUserFbId:null,threadFbId:b("bs_js_null_undefined").fromOption(g)}]:[e,{otherUserFbId:b("bs_js_null_undefined").fromOption(e),threadFbId:null}];f=d[1];g=d[0];if(g!==void 0&&f!==void 0){e=i(a,b("bs_caml_option").valFromOption(f));if(e!==void 0&&c.messageLiveLocations.length===1){d=b("bs_caml_array").caml_array_get(c.messageLiveLocations,0);a=d.expirationTime;f=d.stopReason;c=f==null?Date.now()/b("DateConsts").MS_PER_SEC>a:!0;f=d.coordinate;f=f==null?null:{latitude:r(f.latitude),longitude:r(f.longitude)};var h=d.destination;h=h==null?null:{latitude:r(h.latitude),longitude:r(h.longitude),label:h.label};var j=d.stopReason;j=j==null?null:j===b("MessageLiveLocationClientSyncProtocolStopReason").EXPIRED||j===b("MessageLiveLocationClientSyncProtocolStopReason").CANCELED?"EXPIRED":j===b("MessageLiveLocationClientSyncProtocolStopReason").ARRIVED?"ARRIVED":null;return{thread_id:e,action_type:b("MercuryActionType").LIVE_LOCATION_UPDATE,thread_fbid:g.toString(),other_user_fbid:null,messageId:d.messageId,liveLocation:{live_location_id:d.id.toString(),is_expired:c,expiration_time:a,sender:{id:d.senderId.toString()},coordinate:f,location_title:d.locationTitle,sender_destination:h,stop_reason:j}}}else return}}function t(a,c){var d=c.threadKey.threadFbId;if(d==null)return;else{a=i(a,{otherUserFbId:null,threadFbId:d});if(a!==void 0)return{action_type:b("MercuryActionType").EVENT_RSVP_CHANGED,actor_fbid:c.actorFbId.toString(),rsvp_status:c.rsvpStatus,thread_fbid:d.toString(),other_user_fbid:null,thread_id:a};else return}}function u(a,c){__p&&__p();var d=c.threadKey.otherUserFbId;if(d==null)return;else{a=i(a,{otherUserFbId:d,threadFbId:null});if(a!==void 0){c=c.isFollowUp;return{action_type:b("MercuryActionType").UPDATE_COMM_STATUS,comm_status:c?b("PageCommItemStatus").FOLLOW_UP:b("PageCommItemStatus").TODO,thread_fbid:d.toString(),other_user_fbid:null,thread_id:a}}else return}}function v(a,c){__p&&__p();var d=[];c.forEach(function(a){a=b("MercuryIDs").getUserIDFromParticipantID(a);if(a==null)return 0;else{d.push(a);return 0}});return b("MessengerParticipantsFetcher.bs").$$fetch({ids:d}).then(function(c){__p&&__p();var d=[],e=[];c.forEach(function(a){var b=a.id;if(a.is_messenger_blocked||a.is_facebook_blocked){d.push(b);return 0}else{e.push(b);return 0}});b("MercuryDispatcher").getForFBID(a).handleUpdate({from_client:!0,message_blocked_ids:d,message_unblocked_ids:e});return b("Promise").resolve(0)})["catch"](function(a){return b("Promise").resolve(0)})}function w(a,c){__p&&__p();var d=c.actorFbid.toString(),e=b("FBID.bs").ofStringExn(d);if(b("bs_caml_obj").caml_notequal(e,a))e=b("bs_caml_option").some(b("MercuryIDs").getParticipantIDFromUserID(a));else{var f=c.threadKey.otherUserFbId;if(f==null)e=void 0;else{f=b("FBID.bs").ofString(f.toString());e=f!==void 0?b("bs_caml_option").some(b("MercuryIDs").getParticipantIDFromUserID(b("bs_caml_option").valFromOption(f))):void 0}}if(e!==void 0){f=b("bs_caml_option").valFromOption(e);e=c.threadKey.otherUserFbId;if(e==null)return;else{v(a,[f]);a=i(a,{otherUserFbId:e,threadFbId:null});if(a!==void 0)return{action_type:b("MercuryActionType").BLOCK_STATUS_CHANGED,actorFbid:d,canViewerReply:c.canViewerReply,reason:c.reason,message_blocked_ids:[f],other_user_fbid:e.toString(),thread_fbid:null,thread_id:a};else return}}}function x(a,c){__p&&__p();var d=c.threadKey.threadFbId;if(d==null){var e=c.threadKey.otherUserFbId;e=e==null?[void 0,void 0]:[e.toString(),{otherUserFbId:e,threadFbId:null}]}else e=[d.toString(),{otherUserFbId:null,threadFbId:d}];d=e[1];e=e[0];if(e!==void 0&&d!==void 0){a=i(a,b("bs_caml_option").valFromOption(d));if(a!==void 0)return{action_type:b("MercuryActionType").MONTAGE_DIRECT_EXPIRE,messageId:c.messageId,timestamp:c.timestamp,thread_fbid:e,other_user_fbid:null,keep_expiry_timestamp:c.keepExpiryTimestamp,thread_id:a};else return}}function y(a,c){__p&&__p();var d=j(a,c.message),e=c.repliedToMessage;if(e==null)return b("bs_caml_option").some(d);else{a=j(a,e);e=c.status;var f;if(e==null)f=void 0;else switch(e){case 0:f=b("bs_caml_option").some(b("RepliedToMessageStatusForGraphQL").VALID);break;case 1:f=b("bs_caml_option").some(b("RepliedToMessageStatusForGraphQL").DELETED);break;case 2:f=b("bs_caml_option").some(b("RepliedToMessageStatusForGraphQL").TEMPORARILY_UNAVAILABLE);break;default:f=void 0}if(f!==void 0)return b("bs_caml_option").some(Object.assign(d,{replied_to_message:{status:b("bs_caml_option").valFromOption(f),message:a}}));else return}}function z(a,c){__p&&__p();var d=c.threadKey.threadFbId,e=d==null?void 0:b("bs_caml_option").some(d);if(d==null){d=c.threadKey.otherUserFbId;var f=d==null?void 0:b("bs_caml_option").some(d);d=d==null?[void 0,void 0]:[f,{otherUserFbId:b("bs_js_null_undefined").fromOption(f),threadFbId:null}]}else d=[e,{otherUserFbId:null,threadFbId:b("bs_js_null_undefined").fromOption(e)}];f=d[1];e=d[0];if(e!==void 0&&f!==void 0){d=i(a,b("bs_caml_option").valFromOption(f));if(d!==void 0)return{action_type:b("MercuryActionType").GROUPS_SYNC_STATUS_CHANGED,thread_fbid:e.toString(),other_user_fbid:null,actor_fbid:c.actorFbid.toString(),groups_sync_status_string:b("MessengerGroupsSyncStatus.bs").fromNullableString(c.groupsSyncStatus),thread_id:d};else return}}function A(a,c){__p&&__p();var d=c.threadKey.threadFbId,e=d==null?void 0:b("bs_caml_option").some(d);if(d==null){d=c.threadKey.otherUserFbId;var f=d==null?void 0:b("bs_caml_option").some(d);d=d==null?[void 0,void 0]:[f,{otherUserFbId:b("bs_js_null_undefined").fromOption(f),threadFbId:null}]}else d=[e,{otherUserFbId:null,threadFbId:b("bs_js_null_undefined").fromOption(e)}];f=d[1];e=d[0];d=c.syncAction===b("ClientSyncProtocol_GroupsSyncAction").OPT_IN?b("bs_caml_option").some(b("MessengerGroupsSyncStatus").OPT_IN):c.syncAction===b("ClientSyncProtocol_GroupsSyncAction").OPT_OUT?b("bs_caml_option").some(b("MessengerGroupsSyncStatus").OPT_OUT):void 0;if(e!==void 0&&d!==void 0&&f!==void 0){a=i(a,b("bs_caml_option").valFromOption(f));if(a!==void 0){f=c.syncedFbGroupId;return{action_type:b("MercuryActionType").GROUPS_SYNC_METADATA_UPDATE,thread_fbid:e.toString(),other_user_fbid:null,actor_fbid:c.actorFbid.toString(),groups_sync_action:b("bs_caml_option").valFromOption(d),source_surface:c.sourceSurface,fb_group_id:f==null?null:f.toString(),thread_id:a}}else return}}function B(a,c){var d=c.threadKey.threadFbId;if(d==null)return;else{a=i(a,{otherUserFbId:null,threadFbId:d});if(a!==void 0)return{action_type:b("MercuryActionType").DESCRIPTION_CHANGED,thread_fbid:d.toString(),other_user_fbid:null,group_thread_description_string:c.threadDescription,thread_id:a};else return}}function C(a){return"#"+a.slice(2)}function D(a,c){__p&&__p();var d=c.threadKey.threadFbId,e=d==null?void 0:b("bs_caml_option").some(d);if(d==null){d=c.threadKey.otherUserFbId;var f=d==null?void 0:b("bs_caml_option").some(d);d=d==null?[void 0,void 0]:[f,{otherUserFbId:b("bs_js_null_undefined").fromOption(f),threadFbId:null}]}else d=[e,{otherUserFbId:null,threadFbId:b("bs_js_null_undefined").fromOption(e)}];f=d[1];e=d[0];if(e!==void 0&&f!==void 0){d=e;e=i(a,b("bs_caml_option").valFromOption(f));if(e!==void 0){a=e;f=c.fallbackColor!==""?C(c.fallbackColor):"";e=c.gradientColors;if(!(e==null)&&e.length!==0){e=b("bs_belt_Array").map(e,C);return{action_type:b("MercuryActionType").UPDATE_THREAD_THEME,thread_fbid:d.toString(),other_user_fbid:null,theme_id:c.themeId,solid_color:f,header_color:b("bs_caml_array").caml_array_get(e,0),footer_color:b("bs_caml_array").caml_array_get(e,e.length-1|0),gradient_colors:e,thread_id:a}}return{action_type:b("MercuryActionType").UPDATE_THREAD_THEME,thread_fbid:d.toString(),other_user_fbid:null,theme_id:c.themeId,solid_color:f,header_color:f,footer_color:f,gradient_colors:[],thread_id:a}}else return}}function E(a,c){__p&&__p();var d=c.threadKey.threadFbId;if(d==null){var e=c.threadKey.otherUserFbId;e=e==null?[void 0,void 0]:[e.toString(),{otherUserFbId:e,threadFbId:null}]}else e=[d.toString(),{otherUserFbId:null,threadFbId:d}];d=e[1];e=e[0];if(e!==void 0&&d!==void 0){a=i(a,b("bs_caml_option").valFromOption(d));if(a!==void 0)return{action_type:b("MercuryActionType").CHANGE_PINNED_STATUS,thread_fbid:e,other_user_fbid:null,is_pinned:c.isPinned,thread_id:a,thread_pin_timestamp:c.timestamp};else return}}function F(a,c){__p&&__p();var d=c.threadKey.threadFbId,e=c.threadKey.otherUserFbId;e=d==null?e==null?[void 0,void 0]:[e.toString(),{otherUserFbId:e,threadFbId:null}]:[d.toString(),{otherUserFbId:null,threadFbId:d}];d=e[1];e=e[0];if(e!==void 0&&d!==void 0){a=i(a,b("bs_caml_option").valFromOption(d));if(a!==void 0){d=c.isSaved;var f=c.isSaved;return{action_type:b("MercuryActionType").MUTATE_TAGS,thread_fbid:e,other_user_fbid:null,thread_id:a,messageId:c.messageId,tags_to_add:d?["message:save"]:[],tags_to_delete:f?[]:["message:save"]}}else return}}function G(a,c){var d=c.threadKey.threadFbId;if(d==null)return;else{a=i(a,{otherUserFbId:null,threadFbId:d});if(a!==void 0)return{action_type:b("MercuryActionType").UPDATE_JOINABLE_LINK,joinable_link:c.privateGroupLink,thread_fbid:d.toString(),other_user_fbid:null,thread_id:a};else return}}function H(a){__p&&__p();a=a.directives;if(a==null)return;else{a=b("bs_belt_Array").get(a,0);if(a!==void 0){a=b("bs_caml_option").valFromOption(a).data;if(a==null)return;else{a=a.add_actions;if(a==null)return;else{var c=a.actions;if(c==null)return;else{c=b("bs_belt_Array").get(c,0);if(c!==void 0){c=b("bs_caml_option").valFromOption(c).thread_key;if(c==null)return;else{var d=c.thread_fbid;c=c.other_user_fbid;if(d==null)if(c==null)return;else c=c;else c=d;return{action_type:b("MercuryActionType").CREATE_OMNI_M_SUGGESTIONS,thread_fbid:b("MercuryIDs").getThreadIDFromThreadFBID(b("FBID.bs").ofStringExn(c)),other_user_fbid:null,thread_id:c,suggestions:a}}}else return}}}}else return}}function I(a,c){var d=c.threadKey.threadFbId;if(d==null)return;else{a=i(a,{otherUserFbId:null,threadFbId:d});if(a!==void 0)return{action_type:b("MercuryActionType").PROMOTE_GROUP_ADMINS,thread_fbid:d.toString(),other_user_fbid:null,promoted_admins:b("bs_belt_Array").map(c.promotedAdmins,function(a){return{admin_fbid:a.adminFbId.toString(),admin_type:a.adminType}}),thread_id:a};else return}}function J(a,c){__p&&__p();var d=c.threadKey.threadFbId,e=c.threadKey.otherUserFbId;if(d==null)if(e==null)return;else{var f=i(a,{otherUserFbId:e,threadFbId:null});if(f!==void 0)return{action_type:b("MercuryActionType").REMOVE_MESSAGE,thread_fbid:null,messageId:c.messageID,other_user_fbid:e.toString(),removed_timestamp:c.deletionTimestamp,thread_id:f,author:b("MercuryIDs").getParticipantIDFromUserID(c.senderID)};else return}else{e=i(a,{otherUserFbId:null,threadFbId:d});if(e!==void 0)return{action_type:b("MercuryActionType").REMOVE_MESSAGE,thread_fbid:d.toString(),messageId:c.messageID,other_user_fbid:null,removed_timestamp:c.deletionTimestamp,thread_id:e,author:b("MercuryIDs").getParticipantIDFromUserID(c.senderID)};else return}}function K(a,c){var d=c.threadKey.otherUserFbId;if(d==null)return;else{a=i(a,{otherUserFbId:d,threadFbId:null});if(a!==void 0)return{action_type:b("MercuryActionType").UNSUBSCRIBE_STATUS_UPDATE,page_unsubscribe_status:c.unSubscribeStatus,thread_fbid:d.toString(),other_user_fbid:null,thread_id:a};else return}}function L(a,c){var d=c.threadKey.otherUserFbId;if(d==null)return;else{a=i(a,{otherUserFbId:d,threadFbId:null});if(a!==void 0)return{action_type:b("MercuryActionType").BLURRED_IMAGE_STATUS,blurred_image_uri:c.blurredImageUri,image_message_id:c.messageId,image_id:c.imageId,should_show:c.shouldShow,thread_fbid:d.toString(),other_user_fbid:null,thread_id:a};else return}}function M(a,c){var d=c.threadKey.otherUserFbId;if(d==null)return;else{a=i(a,{otherUserFbId:d,threadFbId:null});if(a!==void 0)return{action_type:b("MercuryActionType").IS_PIN_PROTECTED,thread_fbid:d.toString(),other_user_fbid:null,is_pin_protected:c.isPinProtected,thread_id:a};else return}}function N(a,c){var d=c.threadKey.otherUserFbId;if(d==null)return;else{a=i(a,{otherUserFbId:d,threadFbId:null});if(a!==void 0)return{action_type:b("MercuryActionType").UPDATE_CONNECTIVITY_STATUS,other_user_fbid:d.toString(),subtitle_type:c.subtitleType,thread_connectivity_status:c.threadConnectivityStatus,thread_fbid:d.toString(),thread_id:a};else return}}var O=function(a){return String.fromCharCode.apply(null,a)};function P(a,c){__p&&__p();c=JSON.parse(O(c.payload));c=b("bs_js_json").classify(c);if(typeof c==="number"||c.tag!==2)return b("bs_block").__(1,["DeltaClientDelta","malformed payload"]);else{c=b("bs_js_dict").get(c[0],"deltas");if(c!==void 0){c=b("bs_js_json").classify(b("bs_caml_option").valFromOption(c));if(typeof c==="number"||c.tag!==3)return b("bs_block").__(1,["DeltaClientDelta","delta is not an array"]);else{c=b("bs_belt_Array").get(c[0],0);if(c!==void 0){c=b("bs_js_json").classify(b("bs_caml_option").valFromOption(c));if(typeof c==="number"||c.tag!==2)return b("bs_block").__(1,["DeltaClientDelta","client delta is not an object"]);else{c=c[0];var d=!1,e=0,f=b("bs_js_dict").get(c,"deltaMessageReaction");if(f!==void 0){d=!0;f=q(a,b("bs_caml_option").valFromOption(f));f!==void 0?p(a,b("bs_caml_option").valFromOption(f),"DeltaClientDelta.deltaMessageReaction",h):e=b("bs_block").__(1,["DeltaClientDelta.deltaMessageReaction","transform failed"])}f=b("bs_js_dict").get(c,"liveLocationData");if(f!==void 0&&!d){d=!0;f=s(a,b("bs_caml_option").valFromOption(f));f!==void 0?p(a,b("bs_caml_option").valFromOption(f),"DeltaClientDelta.liveLocationData",h):e=b("bs_block").__(1,["DeltaClientDelta.liveLocationData","transform failed"])}f=b("bs_js_dict").get(c,"deltaUpdateGroupEventRSVPStatus");if(f!==void 0&&!d){d=!0;f=t(a,b("bs_caml_option").valFromOption(f));f!==void 0?p(a,b("bs_caml_option").valFromOption(f),"DeltaClientDelta.deltaUpdateGroupEventRSVPStatus",h):e=b("bs_block").__(1,["DeltaClientDelta.deltaUpdateGroupEventRSVPStatus","transform failed"])}f=b("bs_js_dict").get(c,"deltaPageThreadFollowUpData");if(f!==void 0&&!d){d=!0;f=u(a,b("bs_caml_option").valFromOption(f));f!==void 0?p(a,b("bs_caml_option").valFromOption(f),"DeltaClientDelta.deltaPageThreadFollowUpData",h):e=b("bs_block").__(1,["DeltaClientDelta.deltaPageThreadFollowUpData","transform failed"])}f=b("bs_js_dict").get(c,"deltaChangeViewerStatus");if(f!==void 0&&!d){d=!0;f=w(a,b("bs_caml_option").valFromOption(f));f!==void 0?p(a,b("bs_caml_option").valFromOption(f),"DeltaClientDelta.deltaChangeViewerStatus",h):e=b("bs_block").__(1,["DeltaClientDelta.deltaChangeViewerStatus","transform failed"])}f=b("bs_js_dict").get(c,"deltaMontageDirectExpire");if(f!==void 0&&!d){d=!0;f=x(a,b("bs_caml_option").valFromOption(f));f!==void 0?p(a,b("bs_caml_option").valFromOption(f),"DeltaClientDelta.deltaMontageDirectExpire",h):e=b("bs_block").__(1,["DeltaClientDelta.deltaMontageDirectExpire","transform failed"])}f=b("bs_js_dict").get(c,"deltaMessageReply");if(f!==void 0&&!d){d=!0;f=y(a,b("bs_caml_option").valFromOption(f));f!==void 0?p(a,b("bs_caml_option").valFromOption(f),"DeltaClientDelta.deltaMessageReply",h):e=b("bs_block").__(1,["DeltaClientDelta.deltaMessageReply","transform failed"])}f=b("bs_js_dict").get(c,"deltaUpdateGroupsSyncStatus");if(f!==void 0&&!d){d=!0;f=z(a,b("bs_caml_option").valFromOption(f));f!==void 0?p(a,b("bs_caml_option").valFromOption(f),"DeltaClientDelta.deltaUpdateGroupsSyncStatus",h):e=b("bs_block").__(1,["DeltaClientDelta.deltaUpdateGroupsSyncStatus","transform failed"])}f=b("bs_js_dict").get(c,"deltaUpdateGroupsSyncMetadata");if(f!==void 0&&!d){d=!0;f=A(a,b("bs_caml_option").valFromOption(f));f!==void 0?p(a,b("bs_caml_option").valFromOption(f),"DeltaClientDelta.deltaUpdateGroupsSyncMetadata",h):e=b("bs_block").__(1,["DeltaClientDelta.deltaUpdateGroupsSyncMetadata","transform failed"])}f=b("bs_js_dict").get(c,"deltaGroupThreadDescription");if(f!==void 0&&!d){d=!0;f=B(a,b("bs_caml_option").valFromOption(f));f!==void 0?p(a,b("bs_caml_option").valFromOption(f),"DeltaClientDelta.deltaGroupThreadDescription",h):e=b("bs_block").__(1,["DeltaClientDelta.deltaGroupThreadDescription","transform failed"])}f=b("bs_js_dict").get(c,"deltaUpdateThreadTheme");if(f!==void 0&&!d){d=!0;f=D(a,b("bs_caml_option").valFromOption(f));f!==void 0?p(a,b("bs_caml_option").valFromOption(f),"DeltaClientDelta.deltaUpdateThreadTheme",h):e=b("bs_block").__(1,["DeltaClientDelta.deltaUpdateThreadTheme","transform failed"])}f=b("bs_js_dict").get(c,"deltaUpdateSavedMessage");if(f!==void 0&&!d){d=!0;f=F(a,b("bs_caml_option").valFromOption(f));f!==void 0?p(a,b("bs_caml_option").valFromOption(f),"DeltaClientDelta.deltaUpdateSavedMessage",h):e=b("bs_block").__(1,["DeltaClientDelta.deltaUpdateSavedMessage","transform failed"])}f=b("bs_js_dict").get(c,"deltaUpdatePinnedThread");if(f!==void 0&&!d){d=!0;f=E(a,b("bs_caml_option").valFromOption(f));f!==void 0?p(a,b("bs_caml_option").valFromOption(f),"DeltaClientDelta.deltaUpdatePinnedThread",h):e=b("bs_block").__(1,["DeltaClientDelta.deltaUpdatePinnedThread","transform failed"])}f=b("bs_js_dict").get(c,"deltaUpdatePrivateGroupJoinableLink");if(f!==void 0&&!d){d=!0;f=G(a,b("bs_caml_option").valFromOption(f));f!==void 0?p(a,b("bs_caml_option").valFromOption(f),"DeltaClientDelta.deltaUpdatePrivateGroupJoinableLink",h):e=b("bs_block").__(1,["DeltaClientDelta.deltaUpdatePrivateGroupJoinableLink","transform failed"])}f=b("bs_js_dict").get(c,"deltaOmniMDirectivesV2");if(f!==void 0&&!d){d=!0;f=H(b("bs_caml_option").valFromOption(f));if(f!==void 0){f=b("bs_caml_option").valFromOption(f);e=b("bs_block").__(0,["DeltaClientDelta.deltaOmniMDirectivesV2"]);b("MSuggestionActions").saveAllSuggestions(f.thread_id,f.suggestions)}else e=b("bs_block").__(1,["DeltaClientDelta.deltaOmniMDirectivesV2","transform failed"])}f=b("bs_js_dict").get(c,"deltaPromoteGroupThreadAdmin");if(f!==void 0&&!d){d=!0;f=I(a,b("bs_caml_option").valFromOption(f));f!==void 0?p(a,b("bs_caml_option").valFromOption(f),"DeltaClientDelta.deltaPromoteGroupThreadAdmin",h):e=b("bs_block").__(1,["DeltaClientDelta.deltaPromoteGroupThreadAdmin","transform failed"])}f=b("bs_js_dict").get(c,"deltaRecallMessageData");if(f!==void 0&&!d){d=!0;f=J(a,b("bs_caml_option").valFromOption(f));f!==void 0?p(a,b("bs_caml_option").valFromOption(f),"DeltaClientDelta.deltaRecallMessageData",h):e=b("bs_block").__(1,["DeltaClientDelta.deltaRecallMessageData","transform failed"])}f=b("bs_js_dict").get(c,"deltaPageUnSubscribeStatus");if(f!==void 0&&!d){d=!0;f=K(a,b("bs_caml_option").valFromOption(f));f!==void 0?p(a,b("bs_caml_option").valFromOption(f),"DeltaClientDelta.deltaPageUnSubscribeStatus",h):e=b("bs_block").__(1,["DeltaClientDelta.deltaPageUnSubscribeStatus","transform failed"])}f=b("bs_js_dict").get(c,"deltaPageBlurredImageStatus");if(f!==void 0&&!d){d=!0;f=L(a,b("bs_caml_option").valFromOption(f));f!==void 0?p(a,b("bs_caml_option").valFromOption(f),"DeltaClientDelta.deltaPageBlurredImageStatus",h):e=b("bs_block").__(1,["DeltaClientDelta.deltaPageBlurredImageStatus","transform failed"])}f=b("bs_js_dict").get(c,"deltaPaymentPinProtectionStatusData");if(f!==void 0){if(!d){d=!0;f=M(a,b("bs_caml_option").valFromOption(f));f!==void 0?p(a,b("bs_caml_option").valFromOption(f),"DeltaClientDelta.deltaPaymentPinProtectionStatusData",h):e=b("bs_block").__(1,["DeltaClientDelta.deltaPaymentPinProtectionStatusData","transform failed"])}}else d||(e=b("bs_block").__(1,["DeltaClientDelta","unknown delta type: "+Object.keys(c).join(",")]));f=b("bs_js_dict").get(c,"deltaThreadConnectivityStatusUpdate");if(f!==void 0){if(!d){d=!0;f=N(a,b("bs_caml_option").valFromOption(f));f!==void 0?p(a,b("bs_caml_option").valFromOption(f),"DeltaClientDelta.deltaThreadConnectivityStatusUpdateData",h):e=b("bs_block").__(1,["DeltaClientDelta.deltaThreadConnectivityStatusUpdateData","transform failed"])}}else d||(e=b("bs_block").__(1,["DeltaClientDelta","unknown delta type: "+Object.keys(c).join(",")]));return e}}else return b("bs_block").__(1,["DeltaClientDelta","client delta is missing"])}}else return b("bs_block").__(1,["DeltaClientDelta","client delta has no deltas"])}}function Q(a,c){__p&&__p();var d=[],e=[],f=c.folders,g=0;f==null||f.length===0?g=1:b("bs_belt_Array").forEachU(f,function(a){d.push({action_type:b("MercuryGlobalActionType").MARK_ALL_READ,action_id:null,folder:b("bs_js_dict").get(b("MessagingTag").IRIS_MAPPING,a),timestamp:parseInt(c.watermarkTimestamp,10)});return 0});g===1&&b("bs_belt_Array").forEachU(c.threadKeys,function(f){var d=i(a,f);if(d!==void 0){var g=parseInt(c.watermarkTimestamp,10);b("MercuryServerRequests").getForFBID(a).updateLastActionTimestamp(g);e.push({thread_id:d,action_type:b("MercuryActionType").CHANGE_READ_STATUS,other_user_fbid:f.otherUserFbId,thread_fbid:f.threadFbId,mark_as_read:!0,timestamp:g,folder:b("MessagingTag").INBOX});return 0}else return 0});return[d,e]}function R(a){if(a==null)return null;else return a.toString()}function S(a){a=a.skipBumpThread;if(!(a==null)&&a)return h;else return 1}function T(a,c){__p&&__p();var d;switch(c.tag|0){case 0:var e=c[0],f=j(a,e);p(a,f,"deltaNewMessage",S(e.messageMetadata));d=0;break;case 1:f=c[0];p(a,Object.assign(j(a,f.newMessage),{action_type:b("MercuryActionType").REPLACE_MESSAGE,replaced_message_id:f.replacedMessageId}),"deltaReplaceMessage",h);d=0;break;case 2:e=c[0];f=e.threadKey.otherUserFbId;var g;if(f==null){var k=e.threadKey.threadFbId;if(k==null)g=void 0;else{var l=b("MercuryThreadIDMap").getForFBID(a);l=l.getClientIDFromServerIDNow(k.toString());g=l==null?void 0:b("bs_caml_option").some(l)}}else{k=b("FBID.bs").ofString(f.toString());g=k!==void 0?b("bs_caml_option").some(b("MercuryIDs").getThreadIDFromUserID(b("bs_caml_option").valFromOption(k))):void 0}if(g!==void 0){l={};l[b("bs_caml_option").valFromOption(g)]=parseInt(e.deliveredWatermarkTimestampMs,10);b("MercuryDispatcher").getForFBID(a).handleUpdate({delivery_receipts:l,pinned_thread_ids:[],newlyAddedClientIDs:{},actions:[],preprocessed:!0});d=b("bs_block").__(0,["DeltaDeliveryReceipt"])}else d=b("bs_block").__(1,["DeltaDeliveryReceipt","no thread id"]);break;case 3:f=Q(a,c[0]);k=f[1];g=f[0];g.length!==0&&b("MercuryDispatcher").getForFBID(a).handleUpdate({actions:[],global_actions:g,pinned_thread_ids:[],newlyAddedClientIDs:{},preprocessed:!0,payload_source:b("MercuryPayloadSource").CLIENT_CHANNEL_MESSAGE});k.length!==0&&b("MercuryDispatcher").getForFBID(a).handleUpdate({pinned_thread_ids:[],newlyAddedClientIDs:{},actions:k,preprocessed:!0,payload_source:b("MercuryPayloadSource").CLIENT_CHANNEL_MESSAGE});d=g.length===0&&k.length===0?b("bs_block").__(1,["DeltaMarkRead","no local or global action"]):b("bs_block").__(0,["DeltaMarkRead"]);break;case 4:var o=c[0];e=b("bs_belt_Array").keepMapU(o.threadKeys,function(c){var d=i(a,c);if(d!==void 0){var e=parseInt(o.watermarkTimestamp,10);b("MercuryServerRequests").getForFBID(a).updateLastActionTimestamp(e);return{thread_id:d,action_type:b("MercuryActionType").CHANGE_READ_STATUS,other_user_fbid:c.otherUserFbId,thread_fbid:c.threadFbId,mark_as_read:!1,timestamp:e,folder:b("MessagingTag").INBOX}}});b("MercuryDispatcher").getForFBID(a).handleUpdate({pinned_thread_ids:[],newlyAddedClientIDs:{},actions:e,preprocessed:!0,payload_source:b("MercuryPayloadSource").CLIENT_CHANNEL_MESSAGE});d=b("bs_block").__(0,["DeltaMarkUnread"]);break;case 5:l=c[0];p(a,Object.assign(j(a,l),{action_type:b("MercuryActionType").LOG_MESSAGE,log_message_body:l.messageMetadata.adminText,log_message_data:{removed_participants:[b("MercuryIDs").getParticipantIDFromUserID(l.leftParticipantFbId)]},log_message_type:b("MercuryLogMessageType").UNSUBSCRIBE}),"DeltaParticipantLeftGroupThread",S(l.messageMetadata));d=0;break;case 6:f=c[0];p(a,Object.assign(j(a,f),{action_type:b("MercuryActionType").LOG_MESSAGE,log_message_body:f.messageMetadata.adminText,log_message_data:{added_participants:b("bs_belt_Array").map(f.addedParticipants,function(a){return b("MercuryIDs").getParticipantIDFromUserID(a.userFbId)})},log_message_type:b("MercuryLogMessageType").SUBSCRIBE}),"DeltaParticipantsAddedToGroupThread",S(f.messageMetadata));d=0;break;case 7:g=c[0];p(a,Object.assign(j(a,g),{action_type:b("MercuryActionType").LOG_MESSAGE,log_message_body:g.messageMetadata.adminText,log_message_data:{name:g.name},log_message_type:b("MercuryLogMessageType").THREAD_NAME}),"DeltaThreadName",S(g.messageMetadata));d=0;break;case 8:k=c[0];e={watermark:parseInt(k.watermarkTimestampMs,10),action:parseInt(k.actionTimestampMs,10)};l=k.threadKey.otherUserFbId;f=l==null?b("bs_caml_option").nullable_to_opt(k.actorFbId):l.toString();g=k.threadKey.otherUserFbId;if(g==null){l=k.threadKey.threadFbId;k=l==null?void 0:l.toString()}else k=g.toString();if(f!==void 0)if(k!==void 0){l=k;g=b("MercuryThreadIDMap").getForFBID(a);k=g.getClientIDFromServerIDNow(l);if(k==null)d=b("bs_block").__(1,["DeltaReadReceipt","No clientID for serverID: "+l]);else{g={};l={};f=b("MercuryIDs").getParticipantIDFromUserID(b("FBID.bs").ofStringExn(f));l[f]=e;g[k]=l;b("MercuryDispatcher").getForFBID(a).handleUpdate({roger:g,pinned_thread_ids:[],newlyAddedClientIDs:{},actions:[],preprocessed:!0});d=b("bs_block").__(0,["DeltaReadReceipt"])}}else d=b("bs_block").__(1,["DeltaReadReceipt","serverID is invalid"]);else d=b("bs_block").__(1,["DeltaReadReceipt","userID is invalid"]);break;case 9:f=c[0];p(a,Object.assign(j(a,f),{action_type:b("MercuryActionType").LOG_MESSAGE,log_message_body:f.messageMetadata.adminText,log_message_data:{message_type:f.type,untypedData:f.untypedData},log_message_type:b("MercuryLogMessageType").GENERIC_ADMIN_TEXT,message_unsendability_status:b("MessageUnsendabilityStatus.bs").fromNullableString(f.messageMetadata.unsendType)}),"DeltaAdminTextMessage",S(f.messageMetadata));d=0;break;case 10:e=c[0];k=i(a,{otherUserFbId:e.threadKey.otherUserFbId,threadFbId:e.threadKey.threadFbId});l=k!==void 0?{action_type:b("MercuryActionType").DELETE_MESSAGES,message_ids:e.messageIds,other_user_fbid:R(e.threadKey.otherUserFbId),thread_fbid:R(e.threadKey.threadFbId),thread_id:k}:void 0;g=e.threadKey.threadFbId;f=e.folder;if(l!==void 0){k=b("bs_caml_option").valFromOption(l);g==null||f==null?(p(a,k,"DeltaMessageDelete",h),d=0):(f==="FOLDER_MONTAGE"?b("MontageActions").requestUpdate(g.toString()):p(a,k,"DeltaMessageDelete",h),d=0)}else d=b("bs_block").__(1,["DeltaMessageDelete","transform failed"]);break;case 11:e=c[0];l=i(a,{otherUserFbId:e.threadKey.otherUserFbId,threadFbId:e.threadKey.threadFbId});if(l!==void 0){f=e.action;p(a,{action_type:b("MercuryActionType").CHANGE_ARCHIVED_STATUS,thread_fbid:R(e.threadKey.threadFbId),other_user_fbid:R(e.threadKey.otherUserFbId),archived:f==null?!1:f===b("MessagingThreadAction").ACTION_ARCHIVED,thread_id:l},"DeltaThreadAction",h);d=0}else d=b("bs_block").__(1,["DeltaThreadAction","transform failed"]);break;case 12:g=b("bs_belt_Array").keepMapU(c[0].threadKeys,function(c){var d=i(a,c);if(d!==void 0)return{thread_id:d,action_type:b("MercuryActionType").DELETE_THREAD,other_user_fbid:c.otherUserFbId,thread_fbid:c.threadFbId}});b("MercuryDispatcher").getForFBID(a).handleUpdate({pinned_thread_ids:[],newlyAddedClientIDs:{},actions:g,preprocessed:!0,payload_source:b("MercuryPayloadSource").CLIENT_CHANNEL_MESSAGE});d=b("bs_block").__(0,["DeltaThreadDelete"]);break;case 13:k=c[0];e=i(a,{otherUserFbId:null,threadFbId:k.messageMetadata.threadKey.threadFbId});e!==void 0?(p(a,{action_type:b("MercuryActionType").REMOVE_GROUP_ADMINS,action_id:null,thread_fbid:R(k.messageMetadata.threadKey.threadFbId),other_user_fbid:null,removed_admin_ids:k.removedAdminFbIds,thread_id:e},"DeltaAdminRemovedFromGroupThread",h),d=0):d=b("bs_block").__(1,["DeltaAdminRemovedFromGroupThread","transform failed"]);break;case 14:f=c[0];l=i(a,f.threadKey);if(l!==void 0){g=[{thread_id:l,action_type:b("MercuryActionType").CHANGE_MUTE_SETTINGS,thread_fbid:f.threadKey.threadFbId,other_user_fbid:f.threadKey.otherUserFbId,mute_until:parseInt(f.expireTime,10)}];b("MercuryDispatcher").getForFBID(a).handleUpdate({pinned_thread_ids:[],newlyAddedClientIDs:{},actions:g,preprocessed:!0,payload_source:b("MercuryPayloadSource").CLIENT_CHANNEL_MESSAGE});d=b("bs_block").__(0,["DeltaThreadMuteSettings"])}else d=b("bs_block").__(1,["DeltaThreadMuteSettings","invalid thread ID"]);break;case 15:k=c[0];e=k.jsonBlob;if(e==null)d=b("bs_block").__(1,["DeltaPagesManagerEvent","no jsonBlob"]);else{try{l=JSON.parse(e)}catch(a){l={}}f=b("bs_js_json").classify(l);if(typeof f==="number"||f.tag!==2)d=b("bs_block").__(1,["DeltaPagesManagerEvent","jsonBlob is not an object"]);else{g=f[0];e=b("bs_js_dict").get(g,"type");if(e!==void 0){l=b("bs_js_json").classify(b("bs_caml_option").valFromOption(e));if(typeof l==="number"||l.tag!==1)d=b("bs_block").__(1,["DeltaPagesManagerEvent","type is not a number"]);else if(l[0]===b("PagesMessagingEventType").FLAG){f=b("bs_js_dict").get(g,"flagData");if(f!==void 0){e=b("bs_js_json").classify(b("bs_caml_option").valFromOption(f));if(typeof e==="number"||e.tag!==2)l=!1;else{g=b("bs_js_dict").get(e[0],"state");if(g!==void 0){f=b("bs_js_json").classify(b("bs_caml_option").valFromOption(g));l=typeof f==="number"?f===1:!1}else l=!1}}else l=!1;e=i(a,k.threadKey);if(e!==void 0){g=[{thread_id:e,action_type:b("MercuryActionType").CHANGE_FLAG,mark_as_flag:l,other_user_fbid:k.threadKey.otherUserFbId,thread_fbid:k.threadKey.threadFbId}];b("MercuryDispatcher").getForFBID(a).handleUpdate({pinned_thread_ids:[],newlyAddedClientIDs:{},actions:g,preprocessed:!0,payload_source:b("MercuryPayloadSource").CLIENT_CHANNEL_MESSAGE});d=b("bs_block").__(0,["DeltaPagesManagerEvent"])}else d=b("bs_block").__(1,["DeltaPagesManagerEvent","threadID is invalid"])}else d=b("bs_block").__(1,["DeltaPagesManagerEvent","type is not pagesFlag"])}else d=b("bs_block").__(1,["DeltaPagesManagerEvent","no type on jsonBlob"])}}break;case 16:f=c[0];e=i(a,{otherUserFbId:null,threadFbId:f.messageMetadata.threadKey.threadFbId});e!==void 0?(p(a,{action_type:b("MercuryActionType").APPROVAL_MODE,action_id:null,thread_fbid:R(f.messageMetadata.threadKey.threadFbId),other_user_fbid:null,approval_mode:b("bs_js_null_undefined").fromOption(b("bs_js_dict").get(b("MessengerApprovalModeTypes"),f.mode)),thread_id:e},"DeltaApprovalMode",h),d=0):d=b("bs_block").__(1,["DeltaApprovalMode","transform failed"]);break;case 17:l=c[0];k=i(a,{otherUserFbId:l.messageMetadata.threadKey.otherUserFbId,threadFbId:l.messageMetadata.threadKey.threadFbId});if(k!==void 0){g=k;f=l.inviterFbId;if(f==null){e=l.recipientFbId;if(!(e==null)){k=b("MercuryIDs").getParticipantIDFromUserID(b("FBID.bs").ofStringExn(e));e=l.action===b("MessengerApprovalQueueTypes").REMOVED;var q=l.action===b("MessengerApprovalQueueTypes").REQUESTED;p(a,{action_type:b("MercuryActionType").APPROVAL_QUEUE,action_id:null,thread_fbid:R(l.messageMetadata.threadKey.threadFbId),other_user_fbid:R(l.messageMetadata.threadKey.otherUserFbId),removed_id:e?k:null,added_id:q?k:null,thread_id:g},"DeltaApprovalQueue",h)}}else{e=l.action===b("MessengerApprovalQueueTypes").REMOVED;q=l.action===b("MessengerApprovalQueueTypes").REQUESTED;if(q){k=l.requestSource;var r;if(k==null)r=b("MessengerGroupRequestSource").ADD;else switch(k){case"ADD":r=b("MessengerGroupRequestSource").ADD;break;case"JOIN_THROUGH_LINK":r=b("MessengerGroupRequestSource").JOIN_THROUGH_LINK;break;default:r=b("MessengerGroupRequestSource").ADD}q={requester:{id:l.recipientFbId},inviter:{id:f},request_source:r,request_timestamp:l.requestTimestamp}}else q=null;p(a,{action_type:b("MercuryActionType").APPROVAL_QUEUE,action_id:null,thread_fbid:R(l.messageMetadata.threadKey.threadFbId),other_user_fbid:R(l.messageMetadata.threadKey.otherUserFbId),removed_group_id:e?l.recipientFbId:null,added_group_id:q,thread_id:g},"DeltaApprovalQueue",h)}d=0}else d=b("bs_block").__(1,["DeltaApprovalQueue","transform failed"]);break;case 18:k=c[0];p(a,j(a,k.deltaNewMessage),"DeltaGenieMessage",S(k.deltaNewMessage.messageMetadata));d=0;break;case 19:f=c[0];e=f.messageMetadata.threadKey;if(e==null)l=void 0;else{q=e.threadFbId;l=q==null?void 0:q}g=f.initiator;if(g==null)k=void 0;else{e=g.userFbId;k=e==null?void 0:e.toString()}q=i(a,{otherUserFbId:null,threadFbId:l});q!==void 0?(p(a,{action_type:b("MercuryActionType").UPDATE_RTC_CALL_DATA,thread_fbid:R(l),other_user_fbid:null,call_state:f.callState,server_info_data:f.serverInfoData,initiator_fbid:k,thread_id:q},"DeltaRTCCallData",h),d=0):d=b("bs_block").__(1,["DeltaRTCCallData","transform failed"]);break;case 20:g=c[0];e=i(a,g.threadKey);if(e!==void 0){l=[{thread_id:e,action_type:b("MercuryActionType").CHANGE_FOLDER,other_user_fbid:g.threadKey.otherUserFbId,new_folder:b("bs_js_dict").get(b("MessagingTag").IRIS_MAPPING,g.folder)}];b("MercuryDispatcher").getForFBID(a).handleUpdate({pinned_thread_ids:[],newlyAddedClientIDs:{},actions:l,preprocessed:!0,payload_source:b("MercuryPayloadSource").CLIENT_CHANNEL_MESSAGE});d=b("bs_block").__(0,["DeltaThreadFolder"])}else d=b("bs_block").__(1,["DeltaThreadFolder","threadID is invalid"]);break;case 21:f=c[0];k=i(a,f.threadKey);if(k!==void 0){q=[{thread_id:k,action_type:b("MercuryActionType").MUTATE_TAGS,messageId:f.messageId,tags_to_add:f.tagsToAdd,tags_to_delete:f.tagsToDelete}];b("MercuryDispatcher").getForFBID(a).handleUpdate({pinned_thread_ids:[],newlyAddedClientIDs:{},actions:q,preprocessed:!0,payload_source:b("MercuryPayloadSource").CLIENT_CHANNEL_MESSAGE});d=b("bs_block").__(0,["DeltaMutateMessageTags"])}else d=b("bs_block").__(1,["DeltaMutateMessageTags","threadID is invalid"]);break;case 22:d=P(a,c[0]);break}if(typeof d==="number")return 0;else if(d.tag)return n(d[0],d[1]);else return m(d[0])}function a(a,c){__p&&__p();if(b("bs_caml_obj").caml_equal(c["class"],b("MercurySyncDeltaTypes").NewMessage))return T(a,b("bs_block").__(0,[c]));else if(b("bs_caml_obj").caml_equal(c["class"],b("MercurySyncDeltaTypes").ReplaceMessage))return T(a,b("bs_block").__(1,[c]));else if(b("bs_caml_obj").caml_equal(c["class"],b("MercurySyncDeltaTypes").DeliveryReceipt))return T(a,b("bs_block").__(2,[c]));else if(b("bs_caml_obj").caml_equal(c["class"],b("MercurySyncDeltaTypes").MarkRead))return T(a,b("bs_block").__(3,[c]));else if(b("bs_caml_obj").caml_equal(c["class"],b("MercurySyncDeltaTypes").MarkUnread))return T(a,b("bs_block").__(4,[c]));else if(b("bs_caml_obj").caml_equal(c["class"],b("MercurySyncDeltaTypes").ParticipantLeftGroupThread))return T(a,b("bs_block").__(5,[c]));else if(b("bs_caml_obj").caml_equal(c["class"],b("MercurySyncDeltaTypes").ParticipantsAddedToGroupThread))return T(a,b("bs_block").__(6,[c]));else if(b("bs_caml_obj").caml_equal(c["class"],b("MercurySyncDeltaTypes").ThreadName))return T(a,b("bs_block").__(7,[c]));else if(b("bs_caml_obj").caml_equal(c["class"],b("MercurySyncDeltaTypes").ReadReceipt))return T(a,b("bs_block").__(8,[c]));else if(b("bs_caml_obj").caml_equal(c["class"],b("MercurySyncDeltaTypes").AdminTextMessage))return T(a,b("bs_block").__(9,[c]));else if(b("bs_caml_obj").caml_equal(c["class"],b("MercurySyncDeltaTypes").MessageDelete))return T(a,b("bs_block").__(10,[c]));else if(b("bs_caml_obj").caml_equal(c["class"],b("MercurySyncDeltaTypes").ThreadAction))return T(a,b("bs_block").__(11,[c]));else if(b("bs_caml_obj").caml_equal(c["class"],b("MercurySyncDeltaTypes").ThreadDelete))return T(a,b("bs_block").__(12,[c]));else if(b("bs_caml_obj").caml_equal(c["class"],b("MercurySyncDeltaTypes").AdminRemovedFromGroupThread))return T(a,b("bs_block").__(13,[c]));else if(b("bs_caml_obj").caml_equal(c["class"],b("MercurySyncDeltaTypes").ThreadMuteSettings))return T(a,b("bs_block").__(14,[c]));else if(b("bs_caml_obj").caml_equal(c["class"],b("MercurySyncDeltaTypes").PagesManagerEvent))return T(a,b("bs_block").__(15,[c]));else if(b("bs_caml_obj").caml_equal(c["class"],b("MercurySyncDeltaTypes").ApprovalMode))return T(a,b("bs_block").__(16,[c]));else if(b("bs_caml_obj").caml_equal(c["class"],b("MercurySyncDeltaTypes").ApprovalQueue))return T(a,b("bs_block").__(17,[c]));else if(b("bs_caml_obj").caml_equal(c["class"],b("MercurySyncDeltaTypes").ClientPayload))return T(a,b("bs_block").__(22,[c]));else if(b("bs_caml_obj").caml_equal(c["class"],b("MercurySyncDeltaTypes").GenieMessage))return T(a,b("bs_block").__(18,[c]));else if(b("bs_caml_obj").caml_equal(c["class"],b("MercurySyncDeltaTypes").RtcCallData))return T(a,b("bs_block").__(19,[c]));else if(b("bs_caml_obj").caml_equal(c["class"],b("MercurySyncDeltaTypes").MarkFolderSeen)){m("DeltaMarkFolderSeen");return b("bs_curry")._2(b("MessengerState.bs").send,b("bs_caml_option").some(a),[b("bs_block").__(0,[b("bs_block").__(64,[c])])])}else if(b("bs_caml_obj").caml_equal(c["class"],b("MercurySyncDeltaTypes").ThreadFolder))return T(a,b("bs_block").__(20,[c]));else return 0}f.transform=a}),null);
__d("ThreadConnectivityStatusGraphQLType.bs",[],(function(a,b,c,d,e,f){"use strict";a="UNCONNECTED";b="IMPLICIT_OR_TWO_WAY_MESSAGING";f.unconnected=a;f.implicitOrTwoWayMessaging=b}),null);
__d("ThreadConnectivityStatusGraphQLType.re",["ThreadConnectivityStatusGraphQLType.bs"],(function(a,b,c,d,e,f){a=b("ThreadConnectivityStatusGraphQLType.bs").unconnected;f.unconnected=a;c=b("ThreadConnectivityStatusGraphQLType.bs").implicitOrTwoWayMessaging;f.implicitOrTwoWayMessaging=c}),null);
__d("Utils.bs",[],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a){if(a==null)return!1;else return a}function b(a){if(a!==void 0)return a;else return!1}f.isTruthy=a;f.optionBoolToBool=b}),null);
__d("MessengerPersistantViewerKeyedSubscriptionComponent.bs",["bs_curry","React","bs_js_dict","bs_caml_option","CurrentUser","RemoteAction.bs"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a){__p&&__p();var c=[0],d={},e=function(a,c){a=a!==void 0?b("bs_caml_option").valFromOption(a):b("CurrentUser").getID();var e=b("bs_js_dict").get(d,a);if(e!==void 0)return b("RemoteAction.bs").send(e[0],c);else{e=f(a,void 0,0);return b("RemoteAction.bs").send(e[0],c)}},f=function(f,g,h){__p&&__p();h=g!==void 0?b("bs_caml_option").valFromOption(g):b("RemoteAction.bs").create(0);var i=new Set(),j=[b("bs_curry")._1(a.initialState,f)];b("RemoteAction.bs").subscribe(function(c){var d=j[0];j[0]=b("bs_curry")._2(a.reducer,c,d);if(j[0]!==d){i.forEach(function(a){return b("bs_curry")._1(a[1],0)});return 0}else return 0},h);g=function(a,d){__p&&__p();var e=b("React").useState(function(){return j[0]}),f=e[1],g=e[0],k=b("React").useCallback(function(c){if(a!==void 0)if(b("bs_curry")._2(a,g,j[0]))return b("bs_curry")._1(f,function(a){return j[0]});else return 0;else return b("bs_curry")._1(f,function(a){return j[0]})},[a,g,j[0]]);b("React").useEffect(function(){c[0]=c[0]+1|0;var a=c[0],d=[a,k];i.add(d);b("bs_curry")._1(k,0);return function(a){i["delete"](d);return 0}},[k]);return b("bs_curry")._1(d,g)};h=[h,g];d[f]=h;var k=b("bs_caml_option").some(f);b("bs_curry")._2(a.onFirstMount,f,function(a){return e(k,a)});return h},g=function(a){var c=a.shouldUpdate,e=a.remoteAction,g=a.fbid;g=g!==void 0?b("bs_caml_option").valFromOption(g):b("CurrentUser").getID();a=a.children;var h=b("bs_js_dict").get(d,g);if(h!==void 0)return b("bs_curry")._2(h[1],c,a);else return b("bs_curry")._2(f(g,e,0)[1],c,a)};g.displayName="MessengerPersistantViewerKeyedSubscriptionComponent("+(a.displayName+")");return{make:g,send:e}}f.Make=a}),null);
__d("MessengerThreadUtils.bs",["FBID.bs","bs_caml_obj","MercuryIDs","CurrentUser","MessagingTag","ImmutableObject","MessengerParticipants.bs","MercuryParticipantTypes","MessengerJoinableModeType","MessengerObjectAssociationType","MessengerThreadCannotReplyReason"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function g(a,c){return c.filter(function(c){return b("bs_caml_obj").caml_notequal(c,a)}).length<=1}function h(a,c,d,e){var f=b("MercuryIDs").tokenize(c),h=f.type;f=f.value;var i=d.find(function(b){return b!==a});i=i!==void 0?b("MessengerParticipants.bs").getNow(i):null;var j=b("CurrentUser").isWorkUser();j=!(i==null)&&j&&i.work_foreign_entity_info==null&&i.user_type===b("MercuryParticipantTypes").USER?[!1,b("MessengerThreadCannotReplyReason").RECIPIENTS_INVALID]:[!0,null];i=h==="user";return new(b("ImmutableObject"))({thread_id:c,participants:Array.from(d),admins:{},name:"",snippet:"",snippet_sender:null,unread_count:e==null?0:e,message_count:0,image_src:null,timestamp:0,other_user_fbid:i?b("FBID.bs").ofStringExn(f):null,is_canonical_user:h==="user",is_canonical:g(a,d),is_subscribed:!0,folder:b("MessagingTag").INBOX,is_archived:!1,is_page_follow_up:!1,is_page_unresponded_thread:!1,admin_model_status:null,approval_mode:0,approval_queue_ids:[],associated_object:null,can_reply:j[0],cannot_reply_reason:j[1],can_viewer_report:!1,comm_item_owners:null,comm_source_id:null,comm_status:null,comm_icon_type:[],custom_like_icon:null,custom_nickname:null,customization_enabled:!1,description:null,ephemeral_ttl_mode:0,footer_color:null,game_id:null,group_approval_queue:null,work_associated_group:null,pinned_messages:null,groups_sync_status:null,group_thread_subtype:null,has_email_participant:!1,has_montage:!1,unread_mentions_count:0,header_color:null,is_canonical_neo_user:!1,is_from_weak_entry_point:!1,is_pin_protected:!1,is_pinned:!1,is_thread_queue_enabled:!1,joinable_mode:{mode:0,link:""},last_message_timestamp:0,last_message_id:null,last_message_type:null,last_read_timestamp:0,lightweight_event:null,lightweight_events:{},marketplace_thread_data:null,mentions_mute_mode:0,mute_until:null,object_association_type:null,page_comm_item_id:null,page_thread_info:null,page_unsubscribe_status:!1,participant_add_mode:null,participants_event_status:null,reactions_mute_mode:0,read_only:!1,recipients_loadable:!1,rtc_call_data:null,server_timestamp:0,snippet_attachments:[],solid_color:null,subtitle:null,theme_id:null,thread_connectivity_data:null,thread_fbid:null,thread_pin_timestamp:null,thread_type:null,thread_unsendability_status:null,gradient_colors:[],joinable_link:null,linked_mentorship_programs:null,is_business_page_active:!1,thread_associated_job_applications:null,thread_associated_page_admin:null,graphql_token:null})}function a(a,c,d,e){a=h(a,c,d,null);return b("ImmutableObject").set(a,{associated_object:e,name:e.name,joinable_mode:{mode:b("MessengerJoinableModeType").JOINABLE,link:""},object_association_type:b("MessengerObjectAssociationType").GENERAL_CHAT})}f.isCanonicalFromInitialParticipants=g;f.createNewLocalThread=h;f.createNewLocalGroupGeneralThread=a}),null);
__d("ParticipantId.bs",["bs_string","bs_belt_Id"],(function(a,b,c,d,e,f){"use strict";a=b("bs_string").compare;c=b("bs_belt_Id").MakeComparable({cmp:a});d=c.cmp;f.cmp=d}),null);
__d("ThreadConnectivityStatus.bs",["bs_caml_obj","ThreadConnectivityStatus","ThreadConnectivityStatusGraphQLType.bs"],(function(a,b,c,d,e,f){"use strict";function a(a){a=b("bs_caml_obj").caml_equal(a,b("ThreadConnectivityStatus").UNCONNECTED);if(a)return b("ThreadConnectivityStatusGraphQLType.bs").unconnected;else return b("ThreadConnectivityStatusGraphQLType.bs").implicitOrTwoWayMessaging}f.toGraphQLValue=a}),null);
__d("ThreadId.bs",["bs_string","bs_belt_Id"],(function(a,b,c,d,e,f){"use strict";a=b("bs_string").compare;c=b("bs_belt_Id").MakeComparable({cmp:a});d=c.cmp;f.cmp=d}),null);
__d("XGroupsController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/groups/{idorvanity}/{?view}/{?post_id}/",{idorvanity:{type:"String",required:!0},view:{type:"Enum",enumType:1},post_id:{type:"Int"},rule_id:{type:"Int"},ref:{type:"String"},source_id:{type:"String"},notif_t:{type:"String"},nux:{type:"Enum",enumType:1},tip_id:{type:"Int"},feedback_id:{type:"FBID"},member_tag_id:{type:"FBID"},section:{type:"Enum",enumType:1},thread_id:{type:"String"},support_thread_id:{type:"String"},mentorship_profile_id:{type:"FBID"},autopopup_create_chat_dialog:{type:"Bool",defaultValue:!1},sorting_setting:{type:"String"},multi_events:{type:"String"},stories:{type:"Exists",defaultValue:!1},topics:{type:"Exists",defaultValue:!1},highlight_location:{type:"Exists",defaultValue:!1},highlight_sections:{type:"Exists",defaultValue:!1},highlight_groupapps:{type:"Exists",defaultValue:!1},highlight_pixel:{type:"Exists",defaultValue:!1},highlight_mentorship_option:{type:"Exists",defaultValue:!1},highlight_fundraiser_option:{type:"Exists",defaultValue:!1},highlight_auto_approval:{type:"Exists",defaultValue:!1},highlight_page_member:{type:"Exists",defaultValue:!1},highlight_units_edit_bar:{type:"Exists",defaultValue:!1},highlight_keyword_alerts:{type:"Exists",defaultValue:!1},queue:{type:"Enum",enumType:1},composer_prefill:{type:"String"},hide_workplace_pagelet:{type:"Bool",defaultValue:!1},permalink_add_comment_nux_shown:{type:"Bool",defaultValue:!1},badge_type:{type:"Enum",enumType:1},chained_wp:{type:"Bool",defaultValue:!1},hoist_pending_member_ids_suggested_order:{type:"FBIDKeyset"},comment_id:{type:"Int"},reply_comment_id:{type:"Int"}})}),null);
__d("XMercuryThreadLikeIconController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/mercury/like_icon/",{emoji:{type:"String",defaultValue:""}})}),null);
__d("XMercuryUnseenThreadIDsController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/mercury/unseen_thread_ids/",{})}),null);
__d("XMessagingChangeMentionsMuteModeController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/ajax/mercury/change_mentions_mute_thread/",{})}),null);
__d("XMessagingChangeReactionsMuteModeController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/ajax/mercury/change_reactions_mute_thread/",{})}),null);
__d("XMessagingSendController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/messaging/send/",{})}),null);
__d("MessengerTypingUtils.bs",["bs_belt_Map","bs_caml_option"],(function(a,b,c,d,e,f){"use strict";function a(a){if(a!==void 0)return b("bs_belt_Map").keysToArray(b("bs_caml_option").valFromOption(a));else return[]}f.getTypingUserIDs=a}),null);
__d("MessengerUploadFilesUtil.bs",["bs_curry","FantaTypeFileUploader"],(function(a,b,c,d,e,f){"use strict";__p&&__p();e=(d={},d[(e=b("FantaTypeFileUploader")).fileTypes.ANIMATED_IMAGE]="gif_ids",d[e.fileTypes.AUDIO]="audio_ids",d[e.fileTypes.FILE]="file_ids",d[e.fileTypes.GENERIC_ATTACHMENT]="generic_attachment_ids",d[e.fileTypes.IMAGE]="image_ids",d[e.fileTypes.VIDEO]="video_ids",d);function a(a,b){if(a==null)return null;else{a=a.getTypeIDs(b);if(a.length>0)return a;else return null}}function g(a){__p&&__p();if(a==null)return;else{a=a.get("uploadedFiles");var b=[],c=[],d=[];a.forEach(function(a,e,f){__p&&__p();e=a.file;if(e.type.startsWith("image/")){b.push(e);return 0}else if(e.type.startsWith("video/")){c.push(e);return 0}else{d.push(e);return 0}});return[b,c,d]}}function h(a,c){if(c.length>0)return b("bs_curry")._1(a,c);else return 0}function c(a,b){__p&&__p();if(a==null||b==null)return 0;else{a=g(a);if(a!==void 0){a=a;a[1].forEach(function(a){return h(b,[a])});h(b,a[0]);return h(b,a[2])}else return 0}}f.supportAttachments=e;f.getAttachmentIDs=a;f.getAttachments=g;f.sendAttchment=h;f.sendAttchments=c}),null);
__d("OnlineUserIds.bs",["bs_belt_Set","ParticipantId.bs"],(function(a,b,c,d,e,f){"use strict";function a(a){return b("bs_belt_Set").make(b("ParticipantId.bs"))}function c(a){return b("bs_belt_Set").fromArray(a,b("ParticipantId.bs"))}f.make=a;f.fromArray=c}),null);
__d("XUICloseButtonReact.bs",["ReasonReact.bs","bs_js_null_undefined","XUICloseButton.react"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a,c,d,e,f,g){var h;switch(d){case 0:h="small";break;case 1:h="medium";break;case 2:h="large";break}return b("ReasonReact.bs").wrapJsForReason(b("XUICloseButton.react"),{className:b("bs_js_null_undefined").fromOption(a),onClick:e,tooltip:b("bs_js_null_undefined").fromOption(f),shade:c?"dark":"light",size:h},g)}f.make=a}),null);
__d("ReplyingToMessageFallbackReact.bs",["cx","fbt","React","ReasonReact.bs","XUICloseButtonReact.bs"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=b("ReasonReact.bs").statelessComponent("ReplyingToMessageFallbackReact");function j(a,c,d){return[i[0],i[1],i[2],i[3],i[4],i[5],i[6],i[7],function(c){return b("React").createElement("div",{className:(d?"_692o":"")+" _67tu"},b("ReasonReact.bs").element(void 0,void 0,b("XUICloseButtonReact.bs").make("_67tv",1,d?1:2,a,void 0,[])),h._("Risposta al messaggio"))},i[9],i[10],i[11],i[12]]}a=b("ReasonReact.bs").wrapReasonForJs(i,function(a){return j(a.onCancelReplyingToMessage,[],a.isChatTab)});f.component=i;f.make=j;f.jsComponent=a}),null);
__d("SkinToneEmoji.bs",["bs_caml_array","EmojiFormat.bs","MessengerEmojiConfig"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function g(a){switch(a){case"1f385":case"1f3c3":case"1f3c4":case"1f3ca":case"1f3cb":case"1f442":case"1f443":case"1f446":case"1f447":case"1f448":case"1f449":case"1f44a":case"1f44b":case"1f44c":case"1f44d":case"1f44e":case"1f44f":case"1f450":case"1f466":case"1f467":case"1f468":case"1f469":case"1f46e":case"1f470":case"1f471":case"1f472":case"1f473":case"1f474":case"1f475":case"1f476":case"1f477":case"1f478":case"1f47c":case"1f481":case"1f482":case"1f483":case"1f485":case"1f486":case"1f487":case"1f4aa":case"1f575":case"1f590":case"1f595":case"1f596":case"1f645":case"1f646":case"1f647":case"1f64b":case"1f64c":case"1f64d":case"1f64e":case"1f64f":case"1f6a3":case"1f6b4":case"1f6b5":case"1f6b6":case"1f6c0":case"1f918":case"261d":case"26f9":case"270a":case"270b":case"270c":case"270d":return!0;default:return!1}}function h(a){var c=b("bs_caml_array").caml_array_get(a,a.length-1|0)===65039;if(c)return b("bs_caml_array").caml_array_get(a,a.length-1|0);else return 0}function i(a){if(b("bs_caml_array").caml_array_get(a,a.length-1|0)===65039)return a;else{a=a.slice(0);return a.concat([65039])}}function j(a){var b=h(a)===0;if(b)return a;else return a.slice(0,a.length-1|0)}function k(a){var c=b("MessengerEmojiConfig").emoji_colors;c=c.filter(function(b){return b===a});return c.length!==0}function l(a){a=j(a);if(a.length<=1||!k(b("bs_caml_array").caml_array_get(a,a.length-1|0)))return 0;else return b("bs_caml_array").caml_array_get(a,a.length-1|0)}function m(a){var b=h(a),c=b===0;c=c?l(a):l(a.slice(0,a.length-1|0));if(c!==0){c=b===0;if(c)return a.slice(0,a.length-1|0);else return i(a.slice(0,a.length-2|0))}else return a}function a(a,b){__p&&__p();if(b!==0){var c=h(a),d=c===0;d=d?a.slice(0):a.slice(0,a.length-1|0);var e=l(d);if(e!==0)return a;else{e=d.concat([b]);d=c===0;if(d)return e;else return e.concat([c])}}else return a}function c(a){return m(j(a))}function d(a){return g(b("EmojiFormat.bs").codeArrayToCodeString(m(j(a))))}e=65039;f.emoji_modifier_code=e;f.emoji=g;f.getEmojiModifier=h;f.addEmojiModifier=i;f.removeEmojiModifier=j;f.isToneModifier=k;f.getTone=l;f.removeTone=m;f.applyTone=a;f.removeAllModifiers=c;f.hasVariations=d}),null);
__d("SplitImage.bs",["ReasonReact.bs","SplitImage.react","bs_js_null_undefined"],(function(a,b,c,d,e,f){"use strict";function a(a,c,d,e,f){return b("ReasonReact.bs").wrapJsForReason(b("SplitImage.react"),{border:b("bs_js_null_undefined").fromOption(e),size:a,srcs:c,className:b("bs_js_null_undefined").fromOption(d)},f)}f.make=a}),null);
__d("XUIBadgeReact.bs",["ReasonReact.bs","XUIBadge.react","bs_js_null_undefined"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function g(a){if(a!==void 0)if(a)return"regular";else return"special"}function a(a,c,d,e,f){var h;return b("ReasonReact.bs").wrapJsForReason(b("XUIBadge.react"),{className:(h=b("bs_js_null_undefined")).fromOption(c),count:h.fromOption(d),maxcount:h.fromOption(e),type:h.fromOption(g(a))},f)}f.stringOfBadgeType=g;f.make=a}),null);
__d("MessengerPresenceProvider.bs",["FBID.bs","bs_curry","React","Arbiter","bs_belt_Set","bs_caml_obj","bs_belt_Array","MercuryIDs","bs_belt_Option","bs_caml_option","OnlineUserIds.bs","ParticipantId.bs","PresenceStatus","PresencePrivacy","AvailableListConstants","MessengerPersistantViewerKeyedSubscriptionComponent.bs"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=["privacy-changed","privacy-availability-changed","privacy-user-presence-response"];function a(a){return b("OnlineUserIds.bs").make(0)}function c(a,c){if(a){a=a[0];var d=b("bs_caml_obj").caml_equal(b("PresenceStatus").get(a),b("AvailableListConstants").ACTIVE);if(d)return b("bs_belt_Set").add(c,b("MercuryIDs").getParticipantIDFromUserID(a));else return b("bs_belt_Set").remove(c,b("MercuryIDs").getParticipantIDFromUserID(a))}else return b("bs_belt_Set").fromArray(b("bs_belt_Array").map(b("PresenceStatus").getOnlineIDs(),function(a){return b("MercuryIDs").getParticipantIDFromUserID(a)}),b("ParticipantId.bs"))}function d(a,c){__p&&__p();b("PresencePrivacy").subscribe(g,function(a){return b("bs_curry")._1(c,0)});b("bs_curry")._1(c,0);b("Arbiter").subscribe(b("AvailableListConstants").ON_AVAILABILITY_CHANGED,function(a,d){if(d==null)return 0;else{a=b("FBID.bs").ofStringExn(d);return b("bs_curry")._1(c,[a])}});return 0}a=b("MessengerPersistantViewerKeyedSubscriptionComponent.bs").Make({initialState:a,reducer:c,onFirstMount:d,displayName:"MessengerPresenceProvider"});var h=a.make;function i(a,c,d,e,f){f={children:e};a!==void 0&&(f.shouldUpdate=b("bs_caml_option").valFromOption(a));c!==void 0&&(f.remoteAction=b("bs_caml_option").valFromOption(c));d!==void 0&&(f.fbid=b("bs_caml_option").valFromOption(d));return f}function j(a){__p&&__p();var c=a.subscribeToIDs,d=a.remoteAction,e=a.fbid;a=a.children;d=i(function(a,d){if(c!==void 0){var e;d=(e=b("bs_belt_Set")).union(e.diff(a,d),e.diff(d,a));return!e.isEmpty(e.intersect(d,b("bs_caml_option").valFromOption(c)))}else return!1},d,e,a,0);return b("React").createElement(h,d)}function e(a){var c=b("ParticipantId.bs"),d={children:a.children},e=b("bs_belt_Option").map(b("bs_caml_option").nullable_to_opt(a.subscribeToIDs),function(a){return b("bs_belt_Set").fromArray(a,c)});e!==void 0&&(d.subscribeToIDs=b("bs_caml_option").valFromOption(e));e=b("bs_caml_option").nullable_to_opt(a.fbid);e!==void 0&&(d.fbid=b("bs_caml_option").valFromOption(e));return j(d)}c=a.send;d=j;f.privacyEvents=g;f.send=c;f.makePropsOriginal=i;f.make=d;f.jsComponent=e}),null);
__d("MessengerReadReceipt.bs",["bs_array","Utils.bs","immutable","bs_caml_option","bs_belt_MapString","MercuryActionStatus"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function g(a,c,d,e){__p&&__p();c=c>=a.timestamp;var f=a.status;e=!e||d!==a.author;if(c)if(f==null)if(e)return!0;else return!1;else if(e)return f===b("MercuryActionStatus").SUCCESS;else return!1;else return!1}function a(a,c,d){__p&&__p();if(c==null)return[];else{a=b("bs_belt_MapString").get(a,c.thread_id);if(a!==void 0)return b("bs_caml_option").valFromOption(a).reduce(function(a,e,f,h){if(g(c,e.watermark,f,b("Utils.bs").isTruthy(d)))return b("bs_array").append(a,[f]);else return a},[]);else return[]}}function c(a,c){a=b("bs_belt_MapString").get(a,c.thread_id);if(a!==void 0)return b("bs_caml_option").valFromOption(a).reduce(function(a,b,d,e){if(a)return g(c,b.watermark,d,!1);else return!1},!0);else return!1}function d(a){return!b("bs_belt_MapString").isEmpty(a)}function e(a,c){if(b("bs_belt_MapString").isEmpty(a))return b("immutable").OrderedMap();else{a=b("bs_belt_MapString").get(a,c);if(a!==void 0)return b("bs_caml_option").valFromOption(a);else return b("immutable").OrderedMap()}}function h(a,c,d){a=b("bs_belt_MapString").get(a,c);if(a!==void 0){c=b("bs_caml_option").valFromOption(a).get(d);if(c==null)return null;else return c}else return null}var i=b("bs_belt_MapString").empty;f.emptyReadReceipts=i;f.wasSeen=g;f.getSeenBy=a;f.wasSeenByAll=c;f.hasReadReceipts=d;f.getSeenTimestamps=e;f.getSeenTimestamp=h}),null);
__d("MqttProtocolUtils",["MqttEnv"],(function(a,b,c,d,e,f){__p&&__p();var g=b("MqttEnv").Env;function a(a,b){if(a==null)return b;var c=new Uint8Array(a.length+b.length);c.set(a);c.set(b,a.length);return c}function c(a,b){__p&&__p();b=b;var c=0,d=1,e;do{if(b===a.length)return null;e=a[b++];c+=(e&127)*d;d*=128}while((e&128)!==0);return{value:c,offset:b}}function d(a){__p&&__p();a=a;var b=new Array(1);for(var c=0;c<4;c++){var d=a%128;a>>=7;if(a>0)b[c]=d|128;else{b[c]=d;break}}return b}function h(a,b,c){c=c;b[c++]=a>>8;b[c++]=a%256;return c}function f(a,b){return 256*a[b]+a[b+1]}function i(a){var b=0;for(var c=0,d=a.length;c<d;c++){var e=a.charCodeAt(c);e<128?b+=1:e<2048?b+=2:e>=55296&&e<=56319?(b+=4,c++):b+=3}return b}function j(a,b,c,d){d=h(b,c,d);k(a,c,d);return d+b}function k(a,b,c){c=c;for(var d=0,e=a.length;d<e;d++){var f=a.charCodeAt(d);f<128?b[c++]=f:f<2048?(b[c++]=192|f>>6,b[c++]=128|f&63):f<55296||f>=57344?(b[c++]=224|f>>12,b[c++]=128|f>>6&63,b[c++]=128|f&63):(f=65536+((f&1023)<<10|a.charCodeAt(++d)&1023),b[c++]=240|f>>18,b[c++]=128|f>>12&63,b[c++]=128|f>>6&63,b[c++]=128|f&63)}}function l(a,b,c){__p&&__p();var d=[],e=b,f=0;while(e<b+c){var g=a[e++];if(g<128)d[f++]=String.fromCharCode(g);else if(g>191&&g<224){var h=a[e++];d[f++]=String.fromCharCode((g&31)<<6|h&63)}else if(g>239&&g<365){h=a[e++];var i=a[e++],j=a[e++];h=((g&7)<<18|(h&63)<<12|(i&63)<<6|j&63)-65536;d[f++]=String.fromCharCode(55296+(h>>10));d[f++]=String.fromCharCode(56320+(h&1023))}else{i=a[e++];j=a[e++];d[f++]=String.fromCharCode((g&15)<<12|(i&63)<<6|j&63)}}return d.join("")}b=function(){"use strict";__p&&__p();function a(a,b,c){this.$1=a*1e3,this.$4=b,this.$5=c,this.$3=!1}var b=a.prototype;b.$6=function(){var a=this;this.$3?(this.$3=!1,this.$4(),this.$2=g.setTimeout(function(){a.$6()},this.$1)):this.$5()};b.reset=function(){var a=this;this.$3=!0;this.$2&&(g.clearTimeout(this.$2),this.$2=null);this.$1>0&&(this.$2=g.setTimeout(function(){a.$6()},this.$1))};b.cancel=function(){this.$2&&(g.clearTimeout(this.$2),this.$2=null)};return a}();e.exports={UTF8Length:i,convertStringToUTF8:k,concatBuffers:a,decodeMultiByteInt:c,convertUTF8ToString:l,encodeMultiByteInt:d,writeUInt16BE:h,readUInt16BE:f,writeString:j,Pinger:b}}),null);
__d("MqttProtocolCodec",["MqttProtocolUtils","MqttUtils"],(function(a,b,c,d,e,f){__p&&__p();var g=(c=b("MqttProtocolUtils")).UTF8Length,h=c.convertStringToUTF8,i=c.convertUTF8ToString,j=c.decodeMultiByteInt,k=c.encodeMultiByteInt,l=c.readUInt16BE,m=c.writeString,n=c.writeUInt16BE,o=b("MqttUtils").sprintf,p=Object.freeze({CONNECT:1,CONNACK:2,PUBLISH:3,PUBACK:4,SUBSCRIBE:8,SUBACK:9,UNSUBSCRIBE:10,UNSUBACK:11,PINGREQ:12,PINGRESP:13,DISCONNECT:14}),q=[0,6,77,81,73,115,100,112,3];function r(a,b){__p&&__p();b=b;var c=b,d=a[b],e=d>>4;b+=1;var f=j(a,b);if(f==null)return{wireMessage:null,position:c};b=f.offset;f=b+f.value;if(f>a.length)return{wireMessage:null,position:c};var g;switch(e){case p.CONNACK:c=a[b++];c=!!(c&1);var h=a[b++];g=new u(c,h);break;case p.PUBLISH:c=d&15;h=c>>1&3;d=l(a,b);b+=2;var k=i(a,b,d);b+=d;d=null;h===1&&(d=l(a,b),b+=2);var m=w.createWithBytes(a.subarray(b,f)),n=(c&1)===1;c=(c&8)===8;g=new x(k,m,h,d,n,c);break;case p.PINGREQ:g=new s("PINGREQ");break;case p.PINGRESP:g=new s("PINGRESP");break;case p.PUBACK:case p.UNSUBACK:k=l(a,b);g=new v(e===p.PUBACK?"PUBACK":"UNSUBACK",k);break;case p.SUBACK:m=l(a,b);b+=2;h=a.subarray(b,f);g=new t(m,h);break;default:throw new Error(o("Invalid MQTT message type %s.",e))}return{wireMessage:g,position:f}}function a(a){__p&&__p();var b=[],c=0;while(c<a.length){var d=r(a,c),e=d.wireMessage;c=d.position;if(e)b.push(e);else break}d=null;c<a.length&&(d=a.subarray(c));return{messages:b,remaining:d}}d=function(){"use strict";function a(a){this.messageType=p[a]}var b=a.prototype;b.encode=function(){throw new TypeError("Cannot abstract class WireMessage")};return a}();var s=function(b){"use strict";__p&&__p();babelHelpers.inheritsLoose(a,b);function a(a){return b.call(this,a)||this}var c=a.prototype;c.encode=function(){var a=new ArrayBuffer(2),b=new Uint8Array(a);b[0]=(this.messageType&15)<<4;return a};return a}(d);f=function(a){"use strict";__p&&__p();babelHelpers.inheritsLoose(b,a);function b(){return a.call(this,"DISCONNECT")||this}var c=b.prototype;c.encode=function(){var a=(this.messageType&15)<<4,b=new ArrayBuffer(2),c=new Uint8Array(b);c[0]=a;c.set(k(0),1);return b};return b}(d);var t=function(b){"use strict";babelHelpers.inheritsLoose(a,b);function a(a,c){var d;d=b.call(this,"SUBACK")||this;d.messageIdentifier=a;d.returnCode=c;return d}return a}(d),u=function(b){"use strict";babelHelpers.inheritsLoose(a,b);function a(a,c){var d;d=b.call(this,"CONNACK")||this;d.sessionPresent=a;d.returnCode=c;return d}return a}(d),v=function(b){"use strict";__p&&__p();babelHelpers.inheritsLoose(a,b);function a(a,c){a=b.call(this,a)||this;a.messageIdentifier=c;return a}var c=a.prototype;c.encode=function(){var a=(this.messageType&15)<<4,b=2,c=k(b),d=c.length+1;b=new ArrayBuffer(b+d);var e=new Uint8Array(b);e[0]=a;e.set(c,1);d=n(this.messageIdentifier,e,d);return b};return a}(d);c=function(a){"use strict";__p&&__p();babelHelpers.inheritsLoose(b,a);function b(b,c){var d;d=a.call(this,"CONNECT")||this;d.clientId=b;d.connectOptions=c;return d}var c=b.prototype;c.encode=function(){__p&&__p();var a=(this.messageType&15)<<4,b=q.length+3;b+=g(this.clientId)+2;b+=g(this.connectOptions.userName)+2;var c=k(b);b=new ArrayBuffer(1+c.length+b);var d=new Uint8Array(b);d[0]=a;a=1;d.set(c,1);a+=c.length;d.set(q,a);a+=q.length;c=2|128;d[a++]=c;a=n(this.connectOptions.keepAliveInterval,d,a);a=m(this.clientId,g(this.clientId),d,a);a=m(this.connectOptions.userName,g(this.connectOptions.userName),d,a);return b};return b}(d);b=function(a){"use strict";__p&&__p();babelHelpers.inheritsLoose(b,a);function b(b,c,d,e){var f;f=a.call(this,b)||this;f.topic=c;if(d<0&&d>1||d===1&&e==null)throw new TypeError(o("Argument Invalid. qos: %s messageType: %s.",d,b));f.qos=d;f.messageIdentifier=e;return f}var c=b.prototype;c.encode=function(){__p&&__p();var a=(this.messageType&15)<<4;a|=2;var b=g(this.topic),c=2+b+2;this.messageType===p.SUBSCRIBE&&(c+=1);var d=k(c);c=new ArrayBuffer(1+d.length+c);var e=new Uint8Array(c);e[0]=a;a=1;e.set(d,1);a+=d.length;this.messageIdentifier!=null&&(a=n(this.messageIdentifier,e,a));a=m(this.topic,b,e,a);this.messageType===p.SUBSCRIBE&&this.qos!=null&&(e[a++]=this.qos);return c};return b}(d);var w=function(){"use strict";__p&&__p();function a(a,b){this.payloadString=a,this.payloadBytes=b}a.createWithString=function(b){var c=new Uint8Array(new ArrayBuffer(g(b)));h(b,c,0);return new a(b,c)};a.createWithBytes=function(b){var c=i(b,0,b.length);return new a(c,b)};var b=a.prototype;b.string=function(){return this.payloadString};b.bytes=function(){return this.payloadBytes};return a}(),x=function(b){"use strict";__p&&__p();babelHelpers.inheritsLoose(a,b);function a(a,c,d,e,f,g){__p&&__p();var h;h=b.call(this,"PUBLISH")||this;h.topic=a;h.payloadMessage=c;h.qos=d;h.messageIdentifier=e;h.retained=f!=null?f:!1;h.duplicate=g!=null?g:!1;if(h.qos===1&&h.messageIdentifier==null)throw new TypeError("Argument Invalid. messageIdentifier: null and qos: 1");return h}var c=a.prototype;c.encode=function(){__p&&__p();var a=(this.messageType&15)<<4;this.duplicate&&(a|=8);a=a|=this.qos<<1;this.retained&&a!=1;var b=g(this.topic),c=b+2;c+=this.messageIdentifier==null?0:2;var d=this.payloadMessage.bytes();c+=d.byteLength;var e=k(c);c=new ArrayBuffer(1+e.length+c);var f=new Uint8Array(c);f[0]=a;f.set(e,1);a=1+e.length;a=m(this.topic,b,f,a);this.messageIdentifier!=null&&(a=n(this.messageIdentifier,f,a));f.set(d,a);return c};return a}(d);e.exports={MESSAGE_TYPE:p,WireMessage:{Base:d,PubAckUnsubAck:v,Ping:s,ConnAck:u,Connect:c,Disconnect:f,Subscription:b,Publish:x},createMessageWithString:w.createWithString,decodeMessage:r,decodeByteMessages:a}}),null);
__d("MqttProtocolClient",["MqttEnv","MqttProtocolCodec","MqttTypes","MqttProtocolUtils"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=30,h=6e4,i=b("MqttEnv").Env;b("MqttEnv").MqttGkNames;var j=(a=b("MqttProtocolCodec")).MESSAGE_TYPE,k=a.WireMessage,l=a.createMessageWithString,m=a.decodeByteMessages;c=b("MqttTypes").MqttError;var n=b("MqttTypes").ConnectFailure,o=b("MqttProtocolUtils").concatBuffers,p=b("MqttProtocolUtils").Pinger,q={SOCKET_ERROR:new c(1,"Socket error"),SOCKET_MESSAGE:new c(2,"Unable to parse invalid socket message"),INVALID_DATA_TYPE:new c(3,"Received non-arraybuffer from socket."),CONNECT_TIMEOUT:new c(4,"Connect timed out"),CONNACK_FAILURE:new c(5,"Connection failure due to connack"),PING_TIMEOUT:new c(6,"Ping timeout"),APP_DISCONNECT:new c(7,"Disconnect initiated by app"),SERVER_DISCONNECT:new c(8,"Disconnect message sent my server"),SOCKET_CLOSE:new c(9,"Socket connection closed")};d=function(){__p&&__p();function a(a){this.$3=a,this.$2={userName:"",mqttVersion:3,keepAliveInterval:10,ignoreSubProtocol:!1,onConnectSuccess:function(){},onConnectFailure:function(a){},onConnection:function(){},onConnectionError:function(a){},onConnectionLost:function(a){},onMessageArrived:function(a,b){},onMessageDelivered:function(a,b){}},this.$1="mqttwsclient",this.$4=0,this.$5=!1,this.$9=i.getLoggerInstance()}var b=a.prototype;b.connect=function(a){__p&&__p();var b=this;if(this.$5)throw new Error("Invalid state: connect - already connected");this.$2=a;this.setConnected(!1);this.$7!=null&&(i.clearTimeout(this.$7),this.$7=null);this.$7=i.setTimeout(function(){b.$9.bumpCounter("protocol.error.connect.timeout"),b.$11(q.CONNECT_TIMEOUT)},g*1e3);this.$6=i.createSocket(this.$3);this.$6.binaryType="arraybuffer";this.$6.onopen=function(){b.setConnected(!0),b.$12(new k.Connect(b.$1,a)),a.onConnection()};this.$6.onmessage=function(a){__p&&__p();a=a.data;if(!(a instanceof ArrayBuffer)){b.$9.bumpCounter("protocol.error.onmessage.type");b.$11(q.INVALID_DATA_TYPE);return}try{a=new Uint8Array(a);b.$10!=null&&(a=o(b.$10,a),b.$9.bumpCounter("protocol.debug.usingMessagesBuffer"),delete b.$10,b.$10=null);a=m(a);var c=a.messages;b.$10=a.remaining;for(var a=0;a<c.length;a++)b.handleMessage(c[a])}catch(a){b.$10=null,b.$9.logError(a,q.SOCKET_MESSAGE.errorMessage),b.$9.bumpCounter("protocol.error.onmessage.parse"),b.$11(q.SOCKET_MESSAGE)}};this.$6.onerror=function(a){var c;try{c=parseInt(JSON.parse(b.$2.userName).s,10)}catch(a){c=-1}b.$9.eventLogSocketError({sessionID:c,errorCode:1,errorMessage:"socket.onerror "+a.type});b.$9.bumpCounter("protocol.error.socket");b.$11(q.SOCKET_ERROR)};this.$6.onclose=function(a){b.$9.bumpCounter("protocol.socket.close"),b.$11(q.SOCKET_CLOSE)};this.$8!=null&&this.$8.cancel();this.$8=new p(a.keepAliveInterval,this.$12.bind(this,new k.Ping("PINGREQ")),this.$11.bind(this,q.PING_TIMEOUT))};b.$13=function(){this.setConnected(!1),this.$8!=null&&this.$8.cancel(),this.$7!=null&&(i.clearTimeout(this.$7),this.$7=null),this.$6!=null&&(this.$6.onopen=function(a){},this.$6.onmessage=function(a){},this.$6.onerror=function(a){},this.$6.onclose=function(a){},this.$6.readyState===this.$6.OPEN&&this.$6.close(),delete this.$6,this.$6=null),this.$2.onConnectSuccess=function(){},this.$2.onConnectFailure=function(a){},this.$2.onConnection=function(){},this.$2.onConnectionError=function(a){},this.$2.onConnectionLost=function(a){},this.$2.onMessageArrived=function(a,b){},this.$2.onMessageDelivered=function(a,b){}};b.disconnect=function(){if(this.$6==null||this.$6.readyState!==this.$6.OPEN||!this.$5){this.$13();return}this.$12(new k.Disconnect());this.$9.bumpCounter("protocol.debug.disconnect");this.$11(q.APP_DISCONNECT)};b.isConnected=function(){return this.$5};b.setConnected=function(a){this.$5=a};b.subscribe=function(a){if(!this.$5){this.$9.bumpCounter("protocol.error.subscribe.notconnected");throw new Error("Invalid state: subscribe - not connected")}this.$9.bumpCounter("protocol.subscribe."+a);a=new k.Subscription("SUBSCRIBE",a,0,this.$14());this.$12(a)};b.unsubscribe=function(a){if(!this.$5){this.$9.bumpCounter("protocol.error.unsubscribe.notconnected");throw new Error("Invalid state: unsubscribe - not connected")}this.$9.bumpCounter("protocol.unsubscribe."+a);a=new k.Subscription("UNSUBSCRIBE",a,0,this.$14());this.$12(a)};b.publish=function(a,b,c){this.$5||this.$9.bumpCounter("protocol.error.publish.notconnected");this.$9.bumpCounter("protocol.publish."+a);var d=this.$14();a=new k.Publish(a,l(b),c,d);this.$12(a);return d};b.$14=function(){++this.$4===h&&(this.$4=1);return this.$4};b.$11=function(a,b){this.$9.bumpCounter("protocol.debug.disconnect.internal");var c=this.$5,d=this.$2,e=d.onConnectionLost,f=d.onConnectFailure;this.setConnected(!1);this.$13();c?i.scheduleCallback(function(){e(a)}):i.scheduleCallback(function(){f(new n(a,b!=null?b:-1))})};b.$12=function(a){var b=this.$6;if(b==null)return;if(b.readyState!=b.OPEN)return;b.send(a.encode())};b.handleMessage=function(a){__p&&__p();var b=this;switch(a.messageType){case j.CONNACK:this.$7!=null&&(i.clearTimeout(this.$7),this.$7=null);if(a instanceof k.ConnAck){var c=a;if(c.returnCode!==0){this.$9.bumpCounter("protocol.error.connack.invalidreturncode");this.setConnected(!1);this.$11(q.CONNACK_FAILURE,c.returnCode);return}i.scheduleCallback(function(){b.$2.onConnectSuccess()});this.$8!=null&&this.$8.reset()}break;case j.PUBLISH:if(a instanceof k.Publish){var d=a;i.scheduleCallback(function(){b.$2.onMessageArrived(d.topic,d.payloadMessage.payloadString)});c=d.messageIdentifier;this.$9.bumpCounter("protocol.publish.received");if(d.qos===1&&c!=null){c=new k.PubAckUnsubAck("PUBACK",c);this.$12(c)}}break;case j.PUBACK:if(a instanceof k.PubAckUnsubAck){c=a;var e=c.messageIdentifier;this.$9.bumpCounter("protocol.puback.received");i.scheduleCallback(function(){b.$2.onMessageDelivered("",e)})}break;case j.PINGRESP:this.$8!=null&&this.$8.reset();break;case j.DISCONNECT:this.$11(q.SERVER_DISCONNECT);break;case j.SUBACK:this.$9.bumpCounter("protocol.suback.received");break;case j.UNSUBACK:this.$9.bumpCounter("protocol.unsuback.received");break;default:this.$9.logError(new Error("MqttProtocolClient: Received unhandled message type: "+a.messageType),"Received unhandled message type");this.$9.bumpCounter("protocol.error.handlemessage.unsupportedtype");break}};return a}();e.exports=d}),null);
__d("SearchI18nArabic",[],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=/[\u0600-\u06FF]/;function h(a){return g.test(a)}var i={1570:1575,1571:1575,1573:1575,1649:1575,1609:1610,1577:1607,1572:1569,1574:1569},j=[1600,1611,1612,1613,1614,1615,1616,1617,1618];function k(a){return Object.prototype.hasOwnProperty.call(i,a)?String.fromCharCode(i[a]):j.indexOf(a)!=-1?"":String.fromCharCode(a)}function a(a){if(!h(a))return a;var b=[];for(var c=0;c<a.length;c++){var d=a.charCodeAt(c);b.push(k(d))}return b.join("")}b={hasArabicCharacters:h,normalizeCharCode:k,arabicNormalization:a};e.exports=b}),null);
__d("UnicodeCJK",[],(function(a,b,c,d,e,f){"use strict";__p&&__p();f="a-zA-Z";var g="\uff21-\uff3a\uff41-\uff5a",h=f+g;f="\u3040-\u309f";g="\u30a0-\u30ff";var i="\u31f0-\u31ff",j="\uff65-\uff9f";g=g+i+j;var k=f+g,l=[12352,12447];i=[12448,12543];var m=i[0]-l[0];j="\u4e00-\u9fcf";f="\u3400-\u4dbf";var n=j+f;g="\uac00-\ud7af";var o=n+k+g,p=null,q=null,r=null,s=null;function t(a){q=q||new RegExp("["+k+"]");return q.test(a)}function a(a){p=p||new RegExp("["+n+"]");return p.test(a)}function b(a){r=r||new RegExp("["+o+"]");return r.test(a)}function u(a){a=a.charCodeAt(0);return String.fromCharCode(a<l[0]||a>l[1]?a:a+m)}function c(a){return!t(a)?a:a.split("").map(u).join("")}function v(a){s=s||new RegExp("^["+k+"]+["+h+"]$");return s.test(a)}function d(a){return v(a)?a.substr(0,a.length-1):a}i={hasKana:t,hasIdeograph:a,hasIdeoOrSyll:b,hiraganaToKatakana:c,isKanaWithTrailingLatin:v,kanaRemoveTrailingLatin:d};e.exports=i}),null);
__d("UnicodeHangulKorean",[],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=/[\u3130-\u318F\uAC00-\uD7AF]/;function h(a){return g.test(a)}var i=[4352,4353,4522,4354,4524,4525,4355,4356,4357,4528,4529,4530,4531,4532,4533,4378,4358,4359,4360,4385,4361,4362,4363,4364,4365,4366,4367,4368,4369,4370,4449,4450,4451,4452,4453,4454,4455,4456,4457,4458,4459,4460,4461,4462,4463,4464,4465,4466,4467,4468,4469,4448,4372,4373,4551,4552,4556,4558,4563,4567,4569,4380,4573,4575,4381,4382,4384,4386,4387,4391,4393,4395,4396,4397,4398,4399,4402,4406,4416,4423,4428,4593,4594,4439,4440,4441,4484,4485,4488,4497,4498,4500,4510,4513],j=12593;b=i.length;var k=j+b;function l(a){return String.fromCharCode(i[a-j])}var m=4352,n=4449,o=4519,p=44032;c=19;d=21;var q=28,r=d*q;f=c*r;var s=p+f;function t(a){a=a-p;var b=a%q;return String.fromCharCode(m+a/r)+String.fromCharCode(n+a%r/q)+(b>0?String.fromCharCode(o+b):"")}function a(a){if(!h(a))return a;var b=[];for(var c=0;c<a.length;c++){var d=a.charAt(c),e=d.charCodeAt(0);b.push(j<=e&&e<k?l(e):p<=e&&e<s?t(e):d)}return b.join("")}b={toConjoiningJamo:a};e.exports=b}),null);
__d("SearchI18nMatch",["invariant","SearchI18nArabic","UnicodeCJK","UnicodeHangulKorean","forEachObject","tryToRemoveStringAccents"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a=function(){__p&&__p();function a(a){this.config={prefix_hangul_conjoining_jamo:!1,prefix_kana_drop_trailing_latin:!1,prefix_kana_hiragana_to_katakana:!1,prefix_try_ignoring_accents:!1,search_i18n_prefix_arabic_normalization:!1},a!=null&&this.setConfigs(a)}var c=a.prototype;c.setConfigs=function(a){var c=this;b("forEachObject")(a,function(a,b){return c.setConfig(b,a)},this)};c.setConfig=function(a,b){a in this.config||g(0,5344,a),b!=null&&(this.config[a]=b)};c.prefixMatchPrepare=function(a){if(a){var c=this.config;c.prefix_hangul_conjoining_jamo&&(a=b("UnicodeHangulKorean").toConjoiningJamo(a));c.prefix_kana_drop_trailing_latin&&(a=b("UnicodeCJK").kanaRemoveTrailingLatin(a));c.prefix_kana_hiragana_to_katakana&&(a=b("UnicodeCJK").hiraganaToKatakana(a));c.search_i18n_prefix_arabic_normalization&&(a=b("SearchI18nArabic").arabicNormalization(a));c.prefix_try_ignoring_accents&&(a=b("tryToRemoveStringAccents")(a))}return a};c.prefixMatch=function(a,b){a=this.prefixMatchPrepare(a);b=this.prefixMatchPrepare(b);return a.startsWith(b)};return a}();e.exports=a}),null);
__d("AbstractSearchSource",["Promise"],(function(a,b,c,d,e,f){__p&&__p();a=function(){"use strict";__p&&__p();function a(){}var c=a.prototype;c.bootstrap=function(a){var c=this;this.$1||(this.$1=new(b("Promise"))(function(a){c.bootstrapImpl(a)}));return this.$1.then(a)};c.search=function(a,b,c){this.searchImpl(a,b,c)};c.bootstrapImpl=function(a){a()};c.searchImpl=function(a,b,c){throw new Error("Abstract method #searchImpl is not implemented.")};c.clearBootstrappedData=function(){this.$1=null};return a}();e.exports=a}),null);
__d("MessengerUserInputUtils",[],(function(a,b,c,d,e,f){"use strict";function a(a,b){return a.createEntity("AUTOCOMPLETE","MUTABLE",{mid:b.getUniqueID()})}e.exports=a}),null);
__d("TypeaheadNavigation",[],(function(a,b,c,d,e,f){a={moveUp:function(a,b,c){b=b!=null?a.indexOf(b):-1;b=b==-1?a.length-1:b-1;c(b==-1?null:a[b])},moveDown:function(a,b,c){b=b!=null?a.indexOf(b)+1:0;c(b==a.length?null:a[b])}};e.exports=a}),null);
__d("ScrollBoundaryContain",["Event","Scroll","UserAgent"],(function(a,b,c,d,e,f){__p&&__p();var g=function(a,c){c.deliberateSync=!0;if(c.axis!==void 0&&c.axis===c.HORIZONTAL_AXIS||c.wheelDeltaX&&!c.wheelDeltaY||c.deltaX&&!c.deltaY)return;var d=c.wheelDelta||-c.deltaY||-c.detail,e=a.scrollHeight,f=a.clientHeight;if(e>f){c.stopPropagation();a=b("Scroll").getTop(a);(d>0&&a===0||d<0&&a>=e-f-1)&&c.preventDefault()}},h=void 0,i=function(){if(h)return h;h=b("UserAgent").isBrowser("Firefox")?"WheelEvent"in window?"wheel":"DOMMouseScroll":"mousewheel";return h},j=function(a){__p&&__p();var c=g.bind(null,a),d=i(),e,f=b("Event").listen(a,"mouseenter",function(){e==null&&(e=b("Event").listen(a,d,c))}),h=b("Event").listen(a,"mouseleave",function(){e&&(e.remove(),e=null)}),j=!1;return{remove:function(){if(j)return;e&&(e.remove(),e=null);f.remove();h.remove();j=!0}}},k=function(a){a.deliberateSync=!0,this.scrollHeight>this.clientHeight&&a.stopPropagation()},l=function(a){var c=b("Event").listen(a,i(),k,null,{passive:!0}),d=!1;return{remove:function(){if(d)return;c.remove();d=!0}}};a={applyToElem:function(a){if("overscrollBehavior"in a.style){a.style.overscrollBehavior="contain";return l(a)}else{a.style.msScrollChaining!==void 0&&(a.style.msScrollChaining="none");return j(a)}}};e.exports=a}),null);
__d("UnicodeBidiService",["invariant","UnicodeBidi","UnicodeBidiDirection","UnicodeBidiGlobalDirection"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a=function(){function a(a){!a?a=b("UnicodeBidiGlobalDirection").getDir():b("UnicodeBidiDirection").isStrong(a)||g(0,3594),this.$1=a,this.reset()}var c=a.prototype;c.reset=function(){this.$2=this.$1};c.getDirection=function(a){this.$2=b("UnicodeBidi").getDirection(a,this.$2);return this.$2};return a}();e.exports=a}),null);
__d("MessageReactionMutationWebGraphQLMutation",["WebGraphQLMutationBase"],(function(a,b,c,d,e,f){"use strict";__p&&__p();e.exports=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}b.__getDocID=function(){return"1491398900900362"};b.getQueryID=function(){return"254517288326467"};return b}(b("WebGraphQLMutationBase"))}),null);
__d("MessengerBotComposerWebGraphQLQuery",["WebGraphQLQueryBase"],(function(a,b,c,d,e,f){"use strict";__p&&__p();e.exports=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}b.__getDocID=function(){return"1193572474099061"};b.getQueryID=function(){return"1132183563559860"};return b}(b("WebGraphQLQueryBase"))}),null);
__d("MessengerBusinessAutoCompleteQueryWebGraphQLQuery",["WebGraphQLQueryBase"],(function(a,b,c,d,e,f){"use strict";__p&&__p();e.exports=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}b.__getDocID=function(){return"2397726383591642"};b.getQueryID=function(){return"1369134433234452"};return b}(b("WebGraphQLQueryBase"))}),null);
__d("MessengerBusinessQuickReplyLocationQueryWebGraphQLQuery",["WebGraphQLQueryBase"],(function(a,b,c,d,e,f){"use strict";__p&&__p();e.exports=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}b.__getDocID=function(){return"2269337216466106"};b.getQueryID=function(){return"489792994894664"};return b}(b("WebGraphQLQueryBase"))}),null);
__d("MessengerBusinessUserProfileLocationQueryWebGraphQLQuery",["WebGraphQLQueryBase"],(function(a,b,c,d,e,f){"use strict";__p&&__p();e.exports=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}b.__getDocID=function(){return"2776744292399856"};b.getQueryID=function(){return"2548924041807873"};return b}(b("WebGraphQLQueryBase"))}),null);
__d("MessengerThreadThemeUpdateWebGraphQLMutation",["WebGraphQLMutationBase"],(function(a,b,c,d,e,f){"use strict";__p&&__p();e.exports=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}b.__getDocID=function(){return"1727493033983591"};b.getQueryID=function(){return"643682629309288"};return b}(b("WebGraphQLMutationBase"))}),null);
__d("MessengerViewBirthdayQueryWebGraphQLQuery",["WebGraphQLQueryBase"],(function(a,b,c,d,e,f){"use strict";__p&&__p();e.exports=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}b.__getDocID=function(){return"2274663492615448"};b.getQueryID=function(){return"471345946953742"};return b}(b("WebGraphQLQueryBase"))}),null);
__d("MessengerViewerContactMethodsWebGraphQLQuery",["WebGraphQLQueryBase"],(function(a,b,c,d,e,f){"use strict";__p&&__p();e.exports=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}b.__getDocID=function(){return"1868889766468115"};b.getQueryID=function(){return"177554543035925"};return b}(b("WebGraphQLQueryBase"))}),null);
__d("WorkChatExtensionsDrawersQueryWebGraphQLQuery",["WebGraphQLQueryBase"],(function(a,b,c,d,e,f){"use strict";__p&&__p();e.exports=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}b.__getDocID=function(){return"1696600907120234"};b.getQueryID=function(){return"148385269340310"};return b}(b("WebGraphQLQueryBase"))}),null);
__d("XChatRemoveParticipantAsyncController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/chat/remove_participants/",{elem_id:{type:"String"},uid:{type:"Int"},tid:{type:"String"}})}),null);
__d("XEventReminderController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/ajax/eventreminder/",{event_reminder_id:{type:"Int",required:!0}})}),null);
__d("XGroupCallNuxController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/groupcall/nux/",{action:{type:"String",required:!0}})}),null);
__d("XGroupsJoinChatController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/groups/join_chat/",{link_hash:{type:"String"}})}),null);
__d("XMercuryChatTabPagesNullStateConfigController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/pages/messaging/mercury/greeting/",{entry_point:{type:"Enum",enumType:1}})}),null);
__d("XMessagingBlockMessagesController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/messaging/block_messages/",{})}),null);
__d("XMessagingGroupJoinThroughHashController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/messaging/join_through_hash/",{link_hash:{type:"String"}})}),null);
__d("XMessagingGroupJoinThroughPrivateLinkController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/messaging/join_through_invite/",{link_hash:{type:"String"}})}),null);
__d("XMessagingGroupJoinableAcceptController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/messaging/joinable_accept/",{thread_fbid:{type:"String"},user_id:{type:"Int"}})}),null);
__d("XMessagingGroupJoinableRejectController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/messaging/joinable_reject/",{thread_fbid:{type:"String"},user_id:{type:"Int"}})}),null);
__d("XMessagingGroupSetApprovalController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/messaging/set_approval_mode/",{set_mode:{type:"Enum",enumType:0},thread_fbid:{type:"String"}})}),null);
__d("XMessagingJoinableLinkController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/messaging/joinable_link_action/",{action:{type:"Enum",required:!0,enumType:1}})}),null);
__d("XMessagingSaveAdminsController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/messaging/save_admins/",{thread_fbid:{type:"String"},admin_ids:{type:"FBIDSet"},add:{type:"Bool",defaultValue:!1}})}),null);
__d("XMessagingSaveGroupThreadDescriptionController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/messaging/save_group_thread_description/",{source:{type:"Enum",required:!0,enumType:1}})}),null);
__d("XMessagingSaveNicknameController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/messaging/save_thread_nickname/",{source:{type:"Enum",required:!0,enumType:1}})}),null);
__d("XMessagingSaveThreadColorController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/messaging/save_thread_color/",{source:{type:"Enum",required:!0,enumType:1}})}),null);
__d("XMessagingSaveThreadEmojiController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/messaging/save_thread_emoji/",{source:{type:"Enum",required:!0,enumType:1}})}),null);
__d("XMessagingSetThreadNameController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/messaging/set_thread_name/",{})}),null);
__d("XMessagingUnblockMessagesController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/messaging/unblock_messages/",{})}),null);
__d("XMessengerBotsMenuController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/messenger/commerce/bots/menu/",{page_id:{type:"String",required:!0}})}),null);
__d("XNFXIgnoreMessagesActionController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/nfx/ignore_messages/",{thread_fbid:{type:"Int",required:!0},location:{type:"Enum",required:!0,enumType:1},frx_context:{type:"String"},__asyncDialog:{type:"Int"}})}),null);
__d("XNFXMessengerBlockActionController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/nfx/block_messages/",{thread_fbid:{type:"Int",required:!0},responsible_id:{type:"Int"},location:{type:"Enum",required:!0,enumType:1},frx_context:{type:"String"},entry_point:{type:"Enum",required:!0,enumType:1},__asyncDialog:{type:"Int"}})}),null);
__d("XPhotosWaterfallBatchLoggingController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/photos/logging/waterfall/batch/",{})}),null);
__d("XRapidReportingDialogController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/rapid_report/",{context:{type:"String",required:!0},preselectedtagid:{type:"Enum",enumType:1},__asyncDialog:{type:"Int"}})}),null);
__d("XStickerAssetController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/stickers/asset/",{sticker_id:{type:"Int",required:!0},image_type:{type:"Enum",defaultValue:"BestEffortImage",enumType:1}})}),null);
__d("XWorkplaceMarketingDefaultController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/workplace/{?*path}/",{path:{type:"String",defaultValue:""},ref:{type:"String"}})}),null);