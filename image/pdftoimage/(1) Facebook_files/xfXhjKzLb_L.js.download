if (self.CavalryLogger) { CavalryLogger.start_js(["VF\/g3"]); }

__d("AdsLWIDefaultBudgetQEUtils",["qex"],(function(a,b,c,d,e,f){"use strict";var g=new Set(["boosted_app_install","boosted_cta","boosted_local_awareness","boosted_pagelike","boosted_real_estate_listing","boosted_website"]);function a(a){g.has(a)&&!!b("qex")._("1165600")}e.exports={maybeExposeAdsIntentDailyBudgetQE:a}}),null);
__d("MessengerProfileLinkTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(){__p&&__p();function a(){this.$1={}}var c=a.prototype;c.log=function(){b("GeneratedLoggerUtils").log("logger:MessengerProfileLinkLoggerConfig",this.$1,b("Banzai").BASIC)};c.logVital=function(){b("GeneratedLoggerUtils").log("logger:MessengerProfileLinkLoggerConfig",this.$1,b("Banzai").VITAL)};c.logImmediately=function(){b("GeneratedLoggerUtils").log("logger:MessengerProfileLinkLoggerConfig",this.$1,{signal:!0})};c.clear=function(){this.$1={};return this};c.getData=function(){return babelHelpers["extends"]({},this.$1)};c.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};c.setAction=function(a){this.$1.action=a;return this};c.setDomain=function(a){this.$1.domain=a;return this};c.setLinkLocation=function(a){this.$1.link_location=a;return this};c.setTargetID=function(a){this.$1.target_id=a;return this};c.setTime=function(a){this.$1.time=a;return this};c.setVC=function(a){this.$1.vc=a;return this};c.setWeight=function(a){this.$1.weight=a;return this};return a}();c={action:!0,domain:!0,link_location:!0,target_id:!0,time:!0,vc:!0,weight:!0};e.exports=a}),null);
__d("MessengerBootloadedLogMessage.react",["cx","BootloadOnRender.react","JSResource","LazyComponent.react","React"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){return b("React").jsx(b("BootloadOnRender.react"),{component:b("React").jsx(b("LazyComponent.react"),babelHelpers["extends"]({},this.props)),loader:b("JSResource")("MessengerLogMessage.react").__setRef("MessengerBootloadedLogMessage.react"),placeholder:b("React").jsx("div",{className:"_497p",children:"..."})})};return c}(b("React").PureComponent);e.exports=a}),null);
__d("MessengerProfileLinkAction",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({CLICK:"click",HOVER:"hover"})}),null);
__d("MessengerProfileLinkDomain",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({MESSENGER_DOT_COM:"messenger_dot_com",FB_SLASH_MESSAGES:"fb_slash_messages",WORK_CHAT:"work_chat"})}),null);
__d("MessengerProfileLinkLogger.bs",["MessengerProfileLinkTypedLogger"],(function(a,b,c,d,e,f){"use strict";function a(a,c,d,e){new(b("MessengerProfileLinkTypedLogger"))().setTargetID(a).setDomain(c).setLinkLocation(d).setAction(e).log();return 0}f.logItemImpression=a}),null);
__d("ProfileLinkReact.bs",["ReasonReact.bs","bs_js_null_undefined","ProfileLink.react"],(function(a,b,c,d,e,f){"use strict";function a(a,c,d,e,f,g,h,i){var j;return b("ReasonReact.bs").wrapJsForReason(b("ProfileLink.react"),{className:(j=b("bs_js_null_undefined")).fromOption(a),href:j.fromOption(c),onClick:j.fromOption(d),onMouseEnter:j.fromOption(e),onMouseLeave:j.fromOption(f),target:j.fromOption(g),uid:h},i)}f.make=a}),null);
__d("MessengerProfileLink.bs",["cx","URI","bs_block","bs_curry","React","Arbiter","LinkReact.bs","BadgeReact.bs","bs_caml_option","CurrentUser","ReasonReact.bs","ProfileLinkReact.bs","isMessengerDotComURI","MessengerProfileLinkAction","MessengerProfileLinkDomain","MessengerProfileLinkLogger.bs"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h,i=b("ReasonReact.bs").reducerComponent("MessengerProfileLink");function j(a,c,d,e,f,g,j){__p&&__p();var k=b("isMessengerDotComURI")(new(h||(h=b("URI")))(window.location.href));j=b("CurrentUser").isWorkUser();var l=j?b("MessengerProfileLinkDomain").WORK_CHAT:k?b("MessengerProfileLinkDomain").MESSENGER_DOT_COM:b("MessengerProfileLinkDomain").FB_SLASH_MESSAGES,m=function(a){return b("MessengerProfileLinkLogger.bs").logItemImpression(f,l,d,b("MessengerProfileLinkAction").HOVER)},n=function(a){return b("MessengerProfileLinkLogger.bs").logItemImpression(f,l,d,b("MessengerProfileLinkAction").CLICK)};return[i[0],i[1],i[2],i[3],function(a){var c=b("Arbiter").subscribe("Hovercard/show",function(c,d){return b("bs_curry")._1(a[3],0)}),d=b("Arbiter").subscribe("Hovercard/hide",function(c,d){return b("bs_curry")._1(a[3],1)});return b("bs_curry")._1(a[4],function(a){c.unsubscribe();d.unsubscribe();return 0})},i[5],i[6],i[7],function(d){var h=b("React").createElement("span",void 0,e,g?b("ReasonReact.bs").element(void 0,void 0,b("BadgeReact.bs").make("medium","verified",[])):null);return b("React").createElement("span",{className:"_6ybk"},a!==void 0?k?b("ReasonReact.bs").element(void 0,void 0,b("LinkReact.bs").make(void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,a,void 0,function(a){d[1][0]&&m(0);return n(0)},void 0,void 0,void 0,void 0,void 0,void 0,c,void 0,[h])):b("ReasonReact.bs").element(void 0,void 0,b("ProfileLinkReact.bs").make(void 0,void 0,function(a){return n(0)},void 0,function(a){a=d[1][0];if(a)return m(0);else return 0},void 0,f,[h])):h)},function(a){return[!1]},i[10],function(a,c){if(a)return b("bs_block").__(0,[[!1]]);else return b("bs_block").__(0,[[!0]])},i[12]]}a=b("ReasonReact.bs").wrapReasonForJs(i,function(a){return j(b("bs_caml_option").nullable_to_opt(a.href),a.target,a.location,a.name,a.uid,a.isVerified,[])});f.component=i;f.make=j;f.jsComponent=a}),null);
__d("TimeSpentRoomTypeEnum",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({GROUP:"GROUP",EVENT:"EVENT"})}),null);
__d("TimeSpentRoomTypeEnum$FbtEnum",[],(function(a,b,c,d,e,f){"use strict";a=Object.freeze({GROUP:"Group",EVENT:"Event"});e.exports=a}),null);
__d("MessengerContextBanner.react",["cx","fbt","Badge.react","CurrentUser","Image.react","ImageBlock.react","Link.react","MercuryParticipantsConstants","MercuryParticipantsImage.react","MercuryShareAttachmentRenderLocations","MercuryThreadImage.react","MessengerProfileLink.bs","MessengerTextWithEmoticons.react","React","TimeSpentRoomTypeEnum","TimeSpentRoomTypeEnum$FbtEnum","immutable","requireWeak"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=b("MessengerProfileLink.bs").jsComponent;a=b("React").PropTypes;var j;b("requireWeak")("MessengerThreadImageReact.bs",function(a){j=a.jsComponent});c=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){var a=b("React").jsxs(b("ImageBlock.react"),{className:"_llj"+(this.props.location===b("MercuryShareAttachmentRenderLocations").MESSENGER?" _2eu-":"")+(this.props.location===b("MercuryShareAttachmentRenderLocations").CHAT?" _2eu_":""),spacing:"large",style:this.props.style,children:[this.$1(),b("React").jsxs("div",{className:"_lll",children:[this.$2(),this.$3(),this.$4()]})]}),c=this.props.associatedObject;c&&c.action_link&&(a=b("React").jsx(b("Link.react"),{href:c.action_link,target:"_blank",style:{textDecoration:"none"},children:a}));return a};d.$1=function(){var a=this.props.location===b("MercuryShareAttachmentRenderLocations").MESSENGER,c=this.props.associatedObject,d=null;if(!this.props.contactName&&c&&a)d=b("React").jsx(b("Image.react"),{className:"_4ld- _1wrc",src:c.profile_picture});else if(this.props.thread){c=j&&a?j:b("MercuryThreadImage.react");d=b("React").jsx(c,{showBadge:!1,participants:this.props.participants,size:a?60:null,thread:this.props.thread,viewer:this.props.viewer})}else this.props.participantIDs&&(d=b("React").jsx(b("MercuryParticipantsImage.react"),{participants:this.props.participantIDs,size:b("MercuryParticipantsConstants").BIG_IMAGE_SIZE}));return b("React").jsx("div",{className:"_llk",children:d})};d.$2=function(){__p&&__p();if(this.props.location!==b("MercuryShareAttachmentRenderLocations").MESSENGER)return null;var a=this.props.isVerified?b("React").jsx(b("Badge.react"),{size:"medium",type:"verified"}):null,c=this.props.contactName;if(!c){var d=this.props.associatedObject;c=d?d.name:null}d=this.props.contactFBProfile;var e=this.props.contactID;return b("React").jsx("div",{className:"_llq",children:b("React").jsxs("span",{className:"_3oh-",children:[b("React").jsx(i,{href:d,location:"context_banner",name:c,uid:e}),a]})})};d.$3=function(){return b("React").jsx("div",{className:"_1n-e _36zg",children:b("React").jsx(b("MessengerTextWithEmoticons.react"),{text:this.props.connectionContext||"",renderEmoticons:!1})})};d.$4=function(){__p&&__p();if(!this.props.contextItems.length){var a=this.props.associatedObject;if(a){a=b("TimeSpentRoomTypeEnum")[a.room_type];var c=b("CurrentUser").isWorkUser()?"Workplace":"Facebook";return b("React").jsx("div",{className:"_1n-e",children:h._({"GROUP":"Vai al gruppo {productName}","EVENT":"Vai all'evento {productName}"},[h._param("productName",c),h._enum(a,b("TimeSpentRoomTypeEnum$FbtEnum"))])})}return null}return b("React").jsx("div",{children:this.props.contextItems.map(function(a,c){return b("React").jsx("div",{className:"_1n-e",children:b("React").jsx(b("MessengerTextWithEmoticons.react"),{text:a||"",renderEmoticons:!1})},"item:"+c)})})};return c}(b("React").PureComponent);c.propTypes={contactFBProfile:a.string,contactID:a.string,contactName:a.string,associatedObject:a.object,connectionContext:a.string,contextItems:a.arrayOf(a.string).isRequired,isVerified:a.bool,location:a.string.isRequired,participantIDs:a.arrayOf(a.string),participants:a.instanceOf(b("immutable").Map),thread:a.object,viewer:a.string.isRequired};e.exports=c}),null);
__d("XMessengerContextBannerController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/ajax/messenger/context_banner/",{profile_id:{type:"Int",required:!0},max_context_items:{type:"Int",defaultValue:3}})}),null);
__d("MessengerContextInformationStore",["AsyncRequest","EventEmitter","TimeSlice","XMessengerContextBannerController"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=new Map(),h=new Map();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){__p&&__p();var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.$MessengerContextInformationStore1=function(a){if(h.get(a))return;var c=b("XMessengerContextBannerController").getURIBuilder().setInt("profile_id",a).getURI();c=new(b("AsyncRequest"))().setAllowCrossPageTransition(!0).setURI(c).setHandler(d.$MessengerContextInformationStore2.bind(babelHelpers.assertThisInitialized(d),a));h.set(a,c);c.send()},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.getOrFetch=function(a){var c=g.get(a);c||b("TimeSlice").guard(this.$MessengerContextInformationStore1,"Chat Tab Messenger Context Banner Fetch",{propagationType:b("TimeSlice").PropagationType.ORPHAN})(a);return c};d.$MessengerContextInformationStore2=function(a,b){g.set(a,{connectionContext:b.payload.connection_context||"",contextItems:b.payload.context_items||[]}),h["delete"](a),this.emit("change")};return c}(b("EventEmitter"));e.exports=new a()}),null);
__d("PagesMessengerContextBanner.react",["cx","MercuryThreadImage.react","ProfileHeaderCoverPhoto.react","React"],(function(a,b,c,d,e,f,g){"use strict";var h=83,i=284,j=60;function a(a){var c=a.coverPhotoData?b("React").jsx(b("ProfileHeaderCoverPhoto.react"),{coverPhotoData:a.coverPhotoData,height:h,width:i}):null;return b("React").jsxs("div",{className:"_fj3",children:[c,b("React").jsxs("div",{className:"_2-0o",children:[b("React").jsx(b("MercuryThreadImage.react"),{className:"_2gye",size:j,thread:a.thread,viewer:a.viewer}),")"]})]})}e.exports=a}),null);
__d("MessengerContextBannerContainer.react",["DOMDimensions","MercuryIDs","MercuryShareAttachmentRenderLocations","MessengerContextBanner.react","MessengerContextInformationStore","MessengerParticipants.bs","PagesMessagingMercuryChatTabStore","PagesMessengerContextBanner.react","React","ReactComponentWithPureRenderMixin","ReactDOM","StoreAndPropBasedStateMixin","immutable"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=b("React").PropTypes;var g=b("React").createClass({displayName:"MessengerContextBannerContainer",mixins:[b("ReactComponentWithPureRenderMixin"),b("StoreAndPropBasedStateMixin")(b("MessengerContextInformationStore"),b("PagesMessagingMercuryChatTabStore"))],propTypes:{location:a.string.isRequired,onResize:a.func,otherUserFBIDs:a.arrayOf(a.string),thread:a.object,threadID:a.string,viewer:a.string.isRequired},statics:{calculateState:function(a){__p&&__p();var c=a.thread,d=null;c?d=c&&c.participants:a.otherUserFBIDs&&a.otherUserFBIDs.length===1&&(d=a.otherUserFBIDs.map(function(a){return b("MessengerParticipants.bs").getIDFromVanityOrFBID(a)}));var e=b("immutable").Map();d&&(e=e.withMutations(function(a){d&&d.forEach(function(c){a.set(c,b("MessengerParticipants.bs").getNow(c))})}));var f=null,h=null;c?(f=e.get(b("MercuryIDs").getParticipantIDFromFromThreadID(c.thread_id)),h=c.associated_object):f=d&&e.get(d[0]);c=b("PagesMessagingMercuryChatTabStore").getStateByThread(a.threadID);a=c.coverPhotoData;return babelHelpers["extends"]({associatedObject:h,contact:f,coverPhotoData:a,participantIDs:d,participants:e},g.getContextInformation(f&&f.fbid&&f.fbid.toString()))},getContextInformation:function(a){var c;a&&(c=b("MessengerContextInformationStore").getOrFetch(a.toString()));return c||{connectionContext:"",contextItems:[]}}},componentDidUpdate:function(){var a=b("ReactDOM").findDOMNode(this);if(!a)return;a=b("DOMDimensions").getElementDimensions(a).height;this.props.onResize&&this.props.onResize(a)},render:function(){if(!this.state.contact)return this.state.associatedObject&&this.props.location==b("MercuryShareAttachmentRenderLocations").MESSENGER?b("React").jsx(b("MessengerContextBanner.react"),{associatedObject:this.state.associatedObject,contextItems:this.state.contextItems,location:this.props.location,participantIDs:this.state.participantIDs,participants:this.state.participants,thread:this.props.thread,viewer:this.props.viewer}):null;if(this.state.contact.type==="page"){if(!this.state.connectionContext&&!this.state.contextItems.length)return null;if(this.props.location===b("MercuryShareAttachmentRenderLocations").CHAT&&this.props.thread!=null)return b("React").jsx(b("PagesMessengerContextBanner.react"),{coverPhotoData:this.state.coverPhotoData,thread:this.props.thread,viewer:this.props.viewer})}return b("React").jsx(b("MessengerContextBanner.react"),{contactFBProfile:this.state.contact.href,contactID:this.state.contact.fbid,contactName:this.state.contact.name,connectionContext:this.state.connectionContext,contextItems:this.state.contextItems,isVerified:this.state.contact.verification_status==="BLUE_VERIFIED",location:this.props.location,participantIDs:this.state.participantIDs,participants:this.state.participants,thread:this.props.thread,viewer:this.props.viewer})}});e.exports=g}),null);
__d("MessageList.react",["cx","requireCond","MercuryIDs","MercuryMessageGroup","MercuryShareAttachmentRenderLocations","MessengerDomIDs.bs","MessengerLightweightActionUtils","MessengerMessage.bs","MessengerObjectAssociationType","MessengerParticipantUtils.bs","MessengerPresenceProvider.bs","cr:832269","PagesMessageListGreeting.react","React","ReactDOM","cr:1140097","gkx","immutable","nullthrows"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("MessengerDomIDs.bs").ids,i=b("MessengerPresenceProvider.bs").jsComponent;a=b("React").PropTypes;var j=2,k=1e3*60*60,l=6,m=function(a){__p&&__p();var b;b=(b=a)!=null?(b=b.log_message_data)!=null?b.message_type:b:b;switch(b){case"group_poll":return(b=a)!=null?(b=b.log_message_data)!=null?(b=b.untypedData)!=null?b.question_id:b:b:b;case"instant_game_update":return(b=a)!=null?(b=b.log_message_data)!=null?(b=b.untypedData)!=null?b.game_id:b:b:b;case"lightweight_event_create":case"lightweight_event_update":case"lightweight_event_delete":case"lightweight_event_update_time":case"lightweight_event_update_title":case"lightweight_event_update_location":case"lightweight_event_notify_before_event":case"lightweight_event_notify":case"lightweight_event_rsvp":return(b=a)!=null?(b=b.log_message_data)!=null?(b=b.untypedData)!=null?b.event_id:b:b:b;case"confirm_friend_request":b=((b=a)!=null?(b=b.log_message_data)!=null?(b=b.untypedData)!=null?b.friend_request_subtype:b:b:b)||((b=a)!=null?(b=b.log_message_data)!=null?(b=b.untypedData)!=null?b.subtype:b:b:b);return!b||b.toLowerCase()!=="icebreaker"?null:p(a);case"messenger_icebreaker_vote_cast":return p(a);default:return null}},n=function(a){return b("MessengerLightweightActionUtils").isLWAMessage(a)?"lwa":null};c=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var b,c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.state={activeMessageID:null,messageGroups:[],prevMessages:null,newMessagesGroupIndex:Infinity,lastReadTimestamp:((b=d.props.thread)==null?void 0:b.last_read_timestamp)||Infinity,newMessagesCountForDisplay:0},d.$5=function(a){d.setState(function(b){return{activeMessageID:b.activeMessageID===a?null:b.activeMessageID}})},d.$6=function(a){d.setState({activeMessageID:a})},c)||babelHelpers.assertThisInitialized(d)}c.getDerivedStateFromProps=function(a,c){__p&&__p();if(c.prevMessages!==a.messages)if(b("cr:832269")!=null){var d=c.lastReadTimestamp;c=a.location;var e=a.messages,f=a.thread,g=b("MercuryIDs").getParticipantIDFromUserID(a.viewer);(f==null?void 0:f.snippet_sender)===g&&(d=Infinity);f=e.findLast(function(a){return a.author===g});f&&f.timestamp>d&&(d=f.timestamp);f=a.messages.filter(function(a){return a.timestamp<=d});var h=a.messages.filter(function(a){return a.timestamp>d});f=b("MercuryMessageGroup").calculateMessageGroups(f,c);c=b("MercuryMessageGroup").calculateMessageGroups(h,c);h=h.filter(function(a){return a.log_message_type==null}).size;return{messageGroups:[].concat(f,c),prevMessages:e,newMessagesGroupIndex:f.length,newMessagesCountForDisplay:h,lastReadTimestamp:d}}else return{messageGroups:b("MercuryMessageGroup").calculateMessageGroups(a.messages,a.location),prevMessages:a.messages};else return null};var d=c.prototype;d.render=function(){__p&&__p();var a=this,c=this.props,d=c.DateBreak,e=c.forGameChat,f=c.location,g=c.MessageGroup,p=c.CollapsedLogMessageGroup,u=[],v=[];c=this.props.thread&&this.props.thread.solid_color;var w=c?{backgroundColor:c}:null,x=this.state.activeMessageID,y=this.state.messageGroups,z=y.length,A=this.props.readReceipts;c=A.last();var B=c?c.watermark:0,C=b("MercuryIDs").getParticipantIDFromUserID(this.props.viewer),D={};for(var c=this.props.messages.size-1;c>=0;c--){var E=this.props.messages.get(c),F=m(E)||n(E);F&&!D[F]&&(D[F]=E.message_id)}var G=function(h){__p&&__p();var m=h>0?y[h-1]:null;m=m&&m.length>0?m[m.length-1]:null;var G=y[h],I=G[0],J=G[G.length-1],K=!1;b("cr:832269")!=null&&h>0&&h===a.state.newMessagesGroupIndex&&a.state.newMessagesCountForDisplay>0&&u.push(b("React").jsx("div",{ref:"newMessageDivider",children:b("React").jsx(b("cr:832269"),{newMessagesCount:a.state.newMessagesCountForDisplay})},"new-message-divider"));if(!m||I.timestamp-m.timestamp>k){K=!0;m=b("React").jsx(d,{date:new Date(I.timestamp),ref:"db:"+I.message_id},"db:"+I.message_id);v.length===0&&u.push(m)}m=n(I);if(m&&D[m]!==I.message_id){m=a.$1(I,D);u.push(m);return"continue"}if(I.action_type=="ma-type:log-message"){m=(F=I)!=null?(F=F.log_message_data)!=null?F.message_type:F:F;var L=(E=I)!=null?(E=E.log_message_data)!=null?(E=E.untypedData)!=null?E.friend_request_subtype:E:E:E,M=m==="parties_presence",N=m==="instant_game_update",O=m==="group_poll";L=m==="messenger_icebreaker_vote_cast"||m==="confirm_friend_request"&&L&&L.toLowerCase()==="icebreaker";var P=["lightweight_event_create","lightweight_event_update","lightweight_event_delete","lightweight_event_update_time","lightweight_event_update_title","lightweight_event_update_location","lightweight_event_notify_before_event","lightweight_event_notify","lightweight_event_rsvp"].includes(m);if((f===b("MercuryShareAttachmentRenderLocations").CHAT||f===b("MercuryShareAttachmentRenderLocations").MESSENGER)&&(I.log_message_type==="log:video-call"||I.log_message_type==="log:phone-call"||m==="messenger_call_log")){m=a.$2(I,C,y,z,h,A,B,J,D);u.push(m)}else{m=a.$3(I,D);c=I.message_id;!N&&!O&&!P&&!L&&v.push(m);if(M&&b("gkx")("678643"))return"continue";(v.length===G.length||N||O||P||L)&&(a.$4(v,u,c,w,p),v=[]);(N||O||P||L)&&u.push(m)}return"continue"}G=b("immutable").List(G);var Q=q(y,z,h,D),R=!s(A,G,Q),S=r(B,J),T=t(a.props.deliveryTimestamp,J),U=G.first().author,V=b("MessengerMessage.bs").getPersona(J),W=C===I.author;M=W?0:l+j;var X=a.props.maxBubbleWidth?a.props.maxBubbleWidth-M:null;u.push(b("React").jsx(i,{subscribeToIDs:U?[U]:null,children:function(c){return b("React").jsx(g,{activeMessageID:o(x,G),author:U,deliveryTimestamp:T,forGameChat:e,hasDateBreak:K,isCanonical:a.props.isCanonical,isFromViewer:W,isPageMessage:a.props.isPageMessage,isOnline:U?b("MessengerParticipantUtils.bs").has(c,U):!1,lastReadTimestamp:S,maxBubbleWidth:X,messages:G,nextTimestamp:Q,onAttachmentLoad:a.props.onAttachmentLoad,onMessageDeselect:a.$5,onMessageSelect:a.$6,onStickerClick:a.props.onStickerClick,onReplyToMessage:a.props.onReplyToMessage,pageID:a.props.isPageMessage===!0?a.props.viewer:null,persona:V,readReceipts:R?A:b("immutable").OrderedMap(),ref:function(b){return a.refs["mg:"+I.message_id]=b},thread:a.props.thread,threadID:a.props.threadID,scrollToRepliedMessage:a.props.scrollToRepliedMessage,rolesIDWithColor:a.props.rolesIDWithColor},"mg:"+I.message_id)}},"pp:"+I.message_id))};for(var H=0;H<z;H++){var I=G(H);if(I==="continue")continue}I=this.props.thread;G=this.props.threadID||(I==null?void 0:I.thread_id)||(I==null?void 0:I.thread_fbid);H=null;if(f===b("MercuryShareAttachmentRenderLocations").MESSENGER&&G){this.props.isPageMessage?H=b("React").jsx(b("PagesMessageListGreeting.react"),{messageCount:v.length+z,threadID:G}):b("cr:1140097")&&((I==null?void 0:I.object_association_type)===b("MessengerObjectAssociationType").GENERAL_CHAT||(I==null?void 0:I.work_associated_group)!=null)&&(I==null?void 0:(G=I.participants)==null?void 0:G.length)===1&&(H=b("React").jsx(b("cr:1140097"),{}))}return b("React").jsxs("div",{id:f===b("MercuryShareAttachmentRenderLocations").MESSENGER?h.CONVERSATION:null,children:[H,u]})};d.getNewMessageDivider=function(){return this.refs.newMessageDivider};d.getMessageElement=function(a,c){__p&&__p();if(c===!0){var d=this.refs["db:"+a];if(d)return b("ReactDOM").findDOMNode(d)}d=this.$7(a);if(!d)return null;d=d[0].message_id;var e=this.refs["mg:"+d];if(!e)return null;return c===!0&&d===a?b("ReactDOM").findDOMNode(e):e.getMessageElement(a)};d.getMessageComponent=function(a){var b=this.$7(a);if(!b)return null;b=b[0].message_id;b=this.refs["mg:"+b];return!b?null:b.getMessage(a)};d.$7=function(a){return this.state.messageGroups.find(function(b){return b.some(function(b){return b.message_id===a})})};d.$4=function(a,c,d,e,f){a.length!==0&&(a.length>1?c.push(b("React").jsx(f,{style:e,children:a},"mg:"+d)):c.push(b("React").jsx("div",{children:a},"mg:"+d)))};d.$2=function(a,c,d,e,f,g,h,j,k){__p&&__p();var l=this,m,n,o=this.props.MessageGroup;n=((n=a)!=null?(n=n.log_message_data)!=null?n.untypedData:n:n)||{};m=(m=a)!=null?(m=m.log_message_data)!=null?m.message_type:m:m;if(m==="messenger_call_log"){m={message_type:"messenger_call_log",call_capture_attachments:n.call_capture_attachments,caller:b("MercuryIDs").getParticipantIDFromUserID(b("nullthrows")(n.caller_id,"caller id")),callee:b("MercuryIDs").getParticipantIDFromUserID(b("nullthrows")(n.callee_id,"callee id")),server_info_data:n.server_info,thread_id:a.thread_fbid,answered:n.event!=="missed_call",log_message_type:n.video?"log:video-call":"log:phone-call",event:n.event,added_participants:null,removed_participants:null,untypedData:null,image:null,name:null};a=babelHelpers["extends"]({},a,{log_message_data:m})}n={attach_type:"share",share:{style_list:["rtc_call_log","fallback"],log_message_body:a.log_message_body,log_message_data:a.log_message_data,log_message_type:a.log_message_type,timestamp:a.timestamp}};m=babelHelpers["extends"]({},a,{attachments:[n],body:""});var p=b("immutable").List([m]),u=q(d,e,f,k),v=!s(g,p,u),w=r(h,j),x=t(this.props.deliveryTimestamp,j),y=p.first().author;return b("React").jsx(i,{subscribeToIDs:y?[y]:null,children:function(d){return b("React").jsx(o,{author:p.first().author,deliveryTimestamp:x,forGameChat:l.props.forGameChat,isCanonical:l.props.isCanonical,isFromViewer:c===a.author,isOnline:y?b("MessengerParticipantUtils.bs").has(d,y):!1,isPageMessage:l.props.isPageMessage,lastReadTimestamp:w,maxBubbleWidth:l.props.maxBubbleWidth,messages:p,nextTimestamp:u,onAttachmentLoad:l.props.onAttachmentLoad,onMessageDeselect:l.$5,onMessageSelect:l.$6,onStickerClick:l.props.onStickerClick,readReceipts:v?g:b("immutable").OrderedMap(),thread:l.props.thread,threadID:l.props.threadID})}},a.message_id)};d.$3=function(a,c){var d=this.props.LogMessage,e=m(a);c=e?c[e]:null;return a.log_message_type!=="log:error-msg"?b("React").jsx(d,{className:this.props.location===b("MercuryShareAttachmentRenderLocations").CHAT?"_5w0o":null,onLogMessageExpanded:this.props.onAttachmentLoad,loadMoreMessages:this.props.loadMoreMessages,message:a,onImageLoad:this.props.onAttachmentLoad,viewer:this.props.viewer,isPageMessage:this.props.isPageMessage,thread:this.props.thread,isLastOfType:c===a.message_id},a.message_id):null};d.$1=function(a,c){c=c[b("nullthrows")(n(a),"other group id first message")];var d=this.props.LogMessage;return b("React").jsx(d,{className:this.props.location===b("MercuryShareAttachmentRenderLocations").CHAT?"_5w0o":null,onLogMessageExpanded:this.props.onAttachmentLoad,loadMoreMessages:this.props.loadMoreMessages,message:a,onImageLoad:this.props.onAttachmentLoad,viewer:this.props.viewer,thread:this.props.thread,isLastOfType:c===a.message_id},a.message_id)};return c}(b("React").PureComponent);c.propTypes={CollapsedLogMessageGroup:a.func.isRequired,DateBreak:a.func.isRequired,deliveryTimestamp:a.number.isRequired,forGameChat:a.bool,isCanonical:a.bool,isPageMessage:a.bool,location:a.string.isRequired,LogMessage:a.func.isRequired,loadMoreMessages:a.func,MessageGroup:a.func.isRequired,messages:a.instanceOf(b("immutable").List).isRequired,onAttachmentLoad:a.func,onStickerClick:a.func,onReplyToMessage:a.func,readReceipts:a.instanceOf(b("immutable").OrderedMap).isRequired,viewer:a.string.isRequired,thread:a.object,threadID:a.string,scrollToRepliedMessage:a.func,rolesIDWithColor:a.any};function o(a,b){return b.find(function(b){return b.message_id===a})?a:null}function p(a){return(a=a)!=null?(a=a.log_message_data)!=null?(a=a.untypedData)!=null?a.icebreaker_type:a:a:a}function q(a,b,c,d){if(c>=b-1)return Infinity;var e=a[c+1][0],f=n(e);if(f&&d[f]!==e.message_id||((f=e)!=null?f.action_type:f)=="ma-type:log-message")return q(a,b,c+1,d);else return e.timestamp}function r(a,b){return b.timestamp>a?a:Infinity}function s(a,b,c){return b.isEmpty()||!a.isEmpty()&&(a.last().action<b.first().timestamp||a.first().action>=c)}function t(a,b){return b.timestamp>a?a:Infinity}e.exports=c}),null);
__d("EmojiSticker.react",["cx","Image.react","React","joinClasses"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a=b("React").PropTypes;c=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.componentDidMount=function(){this.props.onAttachmentLoad&&this.props.onAttachmentLoad()};d.render=function(){var a=this.props.emojiImage?this.props.emojiImage:b("React").jsx(b("Image.react"),{src:this.props.sourceURI});return b("React").jsx("div",{"aria-label":this.props.emoji,className:b("joinClasses")(this.props.className,"_383m"),tabIndex:"0",children:a})};return c}(b("React").Component);c.propTypes={emoji:a.string,emojiImage:a.any,onAttachmentLoad:a.func,sourceURI:a.string.isRequired};e.exports=c}),null);
__d("MercuryShareAttachment.react",["cx","BootloadedComponent.react","DOM","Event","FlexLayout.react","MercuryShareAttachmentReactShape","MercuryShareAttachmentRenderLocations","MercuryShareStyleMap","MessengerErrorBoundary.react","React","ReactDOM","WorkChatRedesignedMessageListCheck.re","emptyFunction","joinClasses"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a=b("React").PropTypes;c=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.$3=function(a){d.$1(a),b("DOM").scry(b("ReactDOM").findDOMNode(babelHelpers.assertThisInitialized(d)),"img").forEach(function(a){var c=b("Event").listen(a,"load",function(){d.$1(a.height),c.remove()})})},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.componentDidMount=function(){this.$1()};d.$2=function(a,c){this.props.location===b("MercuryShareAttachmentRenderLocations").MESSENGER&&!this.props.isSubattachment&&(c=b("joinClasses")((b("WorkChatRedesignedMessageListCheck.re").enabled?"":"_52mr")+" _2poz _ui9","_4skb",c));return b("React").jsxs("div",{className:c,children:[a,this.props.afterDecorators!=null&&this.props.afterDecorators.length>1?b("React").jsx(b("FlexLayout.react"),{align:"center",className:"_7moe",children:this.props.afterDecorators}):this.props.afterDecorators]})};d.render=function(){var a=b("MercuryShareStyleMap").getStyleFactory(this.props.attachment);if(!a)return null;var c=a.attachment;a=a.factory;return this.$2(b("React").jsx(b("MessengerErrorBoundary.react"),babelHelpers["extends"]({},this.props,{component:"attachment",children:b("React").createElement(b("BootloadedComponent.react"),babelHelpers["extends"]({},this.props,{attachment:c,bootloadLoader:a.componentLoader,bootloadPlaceholder:b("React").jsx("div",{}),key:(c=this)!=null?(c=c.props)!=null?(c=c.attachment)!=null?c.share_id:c:c:c,module:a.componentName,onComponentLoad:this.$3}))})),a.cx&&a.cx.get(this.props.location))};d.$1=function(a){this.props.onComponentLoaded(a)};return c}(b("React").Component);c.propTypes={attachment:b("MercuryShareAttachmentReactShape"),isFromViewer:a.bool,isPageMessage:a.bool,isSponsored:a.bool,isSubattachment:a.bool,isVisible:a.bool,location:a.oneOf(b("MercuryShareAttachmentRenderLocations").getValues()),messageID:a.string,onComponentLoaded:a.func.isRequired,onSelect:a.func,pageID:a.string,threadID:a.string.isRequired,afterDecorators:a.array,timestamp:a.number,author:a.string};c.defaultProps={onComponentLoaded:b("emptyFunction")};e.exports=c}),null);
__d("MessengerFileAttachment.bs",["cx","React","LinkReact.bs","ReasonReact.bs"],(function(a,b,c,d,e,f,g){"use strict";function a(a){a=a.attachment;var c=a.name;c=c==null?null:c;a=a.url.toString();return b("ReasonReact.bs").element(void 0,void 0,b("LinkReact.bs").make(void 0,void 0,void 0,"_4pcn _2uf4",void 0,void 0,void 0,void 0,void 0,a,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,"_blank",void 0,[b("React").createElement("div",{className:"_2uf5"}),c]))}c=a;f.make=c}),null);
__d("MessengerFileAttachment.re",["MessengerFileAttachment.bs"],(function(a,b,c,d,e,f){(function(a){return null});a=b("MessengerFileAttachment.bs").make;f.make=a}),null);
__d("MessagesViewerSetID",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({MESSAGES:"messages",MESSAGES_VIEW_ALL_IN_THREAD:"messages:view_all_in_thread"})}),null);
__d("MessengerBusinessHideImageBootloaded.react",["cx","CssBackgroundImage.react","ErrorBoundary.react","JSResource","React","lazyLoadComponent"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("lazyLoadComponent")(b("JSResource")("MessengerBusinessHideImage.react").__setRef("MessengerBusinessHideImageBootloaded.react"));a=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){var a;return(a=b("React")).jsx(b("ErrorBoundary.react"),{children:a.jsx(a.Suspense,{fallback:a.jsx(b("CssBackgroundImage.react"),{backgroundPosition:"center",imageURI:this.props.thumbnail,className:"_3v3t"}),children:a.jsx(h,{fbid:this.props.fbid,renderSmall:this.props.renderSmall})})})};return c}(b("React").Component);e.exports=a}),null);
__d("SphericalPhotoViewerInMessengerThreadBootloaded.react",["cx","BootloadedComponent.react","CssBackgroundImage.react","JSResource","React"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){__p&&__p();if(this.props.photoEncodings&&this.props.thumbnail){var a=this.props.photoEncodings.find(function(a){return a.projection_type==="perspective"}),c=null,d=null;if(a&&a.thumbnails&&a.thumbnails.length>0){a=a.thumbnails;c=a[0]?a[0].uri:null;d=a[1]?a[1].uri:null}if(this.props.useRenderer&&this.props.width&&this.props.height&&this.props.fbid){a=d||c||this.props.thumbnail;return b("React").jsx(b("BootloadedComponent.react"),{bootloadLoader:b("JSResource")("SphericalPhotoViewerInMessengerThreadWrapper.react").__setRef("SphericalPhotoViewerInMessengerThreadBootloaded.react"),bootloadPlaceholder:b("React").jsx(b("CssBackgroundImage.react"),{backgroundPosition:"center",imageURI:a,className:"_3v3t"}),height:this.props.height,width:this.props.width,fbid:this.props.fbid,thumbnail:a,photoEncodings:this.props.photoEncodings,isVisible:this.props.isVisible,onClickHandler:this.props.onClickHandler})}else{a=c||d||this.props.thumbnail;return b("React").jsx(b("BootloadedComponent.react"),{bootloadLoader:b("JSResource")("SphericalPhotoMessengerThumbnail.react").__setRef("SphericalPhotoViewerInMessengerThreadBootloaded.react"),bootloadPlaceholder:b("React").jsx(b("CssBackgroundImage.react"),{backgroundPosition:"center",imageURI:a,className:"_3v3t"}),photoEncodings:this.props.photoEncodings,thumbnail:a})}}return null};return c}(b("React").Component);e.exports=a}),null);
__d("MessengerSphericalPhotoReact.bs",["Utils.bs","ReasonReact.bs","bs_js_null_undefined","SphericalPhotoViewerInMessengerThreadBootloaded.react"],(function(a,b,c,d,e,f){"use strict";function a(a,c,d,e,f,g,h,i,j){var k;return b("ReasonReact.bs").wrapJsForReason(b("SphericalPhotoViewerInMessengerThreadBootloaded.react"),{height:(k=b("bs_js_null_undefined")).fromOption(a),width:k.fromOption(c),fbid:k.fromOption(d),thumbnail:k.fromOption(e),photoEncodings:k.fromOption(f),isVisible:b("Utils.bs").optionBoolToBool(g),onClickHandler:h,useRenderer:i},j)}f.make=a}),null);
__d("MessengerThreadSharedMediaAfterWebGraphQLQuery",["WebGraphQLQueryBase"],(function(a,b,c,d,e,f){"use strict";__p&&__p();e.exports=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}b.__getDocID=function(){return"1668947383157276"};b.getQueryID=function(){return"515216185516880"};return b}(b("WebGraphQLQueryBase"))}),null);
__d("MessengerThreadSharedMediaBeforeWebGraphQLQuery",["WebGraphQLQueryBase"],(function(a,b,c,d,e,f){"use strict";__p&&__p();e.exports=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}b.__getDocID=function(){return"1712143858865110"};b.getQueryID=function(){return"1694317194012102"};return b}(b("WebGraphQLQueryBase"))}),null);
__d("MessengerThreadSharedMediaFindWebGraphQLQuery",["WebGraphQLQueryBase"],(function(a,b,c,d,e,f){"use strict";__p&&__p();e.exports=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}b.__getDocID=function(){return"1933185426727404"};b.getQueryID=function(){return"237087923629184"};return b}(b("WebGraphQLQueryBase"))}),null);
__d("MessengerSharedMediaStore",["FluxReduceStore","MessengerFluxReduceDispatcher","MessengerSharedMediaActions","MessengerSharedMediaReducer","MessengerSharedMediaState"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=Object.keys(b("MessengerSharedMediaReducer"));a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.getInitialState=function(){return new(b("MessengerSharedMediaState"))()};d.reduce=function(a,c){if(c.namespace!==b("MessengerSharedMediaActions").Namespace)return a;g.forEach(function(d){a=b("MessengerSharedMediaReducer")[d](a,c)});return a};return c}(b("FluxReduceStore"));a.__moduleID=e.id;e.exports=new a(b("MessengerFluxReduceDispatcher"))}),null);
__d("MessengerPhotoViewCloseLinkReact.bs",["cx","fbt","React","TooltipLink.react"],(function(a,b,c,d,e,f,g,h){"use strict";function a(a){a=a.onClick;var c=b("React").jsx("span",{children:h._("Premi Esc per chiudere")});return b("React").jsx(b("TooltipLink.react"),{children:b("React").jsx("div",{className:"_387s"}),className:"_51ok _50-m _51an",onClick:a,tooltip:c})}c=a;f.make=c}),null);
__d("MessengerPhotoViewCloseLinkReact.re",["MessengerPhotoViewCloseLinkReact.bs"],(function(a,b,c,d,e,f){(function(a){return null});a=b("MessengerPhotoViewCloseLinkReact.bs").make;f.make=a}),null);
__d("MessengerSharedPhotosAlbumViewPhotoReact.bs",["fbt","bs_curry","React","cssURL","bs_belt_Option","bs_caml_option"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a=b("React").forwardRef(function(a,c){var d=a.className,e=a.fbid,f=a.onClick,h=a.uri;a=a.children;a={children:a,"aria-label":g._("Foto"),className:d,style:{backgroundImage:b("cssURL")(h)},href:"#",onClick:function(a){return b("bs_curry")._1(f,e)}};d=b("bs_belt_Option").map(c==null?void 0:b("bs_caml_option").some(c),function(a){return a});d!==void 0&&(a.ref=b("bs_caml_option").valFromOption(d));return b("React").jsx("a",a)});f.make=a}),null);
__d("MessengerSharedPhotosAlbumViewVScrollReact.bs",["cx","FBID.bs","bs_curry","React","bs_string","ReactDOM","Animation","bs_caml_array","bs_caml_option","ReasonReact.bs","setInterval","clearInterval","bs_caml_builtin_exceptions","MessengerSharedMediaActions","MessengerSharedPhotosAlbumViewPhotoReact.bs"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();function h(a){var c=a[1],d=c.length;if(d<48){b("MessengerSharedMediaActions").loadMorePrevious(a[0],b("bs_caml_array").caml_array_get(c,c.length-1|0).cursor,48);return 0}else return 0}function i(a){if(a!==void 0){a=b("bs_caml_option").valFromOption(a);return(a.scrollTop+a.clientHeight|0)>=(a.scrollHeight-20|0)}else throw b("bs_caml_builtin_exceptions").not_found}function j(a){if(a!==void 0)return b("bs_caml_option").valFromOption(a).scrollTop<=20;else throw b("bs_caml_builtin_exceptions").not_found}function k(a){if(a!==void 0)return b("bs_caml_option").valFromOption(a).clientHeight;else throw b("bs_caml_builtin_exceptions").not_found}function l(a,c){if(a!==void 0){new(b("Animation"))(b("bs_caml_option").valFromOption(a)).to("scrollTop",c).duration(200).go();return 0}else return 0}function m(a){var c=a[2][0];if(c!==void 0)return l(a[1][0],b("ReactDOM").findDOMNode(b("bs_caml_option").valFromOption(c)).offsetTop-70|0);else return 0}function n(a,c){__p&&__p();a=c[2];var d=a[3],e=a[1],f=a[0];c=c[1];var g=e.length;if(i(c[1][0]))if(g<a[2]&&!d.prev){b("MessengerSharedMediaActions").loadMorePrevious(f,b("bs_caml_array").caml_array_get(e,e.length-1|0).cursor,48);return 0}else return 0;else if(j(c[1][0])&&!d.latest){b("MessengerSharedMediaActions").loadMoreLatest(f,b("bs_caml_array").caml_array_get(e,0).cursor,48);return 0}else return 0}function o(a){__p&&__p();var c=a[1],d=c[1][0];if(d!==void 0){var e=b("bs_curry")._1(a[0],n);b("bs_caml_option").valFromOption(d).addEventListener("scroll",e);b("bs_curry")._1(a[4],function(a){a=c[1][0];if(a!==void 0)return b("bs_caml_option").valFromOption(a).removeEventListener("scroll",e);else return 0})}h(a[2]);d=function(a){__p&&__p();if(k(c[3][0])>0){m(c);a=c[0][0];if(a!==void 0){b("clearInterval")(b("bs_caml_option").valFromOption(a));c[0][0]=void 0;return 0}else return 0}else return 0};c[0][0]=b("bs_caml_option").some(b("setInterval")(d,200));return 0}function p(a){a=a[1][0][0];if(a!==void 0){b("clearInterval")(b("bs_caml_option").valFromOption(a));return 0}else return 0}var q=b("ReasonReact.bs").reducerComponentWithRetainedProps("MessengerSharedPhotosAlbumViewVScrollReact");function r(a,c){c[1][1][0]=a==null?void 0:b("bs_caml_option").some(a);return 0}function s(a,c){c[1][3][0]=a==null?void 0:b("bs_caml_option").some(a);return 0}function t(a,c){c[1][2][0]=a==null?void 0:b("bs_caml_option").some(a);return 0}function u(a,c,d,e,f,g,h){__p&&__p();var i=function(a){__p&&__p();return d.map(function(d){__p&&__p();d=d.node;var e=d.photo_encodings;e=e==null?!1:e.length!==0;var f=d.photo_encodings,h,i=0;if(e&&!(f==null)){f=f.find(function(a){return a.projection_type==="perspective"});if(f!==void 0){f=f.thumbnails;if(f.length!==0)h=f[0].uri;else{f=d.image1;h=f==null?void 0:f.uri}}else{f=d.image1;h=f==null?void 0:f.uri}}else i=1;if(i===1){f=d.image1;h=f==null?void 0:f.uri}if(h!==void 0){i=d.legacy_attachment_id===g;f={className:"_3bly"+(e?" _3603":""),fbid:b("FBID.bs").ofStringExn(d.legacy_attachment_id),onClick:c,uri:h,children:b("React").createElement("div",{key:b("bs_string").concat("_",[d.legacy_attachment_id,["spherical_gradient",0]]),className:e?"_64ks":""})};e=i?b("bs_curry")._1(a[0],t):void 0;e!==void 0&&(f.ref=b("bs_caml_option").valFromOption(e));return b("React").jsx(b("MessengerSharedPhotosAlbumViewPhotoReact.bs").make,f,d.legacy_attachment_id)}else return null})};return[q[0],q[1],q[2],q[3],o,q[5],p,q[7],function(a){return b("React").createElement("div",{ref:b("bs_curry")._1(a[0],r),className:"_3xo8",onScroll:b("bs_curry")._1(a[0],n)},b("React").createElement("div",{ref:b("bs_curry")._1(a[0],s),className:"_3xoa"},i(a)))},function(a){return[[void 0],[void 0],[void 0],[void 0]]},[e,d,f,a],function(a,b){return 0},q[12]]}a=b("ReasonReact.bs").wrapReasonForJs(q,function(a){return u(a.isLoading,a.onClick,a.sharedPhotos,a.threadID,a.totalCount,a.viewedPhoto,[])});c=200;d=48;e=6;g=20;var v=70;f.animationDuration=c;f.imagesToLoad=d;f.photosPerRow=e;f.scrollToEdgeTolerance=g;f.headerHeight=v;f.graduallyLoadPhotos=h;f.isScrolledToBottom=i;f.isScrolledToTop=j;f.getScrollHeight=k;f.scrollTo=l;f.autoScrollWhenLoaded=m;f.handleScroll=n;f.didMount=o;f.willUnmount=p;f.component=q;f.setRefChildContainer=r;f.setRefScrollable=s;f.setRefChild=t;f.make=u;f.jsComponent=a}),null);
__d("MessageShareType",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({IMAGE:"image",PLATFORM_SHARE_CTA:"platform_share_CTA"})}),null);
__d("XMessagingForwardAttachmentController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/mercury/attachments/forward/",{})}),null);
__d("XMessengerPlatformShareCTAController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/messages/platform/share/",{})}),null);
__d("MessengerPhotoViewBottomBarReact.bs",["cx","React"],(function(a,b,c,d,e,f,g){"use strict";function a(a){a=a.children;return b("React").jsx("div",{children:a,className:"_51an _50-m _16zz"})}c=a;f.make=c}),null);
__d("MessengerPhotoViewBottomBarReact.re",["MessengerPhotoViewBottomBarReact.bs"],(function(a,b,c,d,e,f){(function(a){return null});a=b("MessengerPhotoViewBottomBarReact.bs").make;f.make=a}),null);
__d("MessengerSharedPhotoReact.bs",["cx","fbt","bs_curry","React","LinkReact.bs","bs_caml_option","ReasonReact.bs","CssBackgroundImageReact.bs"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i={height:"100%"};function a(a){__p&&__p();var c=a.className,d=a.fbid,e=a.onClick,f=a.uri;a=a.isSpherical;var g=function(a){a.preventDefault();return b("bs_curry")._1(e,d)},j=h._("foto");if(f!==void 0){f=f;a=a?b("React").createElement("div",{className:"_3603 _64ks"}):null;return b("ReasonReact.bs").element(void 0,void 0,b("LinkReact.bs").make(void 0,void 0,j,c,void 0,void 0,void 0,void 0,void 0,f,void 0,g,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,[b("ReasonReact.bs").element(void 0,void 0,b("CssBackgroundImageReact.bs").make(c,f,"center",void 0,void 0,b("bs_caml_option").some(i))([a]))]))}else return b("ReasonReact.bs").element(void 0,void 0,b("LinkReact.bs").make(void 0,void 0,j,c,void 0,void 0,void 0,void 0,void 0,void 0,void 0,g,void 0,void 0,"button",void 0,void 0,void 0,void 0,void 0,[]))}c=a;f.style100pct=i;f.make=c}),null);
__d("MessengerSharedPhotoReact.re",["MessengerSharedPhotoReact.bs"],(function(a,b,c,d,e,f){(function(a){return null});a=b("MessengerSharedPhotoReact.bs").make;f.make=a}),null);
__d("XForwardingNUXSeenController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/chat/forwarding_nux_seen/",{})}),null);
__d("MessagingForwardingButtonNUX.react",["AsyncRequest","ChatConfig","React","XForwardingNUXSeenController","XUIAmbientNUX.react"],(function(a,b,c,d,e,f){__p&&__p();a=b("React").PropTypes;c=function(a){"use strict";__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){__p&&__p();var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.state={showNUX:!b("ChatConfig").get("seen_forwarding_nux")},d.$1=function(){if(!d.state.showNUX)return;b("ChatConfig").set("seen_forwarding_nux",!0);new(b("AsyncRequest"))(b("XForwardingNUXSeenController").getURIBuilder().getURI()).send();d.setState({showNUX:!1})},d.close=function(){d.$1()},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.render=function(){return b("React").jsx(b("XUIAmbientNUX.react"),{contextRef:this.props.contextRef,onCloseButtonClick:this.$1,position:"left",width:"auto",shown:this.state.showNUX,children:this.props.children})};return c}(b("React").Component);c.propTypes={contextRef:a.func.isRequired};e.exports=c}),null);
__d("SpotlightViewerBottomBarLink",["cx","Link.react","React"],(function(a,b,c,d,e,f,g){__p&&__p();a=function(a){"use strict";babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){var a=this.props.className||"_4_8j _4_8k";return b("React").jsx(b("Link.react"),babelHelpers["extends"]({},this.props,{className:a,children:this.props.children}))};return c}(b("React").Component);e.exports=a}),null);
__d("XMessagingVideoAttachmentController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/mercury/attachments/video/",{video_id:{type:"String",required:!0},video_container_id:{type:"String",required:!0},width:{type:"Int",required:!0},height:{type:"Int",required:!0},start_muted:{type:"Bool",defaultValue:!1},no_fullscreen:{type:"Bool",defaultValue:!1},load_player_controller:{type:"Bool",defaultValue:!1},hide_controls_on_finish:{type:"Bool",defaultValue:!1},hide_url_menu_option:{type:"Bool",defaultValue:!1},is_share:{type:"Bool",defaultValue:!1},render_play_button:{type:"Bool",defaultValue:!1},start_timestamp:{type:"Int",defaultValue:0},native_thumbnail:{type:"Bool",defaultValue:!1}})}),null);
__d("MessagingForwardAttachmentDialog.react",["BootloadOnRender.react","JSResource","LazyComponent.react","React"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){return b("React").jsx(b("BootloadOnRender.react"),{component:b("React").jsx(b("LazyComponent.react"),babelHelpers["extends"]({},this.props)),loader:b("JSResource")("MessagingForwardAttachmentDialogImpl.react").__setRef("MessagingForwardAttachmentDialog.react"),placeholder:b("React").jsx("div",{})})};return c}(b("React").PureComponent);e.exports=a}),null);
__d("XMessagingPhotoDownloadController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/mercury/attachments/photo/",{photo_id:{type:"String",required:!0}})}),null);
__d("XMessagingShareAttachmentDialogController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/mercury/attachments/share/dialog/",{__asyncDialog:{type:"Int"}})}),null);
__d("SpotlightMercurySharedMediaViewer.react",["csx","cx","fbt","invariant","ActorURI","AsyncDialog","AsyncRequest","BootloadedComponent.react","ChatPhotoViewFooterHScroll.react","ChatPhotoViewHeader.react","Event","FunnelLogger","JSResource","KeyEventController","MessagingForwardAttachmentDialog.react","MessengerThreadSharedMediaHelper","MessengerVideoPlayer.react","Parent","PhotoUtils","React","SpotlightMessagesViewerPagers.react","SpotlightViewer","SpotlightViewerImage","SpotlightViewport","SubscriptionsHandler","Vector","XMessagingPhotoDownloadController","XMessagingShareAttachmentDialogController","lazyLoadComponent"],(function(a,b,c,d,e,f,g,h,i,j){"use strict";__p&&__p();a=b("React").PropTypes;var k=88,l=30,m="WWW_MESSENGER_SHARE_TO_FB_FUNNEL",n="_4-og";c=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){__p&&__p();var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.$1=void 0,d.$2=[],d.state={hasPrevPage:!1,hasNextPage:!1,firstPhotoLoaded:!1,isLoading:!1,mediaData:[],numberInOneBatch:l,photoData:null,showForward:!1,showInfo:!1,stageDimensions:new(b("Vector"))()},d.$11=function(){return!d.state.photoData?null:b("React").jsx(b("ChatPhotoViewFooterHScroll.react"),{onScroll:d.$18,photoID:d.state.photoData.node.id,sharedPhotos:d.state.mediaData,updateNumberInOneBatch:d.$19,width:d.state.stageDimensions.x})},d.$19=function(a){d.setState({numberInOneBatch:a})},d.$18=function(a){if(!d.state.mediaData||d.state.isLoading)return;var b=d.state.mediaData.findIndex(function(b){return b.node.legacy_attachment_id===a});if(b<0)return;var c=d.state.mediaData[b];d.setState({photoData:c});d.$22(b)},d.$5=function(a,c){__p&&__p();if(d.state.photoData==null||d.state.isLoading)return;if(c&&!!b("Parent").bySelector(c.target,"._170l"))return;c&&c.target instanceof HTMLElement&&c.target.className===n&&d.$10();c=d.state.mediaData.findIndex(function(a){d.state.photoData!=null||j(0,1033);return a.node.legacy_attachment_id===d.state.photoData.node.legacy_attachment_id});if(c<0||c===d.state.mediaData.length-1&&!d.state.hasNextPage&&a)return;if(c===0&&!a){d.setState({isLoading:!0},function(){return d.$7(d.state.photoData,1,function(b){if(b===0)return;d.$5(a)})});return}var e=a?d.state.mediaData[c+1]:d.state.mediaData[c-1];d.setState({photoData:e});d.$22(c)},d.$10=function(){if(d.props.photoID===null)return;d.setState({photoData:null});d.props.onClosePhotoView()},d.$16=function(){d.setState({showForward:!0})},d.$20=function(){d.setState({showForward:!1})},d.$15=function(){d.setState({showInfo:!0})},d.$21=function(){d.setState({showInfo:!1})},d.$17=function(){d.setState({showForward:!1,showInfo:!1});b("FunnelLogger").appendAction(m,"click");var a=d.state.photoData;if(!d.$14()||!(a&&a.node))return;a=a.node.legacy_attachment_id;var c=b("XMessagingShareAttachmentDialogController").getURIBuilder().getURI();c=new(b("AsyncRequest"))(c).setData({attachment_id:a}).setMethod("POST");b("AsyncDialog").send(c)},d.$23=function(a,b,c){__p&&__p();var e=Object.keys(a)[0];a=a[e].message_shared_media;e=a.page_info;var f=a.edges.length;if(f!==0){var g=d.state.mediaData;switch(b){case 0:d.setState({photoData:a.edges[0],mediaData:[a.edges[0]],firstPhotoLoaded:!0});break;case 1:g=g.concat(a.edges);d.setState({hasNextPage:e.has_next_page,mediaData:g});break;case-1:g=a.edges;g=g.concat(d.state.mediaData);d.setState({mediaData:g,hasPrevPage:e.has_previous_page});break}}d.setState({isLoading:!1});c(f)},d.$3=function(){var a=new(b("Vector"))(b("Vector").getViewportDimensions().x,b("Vector").getViewportDimensions().y-k);return a},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.getDefaultProps=function(){return{enableShareToFB:!1}};d.componentDidMount=function(){__p&&__p();var a=this;this.setState({isLoading:!0,stageDimensions:this.$3()},function(){return a.$4(a.props.photoID)});this.$1=new(b("SubscriptionsHandler"))();this.$1.addSubscriptions(b("Event").listen(window,"resize",function(){a.setState({stageDimensions:a.$3()})}),b("KeyEventController").registerKey("LEFT",function(){a.$5(!1);return!1}),b("KeyEventController").registerKey("RIGHT",function(){a.$5(!0);return!1}));this.props.enableShareToFB&&b("FunnelLogger").startFunnel(m)};d.UNSAFE_componentWillUpdate=function(a,b){var c=this;b.firstPhotoLoaded!==this.state.firstPhotoLoaded&&this.setState({isLoading:!0},function(){c.$6(b.photoData,b.numberInOneBatch,function(){}),c.$7(b.photoData,b.numberInOneBatch,function(){})});b.numberInOneBatch!=this.state.numberInOneBatch&&!b.isLoading&&this.setState({isLoading:!0},function(){return c.$6(b.mediaData[b.mediaData.length-1],b.numberInOneBatch,function(){})})};d.componentWillUnmount=function(){this.$1&&this.$1.release(),this.$1=null,this.$2.forEach(function(a){return a.abandon()})};d.render=function(){var a=this,c=this.$8(),d=this.state.stageDimensions,e=this.state.isLoading||this.props.useloadingindicator&&!this.state.photoData;if(this.state.photoData==null)return null;var f=this.state.mediaData.findIndex(function(b){a.state.photoData!=null||j(0,1033);return b.node.id===a.state.photoData.node.id});f=b("React").jsxs("div",{children:[this.$9(),this.props.disablepaging?null:b("React").jsx(b("SpotlightMessagesViewerPagers.react"),{disablePrevArrow:f<=0&&!this.state.hasPrevPage,disableNextArrow:!this.state.hasNextPage&&f>=this.state.mediaData.length-1})]});return b("React").jsxs("span",{children:[b("React").jsxs(b("SpotlightViewer"),{className:"_53vs",onHide:this.$10,open:this.props.photoID!==null,ref:"spotlightViewer",rootClassName:this.props.rootClassName,children:[b("React").jsx(b("SpotlightViewport"),{active:!1,fadeInNOut:!0,media:c,onClick:this.$5,ref:"viewport",showLoadingIndicator:e,stageDimensions:d,useWidth:!0,children:f}),this.$11()]}),this.$12(),this.$13()]})};d.$9=function(){if(!this.state.photoData)return null;var a=this.state.photoData;a=a.node.legacy_attachment_id;a=b("XMessagingPhotoDownloadController").getURIBuilder().setString("photo_id",a).getURI();this.props.actorid&&(a=b("ActorURI").create(a,this.props.actorid));return b("React").jsx(b("ChatPhotoViewHeader.react"),{disableForward:this.props.disableForward,enableShareToFB:this.$14(),onClose:this.$10,openInfo:this.$15,ref:"photoviewheader",showForwardDialog:this.$16,showShareDialog:this.$17,url:a})};d.$12=function(){if(!this.state.photoData||!this.state.showForward)return null;var a=i._("Inoltra in messaggi separati");return b("React").jsx(b("MessagingForwardAttachmentDialog.react"),{attachmentID:this.state.photoData.node.legacy_attachment_id,onClose:this.$20,shown:this.state.showForward,title:a})};d.$13=function(){return this.state.showInfo?b("React").jsx(b("React").Suspense,{fallback:b("React").jsx("div",{}),children:b("React").jsx(o,{closeInfo:this.$21,infoOpen:this.state.showInfo,photoID:this.state.photoData.node.id})}):b("React").jsx("xhp",{})};d.$14=function(){var a=this.state.photoData;return!a?!1:!!this.props.enableShareToFB&&a.node.__typename==="MessageImage"&&a.node.image1.uri.indexOf(".gif")<0};d.$22=function(a){var b=this,c=this.state.numberInOneBatch,d=this.state.mediaData;a<=c/2?this.setState({isLoading:!0},function(){return b.$7(d[0],c,function(){})}):a>=d.length-c/2&&this.state.hasNextPage&&this.setState({isLoading:!0},function(){return b.$6(d[d.length-1],c,function(){})})};d.$4=function(a){var c=this;a=b("MessengerThreadSharedMediaHelper").search(this.props.threadID,String(a),function(a){return c.$23(a,0,function(){})});this.$2.push(a)};d.$6=function(a,c,d){var e=this;a=b("MessengerThreadSharedMediaHelper").loadMorePrevious(this.props.threadID,a.cursor,c||1,function(a){return e.$23(a,1,d)});this.$2.push(a)};d.$7=function(a,c,d){var e=this;a=a?a.cursor:null;a=b("MessengerThreadSharedMediaHelper").loadMoreLatest(this.props.threadID,a,c||1,function(a){return e.$23(a,-1,d)});this.$2.push(a)};d.$8=function(){__p&&__p();if(this.state.photoData&&this.state.photoData.node){var a=this.state.photoData.node;if(a.__typename&&a.__typename==="MessageVideo")return this.$24();var d=this.state.stageDimensions,e=this.$25(a,d);if(!e)return null;if(a.photo_encodings&&a.photo_encodings.length!==0)return this.$26(a.legacy_attachment_id,e,a.photo_encodings,d);a=c.getImageDimensionsForStage(new(b("Vector"))(e.width,e.height),d);return this.$27(e,a)}else return null};d.$24=function(){return this.state.photoData?b("React").jsx(b("MessengerVideoPlayer.react"),{isOnStage:!0,isVisible:!0,videoData:this.state.photoData.node,stageDimensions:this.state.stageDimensions}):null};d.$27=function(a,c){return b("React").jsx(b("SpotlightViewerImage"),{dimensions:c,ref:"image",src:a.uri})};d.$26=function(a,c,d,e){return b("React").jsx(b("BootloadedComponent.react"),{bootloadLoader:b("JSResource")("SpotlightViewerSphericalPhoto.react").__setRef("SpotlightMercurySharedMediaViewer.react"),bootloadPlaceholder:b("React").jsx("div",{}),height:e.y,width:e.x,fbid:a,thumbnail:c.uri,photoEncodings:d,stageDimensions:this.state.stageDimensions})};d.$25=function(a,c){var d=null;a=b("PhotoUtils").getImagesFromData(a);a=a.sort(function(a,b){return a.width==null?b.width==null?0:1:b.width==null?-1:b.width-a.width});window.devicePixelRatio&&window.devicePixelRatio>1&&(c=new(b("Vector"))(c.x*window.devicePixelRatio,c.y*window.devicePixelRatio));for(var e=0;e<a.length;e++)(!d||a[e].width>=c.x||a[e].height>=c.y)&&(d=a[e]);return d};return c}(b("React").Component);c.propTypes={disableForward:a.bool,enableShareToFB:a.bool,onClosePhotoView:a.func,photoID:a.string,rootClassName:a.string,threadID:a.string};c.getImageDimensionsForStage=function(a,c){var d=a.x;a=a.y;var e=c.x;c=c.y;var f=d/a,g=e/c;d>=e||a>=c?g<f?(d=e,a=Math.round(e/f)):g>f?(d=Math.round(c*f),a=c):(d=e,a=c):f<g?d=Math.round(a*f):a=Math.round(d/f);return new(b("Vector"))(d,a)};var o=b("lazyLoadComponent")(b("JSResource")("MessengerPhotoInfoDialogContainer.react").__setRef("SpotlightMercurySharedMediaViewer.react"));e.exports=c}),null);
__d("SpotlightMessengerSharedMediaViewer.react",["csx","cx","fbt","invariant","ActorURI","BootloadedComponent.react","Event","JSResource","KeyEventController","MessengerForwardAttachmentDialogReact.bs","MessengerPhotoViewBottomBarReact.re","MessengerPhotoViewHeader.react","MessengerPhotoViewHScroll.react","MessengerSharedMediaActions","MessengerVideoPlayer.react","Parent","PhotoUtils","React","ScriptPath","SpotlightMessagesViewerPagers.react","SpotlightViewer","SpotlightViewerImage","SpotlightViewport","SubscriptionsHandler","Vector","XMessagingPhotoDownloadController","lazyLoadComponent"],(function(a,b,c,d,e,f,g,h,i,j){"use strict";__p&&__p();var k=b("MessengerForwardAttachmentDialogReact.bs").jsComponent,l=b("MessengerPhotoViewBottomBarReact.re").make;a=b("React").PropTypes;var m=88,n=80,o=30,p="_4-og";c=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){__p&&__p();var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.$1=void 0,d.$2=[],d.state={photoData:null,showForward:!1,showInfo:!1,stageDimensions:new(b("Vector"))()},d.$14=function(a){if(!d.props.sharedMedia)return;var b=d.props.sharedMedia.findIndex(function(b){return b.node.legacy_attachment_id===a});if(b<0)return;var c=d.props.sharedMedia[b];d.setState({photoData:c});d.$17(b)},d.$4=function(a,c){__p&&__p();if(d.state.photoData==null)return;var e=d.state.photoData;if(c&&!!b("Parent").bySelector(c.target,"._170l"))return;c&&c.target instanceof HTMLElement&&c.target.className===p&&d.$7();c=d.props.sharedMedia.findIndex(function(a){return a.node.legacy_attachment_id===e.node.legacy_attachment_id});if(c<0||c===d.props.sharedMedia.length-1&&!d.props.hasNextPage&&a)return;if(c===0&&!a){b("MessengerSharedMediaActions").loadMoreLatest(d.props.threadID,d.props.sharedMedia[0].cursor,o);return}a=a?d.props.sharedMedia[c+1]:d.props.sharedMedia[c-1];d.setState({photoData:a});d.$17(c)},d.$7=function(){if(d.props.photoID===null)return;b("ScriptPath").closeOverlayView("spotlight_media_view");d.setState({photoData:null});d.props.onClosePhotoView()},d.$12=function(){d.setState({showForward:!0})},d.$15=function(){d.setState({showForward:!1})},d.$11=function(){d.setState({showInfo:!0})},d.$16=function(){d.setState({showInfo:!1})},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.componentDidMount=function(){__p&&__p();var a=this,c=this.props.sharedMedia.find(function(b){return b.node.legacy_attachment_id===a.props.photoID});this.setState({photoData:c,stageDimensions:this.$3()});this.$1=new(b("SubscriptionsHandler"))();this.$1.addSubscriptions(b("Event").listen(window,"resize",function(){a.setState({stageDimensions:a.$3()})}),b("KeyEventController").registerKey("LEFT",function(){a.$4(!1);return!1}),b("KeyEventController").registerKey("RIGHT",function(){a.$4(!0);return!1}));b("ScriptPath").openOverlayView("spotlight_media_view",{photoID:this.props.photoID,threadID:this.props.threadID})};d.componentWillUnmount=function(){this.$1&&this.$1.release(),this.$1=null,this.$2.forEach(function(a){return a.abandon()})};d.render=function(){var a=this,c=this.$5(),d=this.state.stageDimensions,e=this.props.useloadingindicator&&!this.state.photoData;if(this.state.photoData==null)return null;var f=this.props.sharedMedia.findIndex(function(b){a.state.photoData!=null||j(0,1033);return b.node.id===a.state.photoData.node.id});f=b("React").jsxs("div",{children:[this.$6(),this.props.disablepaging?null:b("React").jsx(b("SpotlightMessagesViewerPagers.react"),{disablePrevArrow:f<=0&&!this.props.hasPrevPage,disableNextArrow:!this.props.hasNextPage&&f>=this.props.sharedMedia.length-1})]});return b("React").jsxs("span",{children:[b("React").jsxs(b("SpotlightViewer"),{className:"_53vs",onHide:this.$7,open:this.props.photoID!==null,ref:"spotlightViewer",rootClassName:this.props.rootClassName,children:[b("React").jsx(b("SpotlightViewport"),{active:!1,fadeInNOut:!0,media:c,onClick:this.$4,ref:"viewport",showLoadingIndicator:e,stageDimensions:d,useWidth:!0,children:f}),this.$8()]}),this.$9(),this.$10()]})};d.$6=function(){if(!this.state.photoData)return null;var a=this.state.photoData.node.legacy_attachment_id;a=b("XMessagingPhotoDownloadController").getURIBuilder().setString("photo_id",a).getURI();this.props.actorid&&(a=b("ActorURI").create(a,this.props.actorid));return b("React").jsx(b("MessengerPhotoViewHeader.react"),{disableForward:this.props.disableForward,onClose:this.$7,openInfo:this.$11,photoID:this.props.photoID,ref:"photoviewheader",showForwardDialog:this.$12,url:a})};d.$13=function(a){return a?Math.ceil(a/n):o};d.$8=function(){var a=this;if(!this.state.photoData)return null;var c=this.state.photoData,d=b("React").jsx("button",{className:"_2n5b",onClick:function(){return a.props.openAlbum(c.node.legacy_attachment_id)},type:"button",children:b("React").jsx("div",{"aria-label":i._("Galleria foto a schermo intero"),className:"_3por"})});return b("React").jsxs(l,{children:[b("React").jsx(b("MessengerPhotoViewHScroll.react"),{onScroll:this.$14,photoID:c.node.legacy_attachment_id,sharedPhotos:this.props.sharedMedia,width:this.state.stageDimensions.x}),d]})};d.$9=function(){if(!this.state.photoData||this.props.disableForward)return null;var a=i._("Inoltra in messaggi separati");return b("React").jsx(k,{attachmentID:this.state.photoData.node.legacy_attachment_id,onClose:this.$15,shown:this.state.showForward,title:a})};d.$10=function(){return this.state.showInfo?b("React").jsx(b("React").Suspense,{fallback:b("React").jsx("div",{}),children:b("React").jsx(q,{closeInfo:this.$16,infoOpen:this.state.showInfo,photoID:this.state.photoData.node.id})}):b("React").jsx("xhp",{})};d.$17=function(a){var c=this.$13(this.state.stageDimensions.x),d=this.props.sharedMedia;a<=c/2?(b("MessengerSharedMediaActions").loadMoreLatest(this.props.threadID,d[0].cursor,c),d.length<c&&this.props.hasNextPage&&b("MessengerSharedMediaActions").loadMorePrevious(this.props.threadID,d[d.length-1].cursor,c)):a>=d.length-c/2&&this.props.hasNextPage&&b("MessengerSharedMediaActions").loadMorePrevious(this.props.threadID,d[d.length-1].cursor,c)};d.$3=function(){var a=new(b("Vector"))(b("Vector").getViewportDimensions().x,b("Vector").getViewportDimensions().y-m);return a};d.$5=function(){__p&&__p();if(this.state.photoData&&this.state.photoData.node){var a=this.state.photoData.node;if(a.__typename&&a.__typename==="MessageVideo")return this.$18();var d=this.state.stageDimensions,e=this.$19(a,d);if(!e)return null;if(a.photo_encodings&&a.photo_encodings.length!==0)return this.$20(a.legacy_attachment_id,e,a.photo_encodings,d);a=c.getImageDimensionsForStage(new(b("Vector"))(e.width,e.height),d);return this.$21(e,a)}else return null};d.$18=function(){return this.state.photoData?b("React").jsx(b("MessengerVideoPlayer.react"),{isVisible:!0,isOnStage:!0,videoData:this.state.photoData.node,stageDimensions:this.state.stageDimensions}):null};d.$21=function(a,c){return b("React").jsx(b("SpotlightViewerImage"),{dimensions:c,ref:"image",src:a.uri})};d.$20=function(a,c,d,e){return b("React").jsx(b("BootloadedComponent.react"),{bootloadLoader:b("JSResource")("SpotlightViewerSphericalPhoto.react").__setRef("SpotlightMessengerSharedMediaViewer.react"),bootloadPlaceholder:b("React").jsx("div",{}),height:e.y,width:e.x,fbid:a,thumbnail:c.uri,photoEncodings:d,stageDimensions:this.state.stageDimensions})};d.$19=function(a,c){c=b("PhotoUtils").getImagesFromData(a);return c[c.length-1]};return c}(b("React").Component);c.propTypes={disableForward:a.bool,hasPrevPage:a.bool,hasNextPage:a.bool,onClosePhotoView:a.func,openAlbum:a.func,photoID:a.string,rootClassName:a.string,threadID:a.string,sharedMedia:a.arrayOf(a.object)};c.getImageDimensionsForStage=function(a,c){var d=a.x;a=a.y;var e=c.x;c=c.y;var f=d/a,g=e/c;d>=e||a>=c?g<f?(d=e,a=Math.round(e/f)):g>f?(d=Math.round(c*f),a=c):(d=e,a=c):f<g?d=Math.round(a*f):a=Math.round(d/f);return new(b("Vector"))(d,a)};var q=b("lazyLoadComponent")(b("JSResource")("MessengerPhotoInfoDialogContainer.react").__setRef("SpotlightMessengerSharedMediaViewer.react"));e.exports=c}),null);
__d("SpotlightMessengerSharedMediaViewerContainer.react",["FluxContainer","MessengerSharedMediaActions","MessengerSharedMediaStore","React","SpotlightMessengerSharedMediaViewer.react"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}c.getStores=function(){return[b("MessengerSharedMediaStore")]};c.calculateState=function(a,c){a=b("MessengerSharedMediaStore").getState();var d=a.sharedMedia.get(c.threadID);a=a.isLoading.get(c.threadID);return{sharedMedia:d,isLoading:a}};var d=c.prototype;d.componentDidMount=function(){b("MessengerSharedMediaActions").loadCurrent(this.props.threadID,this.props.photoID)};d.render=function(){var a=this;if(!this.state.sharedMedia)return null;var c=this.state.sharedMedia&&this.state.sharedMedia.edges.find(function(b){return b.node.legacy_attachment_id===a.props.photoID});return!c?null:b("React").jsx(b("SpotlightMessengerSharedMediaViewer.react"),{disableForward:this.props.disableForward,hasPrevPage:this.state.sharedMedia&&this.state.sharedMedia.has_previous_page,hasNextPage:this.state.sharedMedia&&this.state.sharedMedia.has_next_page,onClosePhotoView:this.props.onClosePhotoView,openAlbum:this.props.openAlbum,photoID:this.props.photoID,rootClassName:this.props.rootClassName,sharedMedia:this.state.sharedMedia&&this.state.sharedMedia.edges,threadID:this.props.threadID})};return c}(b("React").PureComponent);e.exports=b("FluxContainer").create(a,{withProps:!0})}),null);
__d("MessengerThreadSharedPhotosReact.bs",["ReasonReact.bs","MessengerThreadSharedPhotos.react"],(function(a,b,c,d,e,f){"use strict";function a(a,c,d,e){return b("ReasonReact.bs").wrapJsForReason(b("MessengerThreadSharedPhotos.react"),{findFBID:a,onCloseSharedPhotos:c,threadFBID:d},e)}f.make=a}),null);
__d("MessengerVideoPlayerReact.bs",["ReasonReact.bs","bs_js_null_undefined","MessengerVideoPlayer.react"],(function(a,b,c,d,e,f){"use strict";function a(a,c,d,e,f,g,h,i,j,k){var l;return b("ReasonReact.bs").wrapJsForReason(b("MessengerVideoPlayer.react"),{attachment:(l=b("bs_js_null_undefined")).fromOption(a),className:l.fromOption(c),isInThread:l.fromOption(d),isVisible:l.fromOption(e),isOnStage:l.fromOption(f),stageDimensions:l.fromOption(g),videoData:h,onClick:l.fromOption(i),onSelect:l.fromOption(j)},k)}f.make=a}),null);
__d("MessengerVideoReact.bs",["cx","ix","bs_curry","Image.bs","React","bs_caml_option","ReasonReact.bs","joinClasses","MessengerPhotoReact.bs","MessengerVideoPlayerReact.bs"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();function i(a){a=a.metadata;if(!(a==null)&&!(a.fbid==null)){var b=window.screen.width>1800&&!(a.large_size==null)&&!(a.large_preview==null),c=a.fbid,d=b?a.large_size:a.inbox_size;d=d==null?{x:0,y:0}:{x:d.width,y:d.height};b=b?a.large_preview:a.inbox_preview;return{legacy_attachment_id:c,original_dimensions:d,start_muted:!0,hide_controls_on_finish:!0,url:b,is_share:!1}}return{legacy_attachment_id:null,original_dimensions:null,start_muted:!0,hide_controls_on_finish:!0,url:null,is_share:!1}}function j(a){var b=a%60,c=b<10;return String(a/60|0)+(":"+((c?"0":"")+String(b)))}function a(a){__p&&__p();var c=a.className,d=c!==void 0?c:"",e=a.attachment,f=a.isSingle;c=a.onAttachmentLoad;var g=a.isVisible,k=a.onClick,l=a.onSelect;a=function(a){a=e.metadata;var c=e.media;c=a==null?c==null?void 0:b("bs_caml_option").nullable_to_opt(c.duration):b("bs_caml_option").nullable_to_opt(a.duration);if(c!==void 0)return j(c);else return null};var m=function(a){if(k!==void 0)return b("bs_curry")._1(k,e);else return 0},n=function(a){var c=a.legacy_attachment_id;if(c==null)return;else return b("bs_caml_option").some(b("ReasonReact.bs").element(void 0,void 0,b("MessengerVideoPlayerReact.bs").make(b("bs_caml_option").some(e),b("joinClasses")(d,"_ccq","_4tsk","_3o67",f?"_52mr":"",f?"_1byr":""),!0,g,void 0,void 0,a,m,l,[])))},o=i(e);n=n(o);if(n!==void 0)return b("bs_caml_option").valFromOption(n);else{o={className:b("joinClasses")(d,"_ccq"),attachment:e,isSingle:f,children:[b("ReasonReact.bs").element(void 0,void 0,b("Image.bs").make("_ccr",void 0,void 0,void 0,h("27983"),void 0,void 0,void 0,void 0,[])),b("React").createElement("span",{className:"_ccs"},a(0))]};c!==void 0&&(o.onAttachmentLoad=b("bs_caml_option").valFromOption(c));k!==void 0&&(o.onClick=b("bs_caml_option").valFromOption(k));return b("React").createElement(b("MessengerPhotoReact.bs").make,o)}}c=1800;d=a;f.large_window_width=c;f.constructVideoData=i;f.formatDuration=j;f.make=d}),null);
__d("MessengerLivingRoomCTAContainer.react",["fbt","CurrentEnvironment","ErrorBoundary.react","JSResource","MercuryIDs","React","ShortProfiles","gkx","lazyLoadComponent"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("lazyLoadComponent")(b("JSResource")("MessengerLivingRoomCTA.react").__setRef("MessengerLivingRoomCTAContainer.react"));a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.state={threadType:null,otherUserName:null},b)||babelHelpers.assertThisInitialized(c)}var d=c.prototype;d.componentDidMount=function(){__p&&__p();var a=this,c=this.props.threadID;if(c==null)return;c=b("MercuryIDs").tokenize(c);if(c.type==="thread"){this.setState({threadType:"group"});return}if(c.type!=="user")return;b("ShortProfiles").get(c.value,function(b){a.setState({otherUserName:b.firstName,threadType:"user"})})};d.render=function(){__p&&__p();var a=this.props,c=a.threadID,d=a.isFromViewer;a=a.attachment;var e=this.state,f=e.threadType;e=e.otherUserName;if(!b("gkx")("678647")||a==null||d!=!0||c==null||f==null||f==="user"&&e==null||b("CurrentEnvironment").messengerdotcom)return null;a=a==null?void 0:(d=a.target)==null?void 0:d.video_messenger_cta_payload;d=a==null?void 0:a.cta_type;a=a==null?void 0:(a=a.video)==null?void 0:a.id;if(d!=="CREATE_LIVING_ROOM"||a==null)return null;var i;switch(f){case"user":i=g._("Guarda con {name of the other user in the thread}",[g._param("name of the other user in the thread",e)]);break;case"group":i=g._("Guarda con il gruppo");break}return i==null?null:b("React").jsx(b("ErrorBoundary.react"),{children:b("React").jsx(b("React").Suspense,{fallback:b("React").jsx("div",{}),children:b("React").jsx(h,{threadFBID:b("MercuryIDs").getThreadFBIDFromThreadID(c),videoID:a,buttonText:i})})})};return c}(b("React").Component);e.exports=a}),null);
__d("MessengerXMATextBlockReact.bs",["ReasonReact.bs","bs_js_null_undefined","MessengerXMATextBlock.react"],(function(a,b,c,d,e,f){"use strict";function a(a,c,d,e,f,g,h,i,j,k){var l;return b("ReasonReact.bs").wrapJsForReason(b("MessengerXMATextBlock.react"),{className:(l=b("bs_js_null_undefined")).fromOption(a),description:l.fromOption(c),source:l.fromOption(d),title:l.fromOption(e),url:l.fromOption(f),width:l.fromOption(g),threadID:l.fromOption(h),isFromViewer:l.fromOption(i),attachment:l.fromOption(j)},k)}f.make=a}),null);
__d("MessengerVideoXMAReact.bs",["cx","React","bs_caml_option","ReasonReact.bs","joinClasses","MessengerVideoPlayerReact.bs","MessengerXMATextBlockReact.bs"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();function h(a){__p&&__p();if(a==null)return null;else{var b=a.width>a.height?a.width:a.height,c=window.screen.width>1800;c=c?640:450;if(b<=c)return{x:a.width,y:a.height};else{c=c/b;b=a.width*c|0;a=a.height*c|0;return{x:b,y:a}}}}function i(a){var b=a.media;a=a.target;if(b==null||a==null||b.image_size==null||a.video_id==null)return;else{var c=b.image_size;return{legacy_attachment_id:a.video_id,original_dimensions:h(c),start_muted:!0,hide_controls_on_finish:!0,url:b.image,is_share:!0}}}function a(a){__p&&__p();var c=a.className,d=c!==void 0?c:"",e=a.attachment,f=a.isVisible,g=a.onSelect,h=a.threadID,j=a.isFromViewer;c=function(a){if(a!==void 0)return b("ReasonReact.bs").element(void 0,void 0,b("MessengerVideoPlayerReact.bs").make(b("bs_caml_option").some(e),b("joinClasses")(d,"_ccq","_4tsk","_3o67","_52mr","_1byr"),!0,f,void 0,void 0,b("bs_caml_option").valFromOption(a),void 0,g,[]));else return null};a=function(a){var c;return b("ReasonReact.bs").element(void 0,void 0,b("MessengerXMATextBlockReact.bs").make("_2f5n _4br2 _29ew _3dug",(c=b("bs_caml_option")).nullable_to_opt(e.description),c.nullable_to_opt(e.source),c.nullable_to_opt(e.video_title),c.nullable_to_opt(e.uri),a!==void 0?b("bs_caml_option").valFromOption(a).x:void 0,h,j,b("bs_caml_option").some(e),[]))};var k=i(e);c=c(k);return b("React").createElement("div",{className:"_3duc"},c,a(k!==void 0?b("bs_caml_option").nullable_to_opt(b("bs_caml_option").valFromOption(k).original_dimensions):void 0))}c=640;d=450;e=1800;g=a;f.large_preview_dim=c;f.thumbinail_inbox_dim=d;f.large_window_width=e;f.adjustSize=h;f.constructVideoData=i;f.make=g}),null);
__d("MessengerPhotosGroupReact.bs",["cx","URI","bs_block","bs_curry","React","Utils.bs","ActorURI","bs_belt_Array","LogHistory","MercuryIDs","bs_belt_Option","bs_caml_option","ReasonReact.bs","joinClasses","bs_caml_primitive","bs_js_null_undefined","MessagesViewerSetID","MessengerPhotoReact.bs","MessengerVideoReact.bs","MercuryAttachmentType","getPageIDFromThreadID","MessengerVideoXMAReact.bs","bs_caml_builtin_exceptions","ChatSpeakingStickerReact.bs","MercuryAttachmentPayload.bs","MessengerAttachmentViewer","MessengerThreadSharedPhotosReact.bs"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h,i="empty-spacer",j=b("LogHistory").getInstance("messenger_photo_group"),k=b("ReasonReact.bs").reducerComponent("MessengerPhotosGroup");function l(a,c,d,e,f,g,l,m,n,o,p,q,r,s){__p&&__p();var t=d!==void 0?d:"",u=function(a){a=a.length;var c=a===2||a===4;return b("joinClasses")(t,"_2n8h",a===1?"_2n8i":"",c?"_4ksk":"",a>1&&!c?"_2n8k":"","_5fk1")},v=function(a){__p&&__p();if(m!==void 0){a=b("bs_caml_option").valFromOption(m);var c=a.thread_fbid;if(c==null)return b("MercuryIDs").getThreadFBIDFromThreadID(a.thread_id);else{var d=b("bs_caml_primitive").caml_string_compare(c,"")===0;if(d)return b("MercuryIDs").getThreadFBIDFromThreadID(a.thread_id);else return c}}else return null},w=function(a,c){var d=v(0);c=c.metadata;c=c==null?null:c.fbid;return b("ReasonReact.bs").element(void 0,void 0,b("MessengerThreadSharedPhotosReact.bs").make(c,function(c){return b("bs_curry")._1(a[3],0)},d,[]))},x=function(a){a=JSON.stringify(a);if(a!==void 0)return a;else return""},y=function(d,k,m,s){__p&&__p();var t=k.deduplication_key,u=k.metadata;if(t==null)if(u==null){var w=k.upload_id;w=w==null?"":w}else{u=u.fbid;w=u==null?"":u}else w=t;var y=function(a,b){j.debug("just_open_uri",x(k));return window.open(a)},z;if(m||f===!0){u=k.large_preview_url==null;if(u)z=void 0;else{var A=k.large_preview_url;z=function(a){return y(A,a)}}}else{var B=k.metadata;t=0;if(B==null||B.fbid==null)t=1;else{m=k.app_attribution==null;z=m?function(a){j.debug("open_share_view",x(a));return b("bs_curry")._1(d[3],[a])}:function(c){__p&&__p();var d=B;c=c;j.debug("on_child_clicked",x(c));if(b("Utils.bs").isTruthy(c.preview_uploading))return 0;else if(c.attach_type===b("MercuryAttachmentType").VIDEO){var f=d.dimensions;f=f==null?{x:null,y:null}:{x:f.width,y:f.height};b("MessengerAttachmentViewer").renderVideo({pageID:b("bs_js_null_undefined").fromOption(p),rootClassName:"_1j1h",videoID:d.fbid,videoSize:f,videoURI:c.url});return 0}else if(c.attach_type===b("MercuryAttachmentType").PHOTO||c.attach_type===b("MercuryAttachmentType").THIRDPARTYSTICKER||c.attach_type===b("MercuryAttachmentType").ANIMATED_IMAGE){f=a.length===1;var i=c.url;if(g!==!0&&c.attach_type===b("MercuryAttachmentType").PHOTO&&e!==void 0){var k=v(0),l=e===1;k=new(h||(h=b("URI")))("/ajax/messaging/attachments/sharedphotos.php").setQueryData({thread_id:k,image_id:d.fbid});k=p!==void 0?new(b("ActorURI").create)(k,b("bs_caml_option").valFromOption(p)):k;k=[b("MessagesViewerSetID").MESSAGES_VIEW_ALL_IN_THREAD,k,l]}else k=[null,i,f];b("MessengerAttachmentViewer").bootstrapWithConfig({actorid:b("bs_js_null_undefined").fromOption(p),dimensions:d.dimensions,disableForward:p!==void 0,disablePaging:k[2],endpoint:k[1],fbid:d.fbid,rootClassName:"_1j1h",setID:k[0],snapToPhoto:!0,src:c.preview_url});return 0}else if(c.uri==null)return 0;else return window.open(c.uri)}}if(t===1){u=k.uri==null;if(u)z=void 0;else{var C=k.uri;z=function(a){return y(C,a)}}}}m=b("bs_belt_Option").getWithDefault(c,k.attach_type);if(m===b("MercuryAttachmentType").PHOTO||m===b("MercuryAttachmentType").ANIMATED_IMAGE||m===b("MercuryAttachmentType").THIRDPARTYSTICKER){t={attachment:k,isSingle:s,children:[]};l!==void 0&&(t.isVisible=b("bs_caml_option").valFromOption(l));n!==void 0&&(t.onAttachmentLoad=b("bs_caml_option").valFromOption(n));z!==void 0&&(t.onClick=b("bs_caml_option").valFromOption(z));return b("React").jsx(b("MessengerPhotoReact.bs").make,t,w)}else if(m===b("MercuryAttachmentType").VIDEO){u=k.metadata;if(!(u==null)&&b("Utils.bs").isTruthy(u.render_as_sticker)){t=u.dimensions;u=t==null?{height:null,width:null}:{height:t.height,width:t.width};t=k.url;return b("ReasonReact.bs").element(void 0,void 0,b("ChatSpeakingStickerReact.bs").make(t,u,[]))}if(g===!0){t={attachment:k};l!==void 0&&(t.isVisible=b("bs_caml_option").valFromOption(l));o!==void 0&&(t.onSelect=b("bs_caml_option").valFromOption(o));q!==void 0&&(t.threadID=b("bs_caml_option").valFromOption(q));r!==void 0&&(t.isFromViewer=b("bs_caml_option").valFromOption(r));return b("React").jsx(b("MessengerVideoXMAReact.bs").make,t,w)}else{u={attachment:k,isSingle:s};n!==void 0&&(u.onAttachmentLoad=b("bs_caml_option").valFromOption(n));l!==void 0&&(u.isVisible=b("bs_caml_option").valFromOption(l));z!==void 0&&(u.onClick=b("bs_caml_option").valFromOption(z));o!==void 0&&(u.onSelect=b("bs_caml_option").valFromOption(o));return b("React").jsx(b("MessengerVideoReact.bs").make,u,w)}}else if(m===i){t={className:"_4tsk _4rf-"};s=b("bs_caml_option").nullable_to_opt(k.key);s!==void 0&&(t.key=b("bs_caml_option").valFromOption(s));return b("React").createElement("div",t)}else throw[b("bs_caml_builtin_exceptions").invalid_argument,m+" is not handled by MessengerPhotosGroup"]},z=function(c,a,d){__p&&__p();if(a.length!==1){var e=a.length===2||a.length===4,f=e?2:3;e=[];var g=[0],j=a.length;while(g[0]<j){var k=b("bs_caml_primitive").caml_int_min(f,j-g[0]|0);k=b("bs_belt_Array").makeBy(f,function(e){return function(k){var j=k<e;if(j)return y(c,a[g[0]+k|0],d,!1);else{j="ghost"+String(f-k|0);k=b("MercuryAttachmentPayload.bs").create(i,b("bs_caml_option").some(j),new(h||(h=b("URI")))(""));return y(c,k,d,!1)}}}(k));e.push(b("React").createElement("div",{key:String(g[0]),className:"_2n8g"},k));g[0]=g[0]+f|0}return e}else{k=a[0];return y(c,k,d,!0)}};return[k[0],k[1],k[2],k[3],function(a){b("MessengerAttachmentViewer").preload();return 0},k[5],k[6],k[7],function(c){var d=m!==void 0?!(b("getPageIDFromThreadID")(b("bs_caml_option").valFromOption(m).thread_id)==null):!1;d=z(c,a,d);var e=c[1][0];c=e!==void 0?w(c,b("bs_caml_option").valFromOption(e)):null;return b("React").createElement("div",{className:u(a),tabIndex:0},c,d)},function(a){return[void 0]},k[10],function(a,c){if(a)return b("bs_block").__(0,[[b("bs_caml_option").some(a[0])]]);else return b("bs_block").__(0,[[void 0]])},k[12]]}a=b("ReasonReact.bs").wrapReasonForJs(k,function(a){var c;return l(a.attachments,(c=b("bs_caml_option")).nullable_to_opt(a.attachType),c.nullable_to_opt(a.className),c.nullable_to_opt(a.count),c.nullable_to_opt(a.isPageMessage),c.nullable_to_opt(a.isXMA),c.nullable_to_opt(a.isVisible),c.nullable_to_opt(a.message),c.nullable_to_opt(a.onAttachmentLoad),c.nullable_to_opt(a.onSelect),c.nullable_to_opt(a.pageID),c.nullable_to_opt(a.threadID),c.nullable_to_opt(a.isFromViewer),[])});c=b("bs_belt_Option").getWithDefault;f.$pipe$question=c;f.empty_spacer_type=i;f.history=j;f.component=k;f.make=l;f.jsComponent=a}),null);
__d("MercuryAudioPlayer",["DOM","Event"],(function(a,b,c,d,e,f){__p&&__p();var g=200;function h(){var a=b("DOM").create("audio"),c=!1;try{a.canPlayType&&(a.canPlayType("video/mp4;").replace(/^no$/,"")&&(c=!0))}finally{return c}}var i=function(){this.interval=null,this.arbiterInstance=null,this.audio=b("DOM").create("audio"),b("Event").listen(this.audio,"playing",function(){this.informAttachment("playing",this.audio.currentTime),this.interval=window.setInterval(function(){this.informAttachment("playing",this.audio.currentTime)}.bind(this),g)}.bind(this)),b("Event").listen(this.audio,"ended",function(){window.clearInterval(this.interval),this.informAttachment("finished")}.bind(this))};Object.assign(i.prototype,{setAudio:function(a,b){this.audio.setAttribute("src",a),this.arbiterInstance=b},informAttachment:function(a,b){this.arbiterInstance&&this.arbiterInstance.inform(a,b)},play:function(){this.audio.play(),this.informAttachment("played")},resume:function(){this.audio.play(),this.informAttachment("played")},pause:function(){this.audio.pause(),window.clearInterval(this.interval),this.informAttachment("paused")},getType:function(){return"html5"}});function j(){return h()?new i():!1}var k=null,l=null,m=0;function a(a,b){this.src=a;this.arbiterInstance=b;this.audio_id=++m;k!==null||(k=j());if(!k)return!1}Object.assign(a.prototype,{getType:function(){if(!k)return!1;else return k.getType()},play:function(a){a&&l==this.audio_id?k.resume():(this.pause(),l=this.audio_id,k.setAudio(this.src,this.arbiterInstance),k.play())},pause:function(){k.pause()}});e.exports=a}),null);
__d("MessengerVoiceClipAttachmentReact.bs",["cx","cssVar","React","ReactDOMRe.bs","bs_caml_option","MessengerColors","MessengerCustomColorUtils.bs","MessengerDotComAndInboxM4Check.bs","MercuryAttachmentAudioClip.react","WorkChatRedesignedMessageListCheck.bs","MercuryShareAttachmentRenderLocations.bs"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();function a(a){__p&&__p();var c=a.attachment,d=a.customColor,e=a.message;a=a.thread;var f=c.metadata,g;if(f==null)g=0;else{f=f.duration;g=f==null?0:f/1e3}f=c.app_attribution!==null;var h=d!==void 0;a=d!==void 0?b("MessengerDotComAndInboxM4Check.bs").yes?b("ReactDOMRe.bs").Style.unsafeAddProp(b("MessengerColors").makeLinearGradient(a.gradient_colors,a.solid_color,b("MessengerCustomColorUtils.bs").defaultColor(0)),"backgroundAttachment","fixed"):{backgroundColor:d}:b("WorkChatRedesignedMessageListCheck.bs").enabled?{backgroundColor:"#ece9e7"}:{};e="audio:"+e.message_id;c={src:c.url.toString(),duration:g,location:b("MercuryShareAttachmentRenderLocations.bs").getValue(2),rootClassName:"_3czg"+(f?" _4yjw":"")+" _2poz _ui9",showHelp:!1,width:200};d!==void 0&&(c.customColor=b("bs_caml_option").valFromOption(d));return b("React").jsx("div",{children:b("React").jsx(b("MercuryAttachmentAudioClip.react"),c,e),className:(b("WorkChatRedesignedMessageListCheck.bs").enabled?"":"_hh7")+(b("MessengerDotComAndInboxM4Check.bs").yes?" _6ybn":"")+(b("WorkChatRedesignedMessageListCheck.bs").enabled?"":" _s1-")+(h?" _5sxi":"")+(f?"":" _52mr")+(f?" _mxz":"")+" _1fz8"+(f?" _1-wa":"")+" _1nqp",style:a})}c=a;f.make=c}),null);
__d("MessengerVoiceClipAttachmentReact.re",["MessengerVoiceClipAttachmentReact.bs"],(function(a,b,c,d,e,f){(function(a){return null});a=b("MessengerVoiceClipAttachmentReact.bs").make;f.make=a}),null);
__d("XStickerInTrayController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/stickers/in_tray/",{pack_id:{type:"Int",required:!0}})}),null);
__d("StickersPackInTrayQuery",["Promise","AsyncRequest","RelayFBEnvironment","RelayModern","XStickerInTrayController","StickersPackInTrayQuery.graphql"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("RelayModern").fetchQuery;b("RelayModern").graphql;var h=function(){return b("StickersPackInTrayQuery.graphql")};a={onIsPackInTray:function(a,c,d){__p&&__p();return g(b("RelayFBEnvironment"),h,{stickerInterface:c}).then(function(c){__p&&__p();c=c&&c.length>0?c[0]:null;var e=c==null?void 0:(c=c.sticker_store)==null?void 0:(c=c.tray_packs)==null?void 0:c.edges;if(e)return new(b("Promise"))(function(b,c){return b({in_sticker_tray:e.filter(function(b){return b.node.id===a}).length>0})}).then(d);var f=b("XStickerInTrayController").getURIBuilder().setInt("pack_id",a).getURI();return new(b("Promise"))(function(a,c){return new(b("AsyncRequest"))(f).setHandler(function(b){return a(b.getPayload())}).setAllowCrossPageTransition(!0).send()}).then(d)})}};e.exports=a}),null);
__d("isRetina",[],(function(a,b,c,d,e,f){"use strict";e.exports=function(){return(window.devicePixelRatio||1)>1}}),null);
__d("XRTCCallabilityController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/rtc/callability/",{user_id:{type:"FBID",required:!0}})}),null);
__d("MNRTCCallabilityStore",["MessengerDispatcher","RTCCallabilityStore"],(function(a,b,c,d,e,f){"use strict";e.exports=new(b("RTCCallabilityStore"))(b("MessengerDispatcher"))}),null);
__d("MercuryAttachmentAttribution.react",["cx","fbt","Image.react","ImmutableObject","Link.react","React","joinClasses"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();a=b("React").PropTypes;c=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){var a=this.$1();return!a?null:b("React").jsxs("div",{className:b("joinClasses")(this.props.className,"_29ew"),children:[b("React").jsx(b("Image.react"),{src:a.icon_url,className:"_29ex"}),b("React").jsx("span",{className:"_29ey",children:a.name}),this.$2()]})};d.$1=function(){return this.props.attachment&&this.props.attachment.app_attribution};d.$2=function(){var a=this.$1();if(!a||!a.metadata)return null;var c="_439n";try{a=JSON.parse(a.metadata)}catch(a){return null}return a.spotify_link?b("React").jsx(b("Link.react"),{className:c,href:a.spotify_link,target:"_blank",children:h._("Apri")}):null};return c}(b("React").PureComponent);c.propTypes={attachment:a.instanceOf(b("ImmutableObject"))};e.exports=c}),null);
__d("shouldNotRenderSegoe",["MessengerConfig","UserAgent"],(function(a,b,c,d,e,f){"use strict";var g=new RegExp("[\u0530-\u05f4\u10a0-\u10ff]"),h=b("UserAgent").isBrowser("Chrome")&&b("UserAgent").isPlatform("Windows 10");e.exports=function(a){return!b("MessengerConfig").SegoeUIDisabled&&h&&g.test(a)}}),null);
__d("MessengerCodeBubble.bs",["React","bs_caml_option","MessengerCodePasteUtils"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a){var c=a.body,d=a.className,e=a.customColor,f=a.isFromViewer,g=a.ranges,h=a.threadID;a=a.thread;c=b("MessengerCodePasteUtils").getCodeAndMessageBubbles(c,g,h,e,f,a);g={children:c};d!==void 0&&(g.className=b("bs_caml_option").valFromOption(d));return b("React").jsx("div",g)}c=a;f.make=c}),null);
__d("MessengerCodeBubble.re",["MessengerCodeBubble.bs"],(function(a,b,c,d,e,f){(function(a){return null});a=b("MessengerCodeBubble.bs").make;f.make=a}),null);
__d("getFBTSafeGenderFromGenderConst",["GenderConst","IntlVariations"],(function(a,b,c,d,e,f){"use strict";function a(a){switch(a){case b("GenderConst").MALE_SINGULAR:return b("IntlVariations").GENDER_MALE;case b("GenderConst").FEMALE_SINGULAR:return b("IntlVariations").GENDER_FEMALE;default:return b("IntlVariations").GENDER_UNKNOWN}}e.exports=a}),null);
__d("MessengerRemovedMessageTombstone.react",["cssVar","cx","fbt","MercuryTimestamp","MessengerDecorator","MessengerDotComAndInboxM4Check.bs","MessengerInnerDecorators.react","MessengerMessageActionsWrapper.react","MessengerMessageSeenHeadsReact.bs","MessengerSettingsStore","React","RemovedMessageTombstoneContent","TooltipData","WorkChatRedesignedMessageListCheck.re","getViewportDimensions","immutable","joinClasses","messengerRTLClasses"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j=b("MessengerMessageSeenHeadsReact.bs").jsComponent;a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.state={shown:{}},c.$2=function(a,b){c.setState(function(c){return{shown:babelHelpers["extends"]({},c.shown,(c={},c[a]=b,c))}})},b)||babelHelpers.assertThisInitialized(c)}var d=c.prototype;d.render=function(){var a=this.props,c=a.isActive,d=a.isFromViewer;a=a.message;var e=[],f=this.props.message;f&&b("MessengerDecorator").getInnerDecorators().forEach(function(a){a.check(f)&&e.push(a.getAdditionalClassNames())});var g=this.$1();return b("React").jsxs(b("MessengerMessageActionsWrapper.react"),{className:b("joinClasses").apply(void 0,["clearfix _o46 _3erg"+(c?" _-5k":"")+(d?" _3i_m":"")+(d?" _nd_":"")+(d?"":" _29_7")+"",b("messengerRTLClasses")(a.body)].concat(e)),message:a,onShowMenu:this.$2,children:[g,this.props.hideDeliveryState===!0?null:b("React").jsx(j,{className:"_4jzq",isFromViewer:d,message:a,nextTimestamp:this.props.nextTimestamp,participants:this.props.participants,readReceipts:this.props.readReceipts})]})};d.$1=function(){var a=this.props.message,c=b("RemovedMessageTombstoneContent").getRemovedMessageTombstoneContent(a,this.props.participants),d=this.$3();d=b("TooltipData").propsFor(d,k(this.props.isFromViewer));return b("React").jsxs("div",babelHelpers["extends"]({className:"_3058 _ui9"+(a.isSelected?" _3xsz":"")+" _7301 _hh7"+(b("MessengerDotComAndInboxM4Check.bs").yes?" _6ybn":"")+" _s1- _52mr _3oh-"+(this.props.isFirstInGroup===!0&&b("WorkChatRedesignedMessageListCheck.re").enabled?" _8lma":"")},d||{},{children:[this.props.hideBeforeDecorator===!0?null:b("React").jsx(b("MessengerInnerDecorators.react"),{className:"_1z_2",message:a,isFromViewer:!!this.props.isFromViewer,hovered:this.state.shown[a.message_id],messageProps:{},isSavedView:!1}),b("React").jsx("div",{className:"_aok"+(b("WorkChatRedesignedMessageListCheck.re").enabled?" _7w73":""),tabIndex:0,"aria-label":c,children:b("React").jsx("span",{children:c})})]}))};d.$3=function(){var a=this.props.message.timestamp,c=this.props.message.removed_timestamp;a=i._("Invio: {sent time}",[i._param("sent time",b("MercuryTimestamp").getPreciseTimestamp(a))]);if(!c)return a;c=i._("Rimozione: {removed time}",[i._param("removed time",b("MercuryTimestamp").getPreciseTimestamp(c))]);return a.toString()+"\n"+c.toString()};return c}(b("React").Component);function k(a){return b("getViewportDimensions")().width<=parseInt("700px".replace("px",""),10)||b("MessengerSettingsStore").getSettings().info_sidebar_collapsed&&a?"above":a?"right":"left"}e.exports=a}),null);
__d("MercuryTypingAnimationReact.bs",["cx","React","joinClasses"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var c;a=a.className;return(c=b("React")).jsx("div",{children:c.jsxs("div",{children:[c.jsx("div",{className:"_5pd7"}),c.jsx("div",{className:"_5pd7"}),c.jsx("div",{className:"_5pd7"})],className:"_4b0g"}),className:b("joinClasses")("_4a0v _1x3z",a!==void 0?a:"")})}c=a;f.make=c}),null);
__d("MessengerBubbleReact.re",["react","MessengerBubble.react","ReasonReact.bs"],(function(a,b,c,d,e,f){var g;function a(a){return(g||(g=b("react"))).jsx(b("MessengerBubble.react"),babelHelpers["extends"]({},a))}f.MessengerBubbleTypeChecked=a;c=function(a,c,d,e){return b("ReasonReact.bs").wrapJsForReason(b("MessengerBubble.react"),{attachments:a,body:c,className:d},e)};f.make=c}),null);
__d("MessengerTypingIndicatorReact.bs",["cx","bs_block","bs_curry","Image.bs","React","bs_js_dict","bs_caml_obj","immutable","MercuryIDs","bs_belt_Option","bs_caml_option","CurrentUser","ReasonReact.bs","MessengerPersonas.bs","MessengerParticipants.bs","WorkForeignEntityType","MessengerBubbleReact.re","MercuryTypingAnimationReact.bs","MessengerProfileImageWrapperReact.bs"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("ReasonReact.bs").reducerComponent("MessengerTypingIndicatorReact");function a(a,c,d,e){__p&&__p();var f=function(c,a){return b("bs_caml_option").nullable_to_opt(b("MessengerParticipants.bs").getMulti([a],function(d){b("bs_curry")._1(c[3],b("bs_block").__(0,[b("bs_js_dict").get(d,a)]));return 0}))},g=function(a){if(c==null)return;else{a=b("MercuryIDs").getUserIDFromParticipantID(c);if(a==null)return;else return b("bs_caml_option").nullable_to_opt(b("MessengerPersonas.bs").getNow(a))}};return[h[0],h[1],h[2],h[3],function(a){var d=a[1][0];if(d!==void 0||c==null)return 0;else{d=b("MessengerParticipants.bs").getNow(c);if(d==null)return b("bs_curry")._1(a[3],b("bs_block").__(1,[f(a,c)]));else return b("bs_curry")._1(a[3],b("bs_block").__(0,[d==null?void 0:b("bs_caml_option").some(d)]))}},function(a){__p&&__p();a=a[1];var d=a[1][1][0],e=a[1][0];if(d!==void 0)return 0;else{if(e!==void 0&&(c==null||b("bs_caml_obj").caml_equal(b("bs_caml_option").valFromOption(e).id,c)))return 0;if(c==null)return 0;else return b("bs_curry")._1(a[3],b("bs_block").__(1,[f(a,c)]))}},function(a){a=a[1][1][0];if(a!==void 0)return b("MessengerParticipants.bs").removeCallback(b("bs_caml_option").valFromOption(a));else return 0},h[7],function(c){__p&&__p();var d=g(0);if(c[1][0]===void 0&&d===void 0)return null;else{var e=c[1][0];d=d!==void 0?b("bs_caml_option").valFromOption(d).profile_picture_url:e!==void 0?b("bs_caml_option").nullable_to_opt(b("bs_caml_option").valFromOption(e).image_src):void 0;e=b("bs_belt_Option").flatMap(b("bs_belt_Option").flatMap(c[1][0],function(a){return b("bs_caml_option").nullable_to_opt(a.work_foreign_entity_info)}),function(a){return b("bs_caml_option").some(a.type)});e=e!==void 0?b("CurrentUser").isWorkUser()&&b("bs_caml_obj").caml_equal(b("bs_caml_option").valFromOption(e),b("WorkForeignEntityType").FOREIGN):!1;c=c[1][0];return b("React").createElement("div",{className:"_1t_p _1hbw"},b("React").createElement("div",{className:"_1t_q"},b("ReasonReact.bs").element(void 0,void 0,b("MessengerProfileImageWrapperReact.bs").make(void 0,void 0,c!==void 0?b("bs_caml_option").valFromOption(c).is_messenger_user:!1,void 0,void 0,void 0,void 0,32,void 0,"_1t_r",e,[d!==void 0?b("ReasonReact.bs").element(void 0,void 0,b("Image.bs").make(void 0,"",void 0,void 0,d,32,void 0,32,void 0,[])):b("ReasonReact.bs").element(void 0,void 0,b("Image.bs").make(void 0,"",void 0,void 0,void 0,32,void 0,32,void 0,[]))]))),b("React").createElement("div",{className:"_41ud"},b("React").createElement("div",{className:"_o46 _3erg _29_7"},b("ReasonReact.bs").element(void 0,a,b("MessengerBubbleReact.re").make(b("immutable").List([b("React").jsx(b("MercuryTypingAnimationReact.bs").make,{},"animation")]),"","_3058",[])))))}},function(a){return[c==null?void 0:b("bs_caml_option").nullable_to_opt(b("MessengerParticipants.bs").getNow(c)),[void 0]]},h[10],function(a,c){if(a.tag){c[1][0]=a[0];return 0}else{c[1][0]=void 0;return b("bs_block").__(0,[[a[0],c[1]]])}},h[12]]}c=32;f.component=h;f.cIMAGE_SIZE=c;f.make=a}),null);
__d("MessengerTypingIndicatorReact.re",["bs_curry","MessengerTypingIndicatorReact.bs","ReasonReact.bs"],(function(a,b,c,d,e,f){a=b("ReasonReact.bs").wrapReasonForJs(b("MessengerTypingIndicatorReact.bs").component,function(a){return b("bs_curry")._4(b("MessengerTypingIndicatorReact.bs").make,a.setBubbleRef,a.userID,a.showName,a.children)});f.component=a;f["default"]=a}),null);
__d("MessengerUserInputActions",["keyMirror"],(function(a,b,c,d,e,f){"use strict";a=b("keyMirror")({UPDATE_USER_INPUT_REQUESTED:null});e.exports={MessengerUserInputActions:a}}),null);
__d("MessengerUserInputAppDispatcher",["ExplicitRegistrationDispatcher","objectValues"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(a){babelHelpers.inheritsLoose(c,a);function c(b){b=a.call(this,b)||this;babelHelpers.assertThisInitialized(b).dispatch=b.dispatch.bind(babelHelpers.assertThisInitialized(b));return b}var d=c.prototype;d.explicitlyRegisterStoresInMap=function(a){this.explicitlyRegisterStores(b("objectValues")(a))};return c}(b("ExplicitRegistrationDispatcher"));e.exports=new a({strict:!0})}),null);
__d("MessengerUserInputActionsHandler",["MessengerUserInputActions","MessengerUserInputAppDispatcher"],(function(a,b,c,d,e,f){"use strict";var g=b("MessengerUserInputActions").MessengerUserInputActions;a={updateUserInputRequested:function(a,c,d){b("MessengerUserInputAppDispatcher").dispatch({type:g.UPDATE_USER_INPUT_REQUESTED,data:{isUserInputRequested:a,requestNumResults:c,requestType:d}})}};e.exports=a}),null);
__d("WorkGalahadScrollToMessageEventEmitter",["EventEmitter"],(function(a,b,c,d,e,f){"use strict";e.exports=new(b("EventEmitter"))()}),null);
__d("MessengerConversation.react",["ix","csx","cx","fbt","requireCond","Bootloader","BootloadOnRender.react","ChatTypingIndicatorsWrapper.bs","CSS","CurrentUser","DOM","DOMDimensions","ErrorBoundary.react","Event","EventProfiler","FantaPageGreetingLoader.react","Image.react","ImmutableObject","JSResource","KeyEventController","LazyComponent.react","Link.react","MercuryIDs","MercuryShareAttachmentRenderLocations","MessageList.react","MessengerActions","MessengerAttachmentRenderer","MessengerBootloadedLogMessage.react","MessengerBusinessQuickReplyLocationQueryWebGraphQLQuery","MessengerBusinessUserProfileLocationQueryWebGraphQLQuery","MessengerButtonReact.re","MessengerCollapsedLogMessageGroup.react","MessengerContextBannerContainer.react","MessengerDateBreak.react","MessengerDotComAndInboxM4Check.bs","MessengerFlexScrollableArea.react","MessengerMessageGroup.react","MessengerNewMessagesNoticeReact.bs","MessengerQuickCamOrigins","MessengerQuickReplyUtils","MessengerReadReceipt.bs","MessengerSpinner.react","MessengerThreadFetchLoggerUtil","MessengerTypingIndicatorReact.re","MessengerUserInputActionsHandler","MessengerUserProfileLocationUtils","MessengerVideoAutoplayActions","MessengerVideoAutoplayStore","MessengerViewBirthdayQueryWebGraphQLQuery","MessengerViewerContactMethodsWebGraphQLQuery","Parent","React","ReactDOM","SubscriptionsHandler","UserActivity","WebGraphQL","WebMessengerConstants","WorkBotLandingPageHelper","WorkChatRedesignedMessageListCheck.re","WorkGalahadScrollToMessageEventEmitter","cr:1071079","cr:1071080","asset","emptyFunction","getPageIDFromThreadID","gkx","ifRequired","immutable","joinClasses","lazyLoadComponent","nullthrows","promiseDone","setImmediate","setTimeout","throttle"],(function(a,b,c,d,e,f,g,h,i,j){"use strict";__p&&__p();var k=b("ChatTypingIndicatorsWrapper.bs").jsComponent,l=b("MessengerButtonReact.re").make,m=b("MessengerNewMessagesNoticeReact.bs").jsComponent,n=b("MessengerTypingIndicatorReact.re").component,o=b("MessengerUserProfileLocationUtils").FetchMessengerUserRegionAndPostalCode,p=b("MessengerUserProfileLocationUtils").PassesGlobalizationGK,q=b("WorkBotLandingPageHelper").shouldShowBotLandingPage;b("immutable").OrderedMap;a=b("React").PropTypes;var r=0,s=20,t=100,u=1e3,v=200,w=b("gkx")("833128"),x=b("lazyLoadComponent")(b("JSResource")("WorkChatBotConversationGreetingContainer.react").__setRef("MessengerConversation.react")),y=b("lazyLoadComponent")(b("JSResource")("WorkChatPinnedMessages.react").__setRef("MessengerConversation.react"));function z(a,c){return!!(b("KeyEventController").filterEventTypes(a,c)&&b("KeyEventController").filterEventModifiers(a,c)&&a.target instanceof Element&&b("Parent").bySelector(a.target,"._4_j4"))}var A={};c=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){__p&&__p();var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.state={readReceipts:B(d.props),scrollingToUnreadMessage:!1,showUnreadNotice:!1,unreadCount:d.props.thread?d.props.thread.unread_count:0,width:0,viewerBirthday:null,viewerEmail:null,viewerPhone:null,viewerState:null,viewerZipCode:null,shouldJumpToMessage:!1,isLandingPageDismissed:!1,renderScrollToBottom:!1},d.$1=null,d.$2=null,d.$3=null,d.$5=[],d.$6={originalScrollHeight:0,originalScrollTop:0},d.$16=function(){__p&&__p();var a=d.$19();if(!d.refs||!a||d.props.isLoading){d.$5=[];return}var c=b("getPageIDFromThreadID")(d.props.threadID),e=d.refs.messageList;if(!e||!c){d.$5=[];return}var f=10,g=a.getElement().getBoundingClientRect(),h=[];d.$4.forEach(function(a){var e=a.message_id,i=d.refs.messageList.getMessageElement(e);if(i){i=i.getBoundingClientRect();i.top>g.top-f&&i.bottom<g.bottom+f&&(h.push(e),d.$5.includes(e)||b("Bootloader").loadModules(["MessengerAdsWebLogger","MNAdsLoggerEventEnum"],function(b,d){b.log(a.ad_client_token,a.ad_id,d.MESSAGE_SEEN_THREAD,!0,e,c)},"MessengerConversation.react"))}},babelHelpers.assertThisInitialized(d));d.$5=h},d.$20=function(){b("MessengerThreadFetchLoggerUtil").markerEnd(d.props.threadID,2),d.$20=b("emptyFunction")},d.$38=function(){var a;return((a=d.props.contact)==null?void 0:a.user_type)==="page"&&b("getPageIDFromThreadID")(d.props.threadID)!==null},d.$40=function(){d.state.renderScrollToBottom?(d.scrollToBottom(!0),d.setState({renderScrollToBottom:!1})):b("MessengerActions").changeMid(null)},d.$39=function(){d.setState({isLandingPageDismissed:!0})},d.$9=function(){var a=d.$19();a&&a.pageUp();return!1},d.$10=function(){var a=d.$19();a&&a.pageDown();return!1},d.$11=function(a){if(a.target===document.body){d.scrollToTop();return!1}return null},d.$12=function(a){if(a.target===document.body){d.scrollToBottom();return!1}return null},d.$15=function(){__p&&__p();if(!d.refs)return;if(!d.refs.scrollable)return;var a=d.$19(),c=d.refs.quickReply;c&&b("CSS").conditionClass(c,"_1mzg",!d.isScrolledToBottom());d.$13();d.$14();a&&d.state.unreadCount&&d.$26(a)&&d.setState({showUnreadNotice:!1,unreadCount:0});a&&a.isScrolledToBottom()&&d.setState({renderScrollToBottom:!1});d.$44(a);d.$45(a);d.$8()},d.$43=function(a){a.preventDefault(),d.setState({showUnreadNotice:!1}),d.$22(!0)},d.$14=function(){if(d.props.messages.size===0||d.props.thread&&d.props.thread.unread_count===0||!d.isScrolledToBottom())return;b("UserActivity").isOnTab()&&b("UserActivity").isActive()?d.props.onRead(d.props.threadID):d.$3||(d.$3=b("UserActivity").subscribe(function(){b("UserActivity").isOnTab()&&(d.$18(),d.props.onRead(d.props.threadID))}))},d.handleResize=function(){__p&&__p();if(!d.refs)return;if(d.refs.scrollable){d.refs.scrollable.handleResize();var a=b("DOMDimensions").getElementDimensions(b("ReactDOM").findDOMNode(d.refs.scrollable)).width;a!==d.state.width&&d.setState({width:a})}a=d.refs.quickReply;a&&b("CSS").conditionClass(a,"_1mzg",!d.isScrolledToBottom());d.trackBottomIfRequired()},d.$17=function(a){d.props.messages.some(function(b){return b.message_id===a})?d.$24(a,!0):(d.setState({shouldJumpToMessage:!0}),b("MessengerActions").changeMid(a))},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.componentDidMount=function(){__p&&__p();var a=this,c,d=new(b("SubscriptionsHandler"))();d.addSubscriptions(b("Event").listen(window,"resize",b("throttle")(this.handleResize,50)),(c=b("KeyEventController")).registerKey("PAGE_UP",this.$9,z),c.registerKey("PAGE_DOWN",this.$10,z),c.registerKey("HOME",this.$11,z),c.registerKey("END",this.$12,z));this.$2=d;this.$13();this.handleResize();this.$14();this.$7=b("throttle")(this.$15,t);this.$8=b("throttle")(this.$16,u);this.$4=this.props.messages.filter(function(a){return a.is_sponsored});this.$8();b("WorkGalahadScrollToMessageEventEmitter").addListener("scrollToMessage",function(b){a.$17(b)})};d.UNSAFE_componentWillReceiveProps=function(a){var b=a.threadID!==this.props.threadID;b&&(this.$18(),this.setState({scrollingToUnreadMessage:!1,showUnreadNotice:!1,unreadCount:a.thread?a.thread.unread_count:0,isLandingPageDismissed:!1}));(b||a.messages!==this.props.messages)&&(this.$4=a.messages.filter(function(a){return a.is_sponsored}));this.setState({readReceipts:B(a)})};d.componentWillUnmount=function(){this.$18(),this.$2&&this.$2.release(),this.$1!=null&&window.clearTimeout(this.$1),b("WorkGalahadScrollToMessageEventEmitter").removeAllListeners("scrollToMessage")};d.UNSAFE_componentWillUpdate=function(a){a=this.$19();a?this.$6={originalScrollHeight:a.getScrollHeight(),originalScrollTop:a.getScrollTop()}:this.$6={originalScrollHeight:0,originalScrollTop:0}};d.componentDidUpdate=function(a,c){__p&&__p();var d=this;if(!this.refs)return;if(!this.refs.scrollable)return;(!this.props.isLoading||!this.props.messages.isEmpty())&&this.$20();c=this.props.threadID!==a.threadID;if(c||C(a,this.props))this.scrollToBottom(),this.$21();else{var e=this.$19();if(e){var f=e.getScrollHeight();if(f!==this.$6.originalScrollHeight){f=e.getScrollHeight()-this.$6.originalScrollHeight+this.$6.originalScrollTop;this.refs.scrollable.scrollToPosition(f)}else this.$21()}}this.props.messages!==a.messages&&(this.$14(),this.state.scrollingToUnreadMessage&&this.$22(!1),this.$23());e=this.props.selectedMessage;this.state.shouldJumpToMessage&&e&&this.$24(e,!0,function(){d.setState({shouldJumpToMessage:!1})});this.$1=b("setTimeout")(function(){var a=d.$19(),b=d.state.unreadCount;d.trackBottomIfRequired();a&&d.state.unreadCount&&!d.state.scrollingToUnreadMessage&&!d.props.isLoading&&d.props.selectedMessage==null&&(d.$25()||(d.$26(a)?d.setState({showUnreadNotice:!1,unreadCount:0}):b==1&&d.props.messages.last().log_message_type!==null?d.setState({showUnreadNotice:!1,unreadCount:0}):d.setState({showUnreadNotice:!0})));d.$13();d.$8()},0);f=a.messages&&a.messages.size||0;e=this.props.messages&&this.props.messages.size||0;(c||f===0&&(e>0||!this.props.isLoading))&&b("EventProfiler").informManualInteractionTimestamp(["MessengerThredRow"],!0,"click")};d.render=function(){__p&&__p();var a=this,c;if(this.props.isLoading&&this.props.messages.isEmpty())return this.$27();var d=this.props.messages.last(),e=b("MercuryIDs").getParticipantIDFromUserID(this.props.viewer);this.$28(d);var f=this.$29(d),g=this.$30(d);this.$31(d);e=d&&d.author!==e?f||g:null;f=null;if(Array.isArray(e)){g=e.every(function(b){return b.content_type==="user_birthday"&&a.state.viewerBirthday===null||b.content_type==="user_email"&&a.state.viewerEmail===null||b.content_type==="user_phone_number"&&a.state.viewerPhone===null||b.content_type==="user_state"&&a.state.viewerState===null||b.content_type==="user_zip_code"&&a.state.viewerZipCode===null});if(!g){g=b("MessengerQuickReplyUtils").localizeTitleIfNecessary(e);f=b("React").jsx(b("BootloadOnRender.react"),{component:b("React").jsx(b("LazyComponent.react"),{options:g,threadID:d.thread_id,onVoiceClipCreate:this.props.onVoiceClipCreate,viewer:this.props.viewer,quickCamOriginLocation:b("MessengerQuickCamOrigins").MESSENGER,messageId:d.message_id,pageId:b("MercuryIDs").getUserIDFromParticipantID(d.author),isMessengerAdPreview:this.props.isMessengerAdPreview,isSponsored:d.is_sponsored,useM4QR:this.props.useM4QR,viewerBirthday:this.state.viewerBirthday,viewerEmail:this.state.viewerEmail,viewerPhone:this.state.viewerPhone,viewerState:this.state.viewerState,viewerZipCode:this.state.viewerZipCode}),loader:b("JSResource")("MessengerBotsQuickReplyButtonList.react").__setRef("MessengerConversation.react"),placeholder:b("React").jsx("div",{})})}}e=null;g=null;f&&(e=b("React").jsx("div",{className:"_51op",children:b("React").jsx("div",{className:"_51oq",onResize:this.handleResize})}),g=b("React").jsx("div",{ref:"quickReply",className:"_1mzb",onResize:this.handleResize,children:f}));d=j._("Messaggi");f=j._("Carica altro...");var h=this.$32();return b("cr:1071079")!=null&&b("cr:1071080")!=null&&b("cr:1071080").shouldRenderChatNullState(this.props.messages,this.props.threadID,(c=this.props.contact)==null?void 0:c.user_type,this.props.viewer)?b("React").jsx(b("cr:1071079"),{messageType:b("nullthrows")(b("cr:1071080").getNullStateMessageType(this.props.threadID,this.props.viewer))}):b("React").jsxs(b("React").Fragment,{children:[b("React").jsx(b("MessengerFlexScrollableArea.react"),{className:this.props.className,flexChildren:this.renderTopOfConversationNotice(),footerChildren:g,onMount:function(){return b("setImmediate")(a.$14)},onScroll:this.props.useManualFetch?void 0:this.$7,ref:"scrollable",shouldStickToBottom:!0,tabIndex:0,bottomOffset:this.props.bottomOffset,children:b("React").jsxs("div",{"aria-label":d,className:b("joinClasses")("__i_"+(b("WorkChatRedesignedMessageListCheck.re").enabled?" _7w74":"")+(b("MessengerDotComAndInboxM4Check.bs").yes?" _7i2k":""),this.props.innerClassName),role:"region",children:[b("React").jsx("h3",{className:"accessible_elem",children:d}),this.$33(),this.props.useManualFetch&&!this.props.upExhausted?b("React").jsx("div",{className:"_7fim",children:b("React").jsx(l,{className:"_41jf",label:f,onClick:function(){return a.props.fetchMessages(b("WebMessengerConstants").MORE_SEARCH_CONTEXT_UP)},type:"primary",use:"default"})}):null,this.$34(),this.$35()&&b("React").jsx(b("FantaPageGreetingLoader.react"),{thread:this.props.thread,threadID:this.props.threadID}),h||b("React").jsx(b("MessageList.react"),{DateBreak:b("MessengerDateBreak.react"),deliveryTimestamp:this.props.deliveryTimestamp,isCanonical:this.props.isCanonical,LogMessage:b("MessengerBootloadedLogMessage.react"),CollapsedLogMessageGroup:b("MessengerCollapsedLogMessageGroup.react"),MessageGroup:b("MessengerMessageGroup.react"),messages:this.props.messages,onAttachmentLoad:this.$36(this.props.threadID),onReplyToMessage:this.props.onReplyToMessage,readReceipts:this.state.readReceipts,ref:"messageList",location:b("MercuryShareAttachmentRenderLocations").MESSENGER,viewer:this.props.viewer,thread:this.props.thread,scrollToRepliedMessage:this.$17}),this.props.useManualFetch&&!this.props.downExhausted?b("React").jsx("div",{className:"_7fim",children:b("React").jsx(l,{className:"_41jf",label:f,onClick:function(){return a.props.fetchMessages(b("WebMessengerConstants").MORE_SEARCH_CONTEXT_DOWN)},type:"primary",use:"default"})}):null,e,b("React").jsx(k,{indicatorClass:n,indicatorsDidShow:function(){a.trackBottomIfRequired()},rootClassName:"clearfix _17pz",threadID:this.props.threadID,viewer:this.props.viewer}),b("gkx")("678591")&&b("React").jsx(b("ErrorBoundary.react"),{project:"omnim",children:b("React").jsx(b("BootloadOnRender.react"),{loader:b("JSResource")("OmniMSuggestionsContainer.react").__setRef("MessengerConversation.react"),placeholder:b("React").jsx("div",{}),component:b("React").jsx(b("LazyComponent.react"),{threadID:this.props.threadID,trackBottom:function(){return a.trackBottomIfRequired()}})})})]})}),this.$37()]})};d.$32=function(){__p&&__p();if(!b("CurrentUser").isWorkUser())return null;if(!this.$38())return null;if(this.state.isLandingPageDismissed===!0)return null;if(this.props.contact&&q(this.props.messages)){var a;return(a=b("React")).jsx(a.Suspense,{fallback:a.jsx(b("MessengerSpinner.react"),{}),children:a.jsx(x,{contact:this.props.contact,threadID:this.props.threadID,onDismiss:this.$39})})}return null};d.$37=function(){var a=this.$19();if(a){a=a.getElement().getBoundingClientRect().height;a=a-74;a+="px";a={top:a}}else a={bottom:"15%"};return this.props.useManualFetch&&!this.props.isSearchResult||this.state.renderScrollToBottom?b("React").jsx(b("Link.react"),{"aria-label":j._("Vai all'ultimo messaggio"),style:a,className:"_69xg",onClick:this.$40,children:b("React").jsx(b("Image.react"),{className:"_69xi",src:g("415099")})}):null};d.$29=function(a){var b=null;a=a&&a.platform_xmd&&JSON.parse(a.platform_xmd);var c=a&&a.message_classification==="ad_message";c&&Array.isArray(a&&a.quick_replies)&&(b=a&&a.quick_replies);return b};d.$30=function(a){a=a&&a.platform_xmd&&JSON.parse(a.platform_xmd);return Array.isArray(a&&a.quick_replies)?a&&a.quick_replies:null};d.$41=function(a){a=a&&a.platform_xmd&&JSON.parse(a.platform_xmd);return a&&a.user_input};d.$28=function(a){__p&&__p();var c=b("gkx")("964442");if(c){c=this.$41(a);if(!c){b("MessengerUserInputActionsHandler").updateUserInputRequested(!1,r);return}else c.type==="address_auto_complete"&&b("MessengerUserInputActionsHandler").updateUserInputRequested(!0,c.data.num_results,c.type)}return};d.$13=function(){if(this.props.useManualFetch)return;var a=this.$19();a&&a.getScrollTop()<s&&(this.props.fetchMessages(b("WebMessengerConstants").MORE_SEARCH_CONTEXT_UP),this.$23())};d.$31=function(a){__p&&__p();var c=this;a=this.$30(a);if(!a)return;var d=b("gkx")("953755");d&&a.some(function(a){return a.content_type==="user_birthday"})&&b("promiseDone")(b("WebGraphQL").exec(new(b("MessengerViewBirthdayQueryWebGraphQLQuery"))({})),function(a){a=(a=a)!=null?(a=a.viewer)!=null?(a=a.user)!=null?a.birthdate:a:a:a;if(a!==null){var b,d;d=(d=a)!=null?d.month:d;b=(b=a)!=null?b.day:b;a=(a=a)!=null?a.year:a;d&&b&&a&&c.setState({viewerBirthday:{day:b,month:d,year:a}})}});d=b("gkx")("989256");d&&a.some(function(a){return a.content_type==="user_state"||a.content_type==="user_zip_code"})&&(!this.state.viewerState||!this.state.viewerZipCode)&&(p()?b("promiseDone")(o(),function(a){var b=a==null?void 0:a.region;a=a==null?void 0:a.postal_code;c.setState({viewerState:b,viewerZipCode:a})}):(b("promiseDone")(b("WebGraphQL").exec(new(b("MessengerBusinessUserProfileLocationQueryWebGraphQLQuery"))({})),function(a){a=(a=a)!=null?(a=a.viewer)!=null?(a=a.user)!=null?a.address:a:a:a;if(a!=null){var d,e;e=(e=a)!=null?e.city:e;d=(d=a)!=null?d.country:d;e&&d==="US"&&c.setState({viewerState:b("MessengerQuickReplyUtils").parseStateFromCityAddress(e)});c.setState({viewerZipCode:(d=a)!=null?d.postal_code:d})}}),(!this.state.viewerState||!this.state.viewerZipCode)&&b("promiseDone")(b("WebGraphQL").exec(new(b("MessengerBusinessQuickReplyLocationQueryWebGraphQLQuery"))({})),function(a){__p&&__p();a=(a=a)!=null?a.in_thread_user_fuzzy_location_search:a;if(a!==null){if(!c.state.viewerState){var b;c.setState({viewerState:(b=a)!=null?b.state:b})}if(!c.state.viewerZipCode){c.setState({viewerZipCode:(b=a)!=null?b.zip_code:b})}}})));a.some(function(a){return a.content_type==="user_email"||a.content_type==="user_phone_number"})&&b("promiseDone")(b("WebGraphQL").exec(new(b("MessengerViewerContactMethodsWebGraphQLQuery"))({})),function(a){var b;b=(b=a)!=null?(b=b.viewer)!=null?(b=b.user)!=null?b.all_phones:b:b:b;a=(a=a)!=null?(a=a.viewer)!=null?a.all_emails:a:a;var d=b?b.find(function(a){return a.is_preferred}):null;!d&&b&&(d=b[0]);b=a?a.find(function(a){return a.is_primary}):null;c.setState({viewerEmail:(a=b)!=null?a.display_email:a,viewerPhone:(b=d)!=null?(b=b.phone_number)!=null?b.universal_number:b:b})})};d.isScrolledToBottom=function(){return!!(this.refs.scrollable&&this.refs.scrollable.isScrolledToBottom())};d.isScrolledToBottomWithHeight=function(a){return!!(this.refs.scrollable&&this.refs.scrollable.isScrolledToBottomWithHeight(a))};d.$42=function(){return b("React").jsx(m,{isOpen:this.state.showUnreadNotice,label:j._({"*":"{number} messaggi non letti","_1":"1 messaggio non letto"},[j._plural(this.state.unreadCount,"number")]),onClick:this.$43})};d.renderTopOfConversationNotice=function(){return b("React").jsxs(b("React").Fragment,{children:[b("React").jsx(D,{thread:this.props.thread}),this.$42()]})};d.$33=function(){return!this.props.isLoaded||this.props.hideContextBanner?null:b("React").jsx(b("MessengerContextBannerContainer.react"),{location:b("MercuryShareAttachmentRenderLocations").MESSENGER,thread:this.props.thread,threadID:this.props.threadID,viewer:this.props.viewer})};d.$34=function(){return this.props.isLoaded?null:b("React").jsx("div",{className:"_2k8v",children:this.props.isLoading?b("React").jsx(b("MessengerSpinner.react"),{}):null})};d.$27=function(){return b("React").jsx("div",{className:"_4xu0",children:b("React").jsx(b("MessengerSpinner.react"),{className:"_4xu1",size:b("MessengerSpinner.react").large_size})})};d.trackBottomIfRequired=function(){if(!this.refs)return;this.refs.scrollable&&this.refs.scrollable.trackBottomIfRequired()};d.scrollToBottom=function(a){if(!this.refs)return;this.refs.scrollable&&this.refs.scrollable.scrollToBottom(a)};d.scrollToTop=function(a){if(!this.refs)return;this.refs.scrollable&&this.refs.scrollable.scrollToTop(a)};d.$36=function(a){var b=this;if(A[a])return A[a];var c=function(){if(b.props.threadID!==a)return;b.trackBottomIfRequired()};A[a]=c;return c};d.$21=function(){var a=this;b("DOM").scry(b("ReactDOM").findDOMNode(this),"img").forEach(function(c){if(c.complete)return;var d=a.props.threadID,e=b("Event").listen(c,"load",function(){a.props.threadID===d&&a.trackBottomIfRequired(),e.remove()})})};d.$46=function(){var a=this.props.messages,b=this.state.unreadCount;return!b||b>a.size?null:a.get(a.size-b)};d.$26=function(a){__p&&__p();var b=this,c=this.props.messages,d=this.$46();if(!d)return!1;var e=a.getElement().getBoundingClientRect();return c.filter(function(a){return a&&a.timestamp<=d.timestamp}).some(function(a){a=b.refs.messageList.getMessageElement(a.message_id);if(!a)return!1;a=a.getBoundingClientRect();return a.bottom>e.top&&a.top<e.bottom})};d.$25=function(){__p&&__p();if(w&&this.state.unreadCount<v){this.refs.scrollable&&this.refs.scrollable.overrideTrackBottom(!1);var a=this.refs.messageList.getNewMessageDivider(),c=this.$19();if(!a||!c)return!1;a=a.getBoundingClientRect().top;var d=b("ReactDOM").findDOMNode(this.refs.messageList).getBoundingClientRect().top,e=c.getElement().getBoundingClientRect();if(a<e.top){a=a+Math.abs(d)-e.height*.2;c.setScrollTop(a,!1);this.setState({renderScrollToBottom:!0});return!0}}return!1};d.$22=function(a){__p&&__p();var b=this;if(!this.state.unreadCount)return;this.setState({scrollingToUnreadMessage:!0});var c=this.$46();if(!c){this.scrollToTop(!1);return}this.$24(c.message_id,a,function(){b.setState({scrollingToUnreadMessage:!1,unreadCount:0})})};d.$24=function(a,c,d){this.refs.scrollable&&this.refs.scrollable.overrideTrackBottom(!1);a=this.refs.messageList.getMessageElement(a,!0);var e=this.$19();if(!a||!e)return;a=a.getBoundingClientRect().top;var f=b("ReactDOM").findDOMNode(this.refs.messageList).getBoundingClientRect().top,g=e.getElement().getBoundingClientRect().height;a=a+Math.abs(f)-g/2;e.setScrollTop(a,c,{callback:d})};d.$19=function(){if(!this.refs)return;return this.refs.scrollable&&this.refs.scrollable.getArea()};d.$18=function(){this.$3&&this.$3.unsubscribe(),this.$3=null};d.$47=function(){return this.props.messages.filter(function(a){return b("MessengerAttachmentRenderer").isSingleVideoAttachment(a)||b("MessengerAttachmentRenderer").isSharedVideoAttachmentMessage(a)}).reverse().map(function(a){return a.message_id})};d.$44=function(a){__p&&__p();var c=this.refs.messageList;if(!c||!a)return;var d=[];a=a.getElement().getBoundingClientRect();var e=b("MessengerVideoAutoplayStore").getMessageIDs(this.props.threadID),f=e||this.$47()||b("immutable").List();f.map(function(a){var e=b("MessengerAttachmentRenderer").getVideoElem(a,c);e&&d.push([a,e.getBoundingClientRect()])});d.length&&b("MessengerVideoAutoplayActions").onScroll(this.props.threadID,e?null:f,b("immutable").Map(d),a)};d.$48=function(){return this.props.messages.filter(function(a){return b("MessengerAttachmentRenderer").isSingleSphericalPhotoAttachment(a)}).map(function(a){return a.message_id})};d.$45=function(a){__p&&__p();var c=this;b("ifRequired")("MessengerSphericalRendererActions",function(d){__p&&__p();b("ifRequired")("MessengerSphericalRendererStore",function(e){__p&&__p();var f=c.refs.messageList;if(!f||!a)return;var g=[],h=a.getElement().getBoundingClientRect();e=e.getMessageIDs(c.props.threadID);e=e||c.$48()||b("immutable").List();e.map(function(a){var c=b("MessengerAttachmentRenderer").getSphericalPhotoElem(a,f);c&&g.push([a,c.getBoundingClientRect()])});g.length&&d.onScroll(c.props.threadID,e,b("immutable").Map(g),h)},function(){})},function(){})};d.$23=function(){var a=this;b("MessengerVideoAutoplayActions").updateStore(this.props.threadID,this.$47());var c=this.$48();c&&c.count()!==0&&b("ifRequired")("MessengerSphericalRendererActions",function(b){b.updateStore(a.props.threadID,c)},function(){b("Bootloader").loadModules(["MessengerSphericalRendererActions","MessengerSphericalRendererStore"],function(b,d){b.updateStore(a.props.threadID,c)},"MessengerConversation.react")})};d.$35=function(){if(b("CurrentUser").isWorkUser())return!1;return this.props.messages.size!==0?!1:!0};return c}(b("React").PureComponent);c.propTypes={contact:a.instanceOf(b("ImmutableObject")),deliveryTimestamp:a.number.isRequired,downExhausted:a.bool,fetchMessages:a.func.isRequired,hideContextBanner:a.bool,innerClassName:a.string,isCanonical:a.bool,isLoaded:a.bool,isLoading:a.bool,isMessengerAdPreview:a.bool,messages:a.instanceOf(b("immutable").List).isRequired,onVoiceClipCreate:a.func,onReplyToMessage:a.func,readReceipts:a.any,thread:a.object,threadID:a.string.isRequired,upExhausted:a.bool,useM4QR:a.bool,useManualFetch:a.bool,viewer:a.string.isRequired,selectedMessage:a.string,isSearchResult:a.bool};function B(a){__p&&__p();var c=b("MercuryIDs").getParticipantIDFromUserID(a.viewer),d=b("MessengerReadReceipt.bs").getSeenTimestamps(a.readReceipts,a.threadID),e=new Set(a.thread?a.thread.participants:d.keys());e["delete"](c);var f=null;b("immutable").Seq(a.messages).reverse().forEach(function(a){if(a.action_type!=="ma-type:log-message"){f=a;return!1}return!0});return d.withMutations(function(c){__p&&__p();b("immutable").Seq(a.messages).reverse().forEach(function(a){__p&&__p();if(e.size===0)return!1;if(!e.has(a.author))return;c.update(a.author,function(b){if(!b)return void 0;var c=b;b.watermark<=a.timestamp&&(c={watermark:a.timestamp,action:a.timestamp});f&&f.timestamp<c.watermark&&(c={watermark:f.timestamp,action:f.timestamp});return c});e["delete"](a.author)})})}function C(a,c){var d=b("MercuryIDs").getParticipantIDFromUserID(c.viewer);return c.threadID===a.threadID&&c.messages!==a.messages&&!c.messages.isEmpty()&&c.messages.last()!==a.messages.last()&&c.messages.last().author===d}function D(a){a=a.thread;a=a==null?void 0:a.pinned_messages;return a==null||!b("gkx")("1179386")?null:b("React").jsx(b("React").Suspense,{fallback:b("React").jsx("div",{}),children:b("React").jsx(y,{pinnedMessages:a})})}e.exports=c}),null);
__d("MessengerAudioAvailableIconSVGM4React.bs",["React"],(function(a,b,c,d,e,f){"use strict";function a(a){var c;return(c=b("React")).jsx("svg",{children:c.jsxs("g",{children:[c.jsx("polygon",{id:"Fill-8",points:"0 36 36 36 36 0 0 0"}),c.jsx("path",{id:"Fill-11",d:"M12.8546683,23.0915802 C10.2003459,20.4371382 8.18827548,17.4933995 7.18895039,14.801598 C6.11677282,11.9134196 6.30082118,9.54827444 7.70754499,8.14106577 C8.38574404,7.46332572 9.22115105,6.9556194 9.80301228,6.64860076 C10.1768605,6.45174482 10.6202062,6.44887101 10.9902201,6.6495587 C12.2608248,7.33735708 14.2542027,9.8624776 14.6055242,11.228016 C14.6980277,11.5867632 14.6266131,11.9694589 14.4094936,12.2774354 L12.8029047,14.5630718 C12.7056083,14.7019726 12.682123,14.8820647 12.7415553,15.0406032 C13.4096892,16.8233229 14.2192144,18.3129141 15.9254961,20.01852 C17.6303399,21.7246049 19.1209399,22.5340612 20.904867,23.2027008 C21.0635129,23.2625718 21.2432476,23.2391024 21.3822424,23.1413929 L23.6205389,21.5679822 C23.9339963,21.3476569 24.313596,21.2868279 24.6572488,21.3696894 C26.1948195,21.7356211 28.7992956,23.6898115 29.3811568,24.9135753 C29.5474713,25.2637011 29.5388441,25.6674713 29.3576715,26.0209499 C29.0993327,26.5267404 28.5534185,27.4875506 27.8018877,28.2395308 C24.2474537,31.7915592 16.8807262,27.1187451 12.8546683,23.0915802",fill:a})],id:"phone",fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"}),height:"32px",width:"32px",viewBox:"0 0 36 36"})}f.make=a}),null);
__d("MessengerAudioUnavailableIconSVGM4React.bs",["React"],(function(a,b,c,d,e,f){"use strict";function a(a){var c;return(c=b("React")).jsx("svg",{children:c.jsxs("g",{children:[c.jsx("polygon",{id:"Fill-4",points:"0 36 36 36 36 0 0 0"}),c.jsx("path",{id:"new",d:"M21.3821106,23.1416542 L23.6204291,21.5682415 C23.9343688,21.3479158 24.313493,21.2866078 24.6571492,21.3694694 C26.194735,21.7354016 28.7997159,23.6900735 29.3811036,24.9138389 C29.5474198,25.2639652 29.5387924,25.667257 29.3580973,26.0212149 C29.0997561,26.5265271 28.5538364,27.4878176 27.8022982,28.2393197 C24.24735,31.7918318 16.8805501,27.1185326 12.8549319,23.0918414 C10.200104,20.437396 8.18849316,17.4931744 7.18915824,14.8013694 C6.11649083,11.9131872 6.3010203,9.54803895 7.70775794,8.14130741 C8.38548436,7.4630875 9.22137889,6.95538051 9.80276654,6.64884044 C10.1766185,6.45150527 10.6199685,6.44911042 10.989986,6.64931941 C12.2610825,7.33759766 14.2544801,9.86224252 14.605805,11.2282617 C14.6978301,11.5865304 14.6264148,11.9692265 14.4097724,12.2776825 L12.8031678,14.5633219 C12.7053911,14.7017439 12.6823849,14.8818362 12.7418177,15.0403749 C13.4099582,16.823097 14.2194914,18.3126901 15.9253105,20.0182982 C17.6306504,21.7243853 19.1212651,22.5343216 20.9047304,23.2029622 C21.0633779,23.2623543 21.2435936,23.2388848 21.3821106,23.1416542 M29.7074342,7.70752502 L25.9144427,11.4999687 L29.7074342,15.2929126 C30.0975219,15.6835613 30.0975219,16.3168024 29.7069347,16.7074511 C29.3163475,17.0975996 28.6835163,17.0975996 28.2929291,16.7069509 L24.4999376,12.9145072 L20.7074455,16.7069509 C20.3168583,17.0975996 19.6835276,17.0975996 19.2929404,16.7074511 C18.9023532,16.3168024 18.9023532,15.6835613 19.2929404,15.2929126 L23.0859319,11.4999687 L19.2929404,7.70752502 C18.9023532,7.31687631 18.9023532,6.68363525 19.2929404,6.29348672 L19.2929404,6.29298653 C19.6835276,5.90233782 20.3168583,5.90233782 20.7074455,6.29298653 L24.4999376,10.0859304 L28.2929291,6.29298653 C28.6835163,5.90233782 29.3163475,5.90233782 29.7069347,6.29298653 L29.7074342,6.29348672 C30.0975219,6.68363525 30.0975219,7.31687631 29.7074342,7.70752502",fill:a})],id:"phone-missed",fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"}),height:"32px",width:"32px",viewBox:"0 0 36 36"})}f.make=a}),null);
__d("MessengerForeignUserCompanyNameReact.bs",["React","bs_caml_option"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a){var c=a.className;a=a.companyName;if(a!==void 0){a={children:a};c!==void 0&&(a.className=b("bs_caml_option").valFromOption(c));return b("React").jsx("span",a)}else return null}c=a;f.make=c}),null);
__d("MessengerInfoIconSVGM4React.bs",["React"],(function(a,b,c,d,e,f){"use strict";function a(a){var c;return(c=b("React")).jsx("svg",{children:c.jsx("g",{children:c.jsxs("g",{children:[c.jsx("polygon",{id:"Fill-8",points:"0 36 36 36 36 0 0 0"}),c.jsx("path",{id:"Fill-17",d:"M18,10 C16.6195,10 15.5,11.119 15.5,12.5 C15.5,13.881 16.6195,15 18,15 C19.381,15 20.5,13.881 20.5,12.5 C20.5,11.119 19.381,10 18,10 Z M16,25 C16,25.552 16.448,26 17,26 L19,26 C19.552,26 20,25.552 20,25 L20,18 C20,17.448 19.552,17 19,17 L17,17 C16.448,17 16,17.448 16,18 L16,25 Z M18,30 C11.3725,30 6,24.6275 6,18 C6,11.3725 11.3725,6 18,6 C24.6275,6 30,11.3725 30,18 C30,24.6275 24.6275,30 18,30 Z",fill:a})],id:"Group"}),id:"info-circle",fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"}),height:"32px",width:"32px",viewBox:"0 0 36 36"})}f.make=a}),null);
__d("MessengerInfoPanelButtonReact.bs",["ix","cx","Image.bs","React","asset","CurrentUser","ReasonReact.bs"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i={height:"32px",width:"32px"};function j(a){var c;return(c=b("React")).createElement("svg",{viewBox:"0 0 64 64"},c.createElement("g",void 0,c.createElement("g",void 0,c.createElement("path",{style:{fill:a},d:"M32,10c-12.2,0-22,9.8-22,22s9.8,22,22,22s22-9.8,22-22S44.2,10,32,10z M32,19c1.6,0,3,1.4,3,3s-1.4,3-3,3 c-1.6,0-3-1.4-3-3S30.4,19,32,19z M36,45h-2h-4h-2v-1h2V29h-2v-1h2h4v1v15h2V45z"}))))}function k(a){var c,d={fill:a};return(c=b("React")).createElement("svg",{style:{stroke:a},viewBox:"0 0 64 64"},c.createElement("g",void 0,c.createElement("polygon",{style:d,points:"34,44 34,29 34,28 30,28 28,28 28,29 30,29 30,44 28,44 28,45 30,45 34,45 36,45 36,44"}),c.createElement("circle",{style:d,cx:"32",cy:"22",r:"3"})),c.createElement("path",{style:{fill:"none",stroke:a,strokeMiterlimit:"10",strokeWidth:"2"},d:"M32,11c11.6,0,21,9.4,21,21s-9.4,21-21,21s-21-9.4-21-21S20.4,11,32,11z"}))}function a(a,c){var d=b("CurrentUser").isWorkUser();if(d)return b("React").createElement("div",{className:"_2phz"},b("ReasonReact.bs").element(void 0,void 0,b("Image.bs").make(void 0,void 0,void 0,void 0,c?g("413962"):g("413953"),void 0,void 0,void 0,void 0,[])));else return b("React").createElement("div",{style:i},c?k(a):j(a))}f.svgWrapperStyle=i;f.selected=j;f.notSelected=k;f.make=a}),null);
__d("MessengerPresenceStatusReact.bs",["fbt","React","bs_caml_option"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();function a(a){var c=a.className,d=a.isUserActive,e=a.lastActive;a=a.platform;var f,h=0;d&&a!==void 0?f=g._("Attivo\/a su {platform}",[g._param("platform",a)]):h=1;h===1&&(f=e!==void 0?g._("Attivo\/a {time} fa",[g._param("time",e)]):null);d={children:f};c!==void 0&&(d.className=b("bs_caml_option").valFromOption(c));return b("React").jsx("div",d)}c=a;f.make=c}),null);
__d("MessengerProfilePresenceReact.bs",["React","bs_belt_Set","bs_caml_option","ParticipantId.bs","MessengerParticipantUtils.bs","MessengerPresenceProvider.bs","MessengerThreadImageM4React.bs"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a){__p&&__p();var c=a.borderColor,d=a.className,e=a.expanded,f=a.size,g=a.storiesRingEligible,h=a.thread,i=a.viewer;a=function(a){a=b("MessengerParticipantUtils.bs").findIntersection(i,a,h).length>0;a={isActive:a,size:f,thread:h,viewer:i};c!==void 0&&(a.borderColor=b("bs_caml_option").valFromOption(c));d!==void 0&&(a.className=b("bs_caml_option").valFromOption(d));e!==void 0&&(a.expanded=b("bs_caml_option").valFromOption(e));g!==void 0&&(a.storiesRingEligible=b("bs_caml_option").valFromOption(g));return b("React").jsx(b("MessengerThreadImageM4React.bs").make,a)};return b("React").jsx(b("MessengerPresenceProvider.bs").make,{subscribeToIDs:b("bs_belt_Set").fromArray(h.participants,b("ParticipantId.bs")),children:a})}c=a;f.make=c}),null);
__d("MessengerRTCUnavailableDialog.react",["fbt","MessengerDialog.react","MessengerDialogBodyReact.bs","MessengerDialogButton.react","MessengerDialogFooter.react","MessengerDialogHeaderReact.re","MessengerDialogs.bs","React"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("MessengerDialogBodyReact.bs").jsComponent,i=b("MessengerDialogHeaderReact.re").make;a=b("React").PropTypes;c=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){var a;return(a=b("React")).jsxs(b("MessengerDialog.react"),{onToggle:this.$1,children:[a.jsx(i,{children:g._("Impossibile effettuare la chiamata")}),a.jsx(h,{children:this.$2()}),a.jsx(b("MessengerDialogFooter.react"),{children:a.jsx(b("MessengerDialogButton.react"),{action:"cancel",label:g._("Ok"),type:"primary"})})]})};d.$2=function(){return b("React").jsx("div",{children:g._("{name} non \u00e8 disponibile al momento.",[g._param("name",this.props.name)])})};d.$1=function(a){a||b("MessengerDialogs.bs").removeDialog()};return c}(b("React").Component);c.propTypes={name:a.string.isRequired};e.exports=c}),null);
__d("MessengerRTCInvokeHandler",["invariant","MercuryIDs","MercuryThreadIDMap","MessengerDialogs.bs","MessengerRTCUnavailableDialog.react","MNRTCCallabilityStore","React","FBRTCLogger","RTWebUserActionLogger","nullthrows","qex"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("MercuryThreadIDMap").get(),i=b("FBRTCLogger").Trigger;a={isCallable:function(a,c){var d;if(b("MercuryIDs").isGroupChat(a))d=!0;else{a=b("MercuryIDs").getUserIDFromThreadID(a);d=a!=null?b("MNRTCCallabilityStore").isCallable(a,c):!1}return d},handleStartCall:function(a,c,e,f,k,l,m,n){__p&&__p();m?b("MercuryIDs").isGroupChat(a)?(b("RTWebUserActionLogger").logPreCallClick({conferenceName:c.thread_fbid!=null?"GROUP:"+c.thread_fbid:null,surface:"messenger_header",component:b("RTWebUserActionLogger").getAudioVideoComponent(!e),callType:"mw",mediaType:b("RTWebUserActionLogger").getMediaType(!e)}),d(["FBRTCCore","FBRTCSupport","MessengerRTCUnsupportedBrowserDialogController","MessengerRTCGroupCallParticipantsPickerDialogController"],function(d,g,l,m){__p&&__p();var n=c.rtc_call_data,o=b("MercuryIDs").isGroupChat(a)&&k.size===1;if(n&&(n.call_state!=="NO_ONGOING_CALL"&&n.server_info_data||o)){d.startGroupCall({conferenceName:"GROUP:"+b("nullthrows")(c.thread_fbid),hasVideo:e,serverInfoData:n.server_info_data,trigger:o?e?i.MULTIWAY_THREAD_HEADER_VIDEO_BUTTON:i.MULTIWAY_THREAD_HEADER_AUDIO_BUTTON:n.call_state!=="AUDIO_GROUP_CALL"?e?i.MULTIWAY_THREAD_HEADER_JOIN_AUDIO_CALL_VIDEO_BUTTON:i.MULTIWAY_THREAD_HEADER_JOIN_AUDIO_CALL_AUDIO_BUTTON:e?i.MULTIWAY_THREAD_HEADER_JOIN_VIDEO_CALL_VIDEO_BUTTON:i.MULTIWAY_THREAD_HEADER_JOIN_VIDEO_CALL_AUDIO_BUTTON});return}if(!g.isGroupCallWebtrcSupported()){j(a,c,e);l.render({hasVideo:e,isGroupCall:!0});return}if(k.size>0){o=b("qex")._("1006758")||0;n=k.filter(function(a){a=a.fbid;return a!==f}).toArray().map(function(a){a=a.fbid;return a});if(n.length<o){d.startGroupCall({conferenceName:"GROUP:"+b("nullthrows")(c.thread_fbid),hasVideo:e,trigger:e?i.MULTIWAY_THREAD_HEADER_VIDEO_BUTTON:i.MULTIWAY_THREAD_HEADER_AUDIO_BUTTON,usersToRing:n});return}}var p=function(a){m.render({participants:k.filter(function(a){a=a.fbid;return a!==f}),thread:c,viewerID:f,trigger:e?i.MULTIWAY_THREAD_HEADER_VIDEO_BUTTON:i.MULTIWAY_THREAD_HEADER_AUDIO_BUTTON,conferenceName:"GROUP:"+a,hasVideo:e})};b("MercuryIDs").isLocalThread(a)?h.getServerIDFromClientID(a,function(a){return p(a)}):p(b("MercuryIDs").getThreadFBIDFromThreadID(a))})):d(["FBRTCCore","FBRTCSupport","MessengerRTCUnsupportedBrowserDialogController"],function(d,f,h){if(!f.isWebrtcSupported()){j(a,c,e);h.render({hasVideo:e,isGroupCall:!1});return}f=b("MercuryIDs").getUserIDFromThreadID(a);f!=null||g(0,2744);h=e?"messenger_dot_com_video_call":"messenger_dot_com_audio_call";d.startOutgoingCall(f,h,!e,!1,n)}):(j(a,c,e),b("MessengerDialogs.bs").showDialog(function(){return b("React").jsx(b("MessengerRTCUnavailableDialog.react"),{name:l})}))}};function j(a,c,d){b("RTWebUserActionLogger").logError({callType:b("MercuryIDs").isGroupChat(a)?"mw":"p2p",conferenceName:c.thread_fbid!=null?"GROUP:"+c.thread_fbid:null,mediaType:b("RTWebUserActionLogger").getMediaType(!d),errorDomain:"unsupported browser"})}e.exports=a}),null);
__d("MessengerVideoAvailableIconSVGM4React.bs",["React"],(function(a,b,c,d,e,f){"use strict";function a(a){var c;return(c=b("React")).jsx("svg",{children:c.jsxs("g",{children:[c.jsx("polygon",{id:"Fill-8",points:"0 36 36 36 36 0 0 0"}),c.jsx("path",{id:"original",d:"M20,27 L9,27 C6.791,27 5,25.209 5,23 L5,13 C5,10.791 6.791,9 9,9 L20,9 C22.209,9 24,10.791 24,13 L24,23 C24,25.209 22.209,27 20,27 M30.5525,23.3995 L26.829,21.536 C26.321,21.282 26,20.762 26,20.193 L26,15.808 C26,15.2395 26.321,14.719 26.829,14.465 L30.5525,12.6015 C31.218,12.269 32,12.753 32,13.497 L32,22.504 C32,23.2485 31.218,23.732 30.5525,23.3995",fill:a})],id:"camcorder",fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"}),height:"32px",width:"32px",viewBox:"0 0 36 36"})}f.make=a}),null);
__d("MessengerVideoUnavailableIconSVGM4React.bs",["React"],(function(a,b,c,d,e,f){"use strict";function a(a){var c;return(c=b("React")).jsx("svg",{children:c.jsxs("g",{children:[c.jsx("polygon",{id:"Fill-1",points:"0 36 36 36 36 0 0 0"}),c.jsx("path",{id:"original",d:"M6.52219159,23.73575 C6.00847773,24.24975 5.008035,24.00175 5.008035,23.01175 L5.008035,13.00725 C5.008035,10.79725 6.79803794,9.00525 9.00680761,9.00525 L19.1191748,9.00575 C19.9062364,9.00575 20.3005168,9.95775 19.7438269,10.51425 L6.52219159,23.73575 Z M27.1966755,8.70725 L24.589128,11.31625 C24.2143368,11.69125 24.0039539,12.19925 24.0039539,12.72875 L24.0019551,23.01175 C24.0019551,25.22175 22.2149504,27.00675 20.0061808,27.00675 L9.73590149,27.00675 C9.20569683,27.00675 8.69698019,27.21725 8.32218896,27.59225 L5.20642449,30.70925 C4.81614189,31.10025 4.18249484,31.10025 3.79271195,30.70925 C3.40242935,30.31875 3.40242935,29.68575 3.79271195,29.29525 L25.782963,7.29325 C26.1727459,6.90225 26.8063929,6.90225 27.1966755,7.29325 C27.5869581,7.68375 27.5869581,8.31725 27.1966755,8.70725 Z M30.5533058,23.41125 L26.8308793,21.54725 C26.3226624,21.29275 26.0018411,20.77225 26.0018411,20.20375 L26.0018411,15.81625 C26.0018411,15.24725 26.3226624,14.72725 26.8308793,14.47275 L30.5533058,12.60875 C31.2179356,12.27575 32,12.75975 32,13.50425 L32,22.51575 C32,23.25975 31.2179356,23.74425 30.5533058,23.41125 Z",fill:a})],id:"camcorder-cross",fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"}),height:"32px",width:"32px",viewBox:"0 0 36 36"})}f.make=a}),null);
__d("RTWebLoggingComponent",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({AUDIO_CALL:"audio_button",VIDEO_CALL:"video_button",START_CALL:"start_call_button",END_CALL:"end_call_button",JOIN_CALL:"join_call_button",CANCEL:"cancel_button",CALL_BACK:"call_back",CALL_AGAIN:"call_again",CHAT_PANEL_MESSAGE:"chat_panel_message",REDIAL:"redial",SCREENSHARING:"screensharing",SCREENSHARING_POP_OUT:"screensharing_pop_out_button",TOGGLE_VIDEO:"toggle_video",TOGGLE_AUDIO:"toggle_audio",TOGGLE_CHAT:"toggle_chat",TOGGLE_CAMERA:"toggle_camera",CLOSE_CHAT:"close_chat",TOGGLE_FILTERS:"toggle_filters",SCROLL_FILTERS:"scroll_filters",VIDEO_FILTER_OPTION:"video_filter_option",ADD_PARTICIPANT:"add_participant",FULLSCREEN:"fullscreen",FULLSCREEN_ENABLE:"fullscreen_enable",FULLSCREEN_DISABLE:"fullscreen_disable",CLOSE_WINDOW:"close_window",ACCEPT:"accept_button",DECLINE:"decline_button",NOT_NOW:"rating_not_now",SELF_VIEW:"self_view",SELF_VIEW_MINIMIZE:"self_view_minimize",SELF_VIEW_UNMINIMIZE:"self_view_unminimize",PARTICIPANT_ROW_SELECT:"participant_row_select",PARTICIPANT_ROW_UNSELECT:"participant_row_unselect",STAR_RATING:"star_rating",SUBMIT_FEEDBACK:"submit_feedback",SETTINGS:"settings",CLOSE_DIALOG:"close_dialog",INCOMING_RING_TONE:"incoming_ring_tone",FREE_CALL:"free_call",VIDEO_ESCALATE:"video_escalate",VIDEO_ESCALATE_ACCEPT:"video_escalate_accept",VIDEO_ESCALATE_DECLINE:"video_escalate_decline",RECENT_CALLS:"recent_calls",MESSAGE:"message",SAVE:"save_button",WINDOW_RESIZE:"window_resize",POOR_NETWORK_TOOLTIP:"poor_network_tooltip",VIDEO_LAYOUT_SWITCH:"video_layout_switch",MWEB_ROSTER_ROW:"mweb_roster_row",BANNER:"banner"})}),null);
__d("MessengerRTCVideoCallButtonReact.bs",["ix","cx","fbt","Image.bs","React","asset","CurrentUser","ReasonReact.bs","RTWebUserActionLogger","MessengerDotComAndInboxM4Check.bs","MessengerVideoAvailableIconSVGM4React.bs","MessengerVideoUnavailableIconSVGM4React.bs","VideoCallWebDriverIDs","RTWebLoggingComponent","RTWebLoggingSurface"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j={height:"32px",width:"32px"},k=b("ReasonReact.bs").statelessComponent("MessengerRTCVideoCallButtonReact");function l(a,c,d,e){__p&&__p();return[k[0],k[1],k[2],k[3],function(a){b("RTWebUserActionLogger").logImpression({callType:b("RTWebUserActionLogger").getCallType(d),component:b("RTWebLoggingComponent").AUDIO_CALL,surface:b("RTWebLoggingSurface").MESSENGER_HEADER});return 0},k[5],k[6],k[7],function(e){__p&&__p();e=d?i._("Avvia una videochiamata di gruppo"):i._("Inizia una videochiamata");var f=b("React").createElement("div",{"aria-label":e,className:"_2phz"},b("ReasonReact.bs").element(void 0,void 0,b("Image.bs").make(void 0,void 0,void 0,void 0,g("470488"),void 0,e,void 0,void 0,[]))),h;if(b("MessengerDotComAndInboxM4Check.bs").yes)h=b("React").createElement("div",{"aria-label":e,style:j,title:e},c?b("MessengerVideoAvailableIconSVGM4React.bs").make(a):b("MessengerVideoUnavailableIconSVGM4React.bs").make(a));else{var k=c?a:"#888888";k={clipRule:"evenodd",fill:"none",fillRule:"evenodd",stroke:k,strokeMiterlimit:"10",strokeWidth:"2"};h=b("React").createElement("div",{"aria-label":e,style:j,title:e},b("React").createElement("svg",{style:k,viewBox:"0 0 64 64"},b("React").createElement("title",void 0,e),b("React").createElement("g",void 0,b("React").createElement("g",void 0,b("React").createElement("path",{d:"M47,27.8v7.5l9,4.5V23.2L47,27.8z M37.2,17H13.8C10.6,17,8,19.6,8,22.8v17.4c0,3.2,2.6,5.8,5.8,5.8h23.3\nc3.2,0,5.8-2.6,5.8-5.8V22.8C43,19.6,40.4,17,37.2,17z"})))))}k=b("VideoCallWebDriverIDs").START_VIDEO_CALL;e=b("CurrentUser").isWorkUser();return b("React").cloneElement(e?f:h,{"data-testid":k})},k[9],k[10],k[11],k[12]]}a=b("ReasonReact.bs").wrapReasonForJs(k,function(a){return l(a.customColor,a.isAvailable,a.isGroupChat,[])});f.videoCallWebDriverIDs=b("VideoCallWebDriverIDs");f.rtWebLoggingComponent=b("RTWebLoggingComponent");f.rtWebLoggingSurface=b("RTWebLoggingSurface");f.svgWrapperStyle=j;f.component=k;f.make=l;f.jsComponent=a}),null);
__d("MessengerRTCVoiceCallButtonReact.bs",["ix","cx","fbt","Image.bs","React","asset","CurrentUser","ReasonReact.bs","RTWebUserActionLogger","MessengerDotComAndInboxM4Check.bs","MessengerAudioAvailableIconSVGM4React.bs","MessengerAudioUnavailableIconSVGM4React.bs","VideoCallWebDriverIDs","RTWebLoggingComponent","RTWebLoggingSurface"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j={height:"32px",width:"32px"},k=b("ReasonReact.bs").statelessComponent("MessengerRTCVoiceCallButtonReact");function l(a,c,d,e){__p&&__p();return[k[0],k[1],k[2],k[3],function(a){b("RTWebUserActionLogger").logImpression({callType:b("RTWebUserActionLogger").getCallType(d),component:b("RTWebLoggingComponent").VIDEO_CALL,surface:b("RTWebLoggingSurface").MESSENGER_HEADER});return 0},k[5],k[6],k[7],function(e){__p&&__p();e=d?i._("Avvia una chiamata di gruppo"):i._("Inizia una chiamata");var f=b("React").createElement("div",{"aria-label":e,className:"_2phz"},b("ReasonReact.bs").element(void 0,void 0,b("Image.bs").make(void 0,void 0,void 0,void 0,g("470545"),void 0,e,void 0,void 0,[]))),h;if(b("MessengerDotComAndInboxM4Check.bs").yes)h=b("React").createElement("div",{"aria-label":e,style:j,title:e},c?b("MessengerAudioAvailableIconSVGM4React.bs").make(a):b("MessengerAudioUnavailableIconSVGM4React.bs").make(a));else{var k=c?a:"#888888";k={clipRule:"evenodd",fill:"none",fillRule:"evenodd",stroke:k,strokeMiterlimit:"10",strokeWidth:"2"};h=b("React").createElement("div",{"aria-label":e,style:j,title:e},b("React").createElement("svg",{style:k,viewBox:"0 0 64 64"},b("React").createElement("title",void 0,e),b("React").createElement("path",{d:"M48.3,50.5c-7.7,6.5-24.2-10-24.5-10.3C23.5,39.9,7,23.4,13.5,15.7c4.8-5.7,6.3-3.4,7-2.7\nc0.6,0.5,5.7,7.8,6,9.2c0.3,1.4-2.4,4.6-2.2,5.9c0.2,1.2,3.6,5,5.1,6.5c1.5,1.5,5.3,4.9,6.5,5.1c1.2,0.2,4.4-2.5,5.9-2.2\nc1.4,0.3,8.7,5.4,9.2,6C51.6,44.2,54,45.7,48.3,50.5z"})))}k=b("VideoCallWebDriverIDs").START_VOICE_CALL;e=b("CurrentUser").isWorkUser();return b("React").cloneElement(e?f:h,{"data-testid":k})},k[9],k[10],k[11],k[12]]}a=b("ReasonReact.bs").wrapReasonForJs(k,function(a){return l(a.customColor,a.isAvailable,a.isGroupChat,[])});f.videoCallWebDriverIDs=b("VideoCallWebDriverIDs");f.rtWebLoggingComponent=b("RTWebLoggingComponent");f.rtWebLoggingSurface=b("RTWebLoggingSurface");f.svgWrapperStyle=j;f.component=k;f.make=l;f.jsComponent=a}),null);
__d("MessengerRTCCallButton.react",["ImmutableObject","Link.react","MercuryIDs","MessengerRTCInvokeHandler","MessengerRTCVideoCallButtonReact.bs","MessengerRTCVoiceCallButtonReact.bs","MNRTCCallabilityStore","React","StoreAndPropBasedStateMixin","immutable"],(function(a,b,c,d,e,f){"use strict";var g=b("MessengerRTCVideoCallButtonReact.bs").jsComponent,h=b("MessengerRTCVoiceCallButtonReact.bs").jsComponent;a=b("React").PropTypes;c=b("React").createClass({displayName:"MessengerRTCCallButton",mixins:[b("StoreAndPropBasedStateMixin")(b("MNRTCCallabilityStore"))],statics:{calculateState:function(a){return{isCallable:b("MessengerRTCInvokeHandler").isCallable(a.threadID,a.thread)}}},propTypes:{className:a.string.isRequired,customColor:a.string.isRequired,isVideo:a.bool.isRequired,participants:a.instanceOf(b("immutable").Map).isRequired,thread:a.instanceOf(b("ImmutableObject")).isRequired,threadID:a.string.isRequired,viewer:a.string.isRequired,calleeName:a.string.isRequired,isCalleeActive:a.bool},render:function(){var a={customColor:this.props.customColor,isAvailable:this.state.isCallable,isGroupChat:b("MercuryIDs").isGroupChat(this.props.threadID)};return b("React").jsx(b("Link.react"),{className:this.props.className,onClick:this._handleStartCall,role:"button",children:this.props.isVideo?b("React").jsx(g,babelHelpers["extends"]({},a)):b("React").jsx(h,babelHelpers["extends"]({},a))})},_handleStartCall:function(a){a.preventDefault(),b("MessengerRTCInvokeHandler").handleStartCall(this.props.threadID,this.props.thread,this.props.isVideo,this.props.viewer,this.props.participants,this.props.calleeName,this.state.isCallable,this.props.isCalleeActive)}});e.exports=c}),null);
__d("MessengerRTCCallButtonReact.bs",["ReasonReact.bs","MessengerRTCCallButton.react"],(function(a,b,c,d,e,f){"use strict";function a(a,c,d,e,f,g,h,i,j,k){return b("ReasonReact.bs").wrapJsForReason(b("MessengerRTCCallButton.react"),{className:a,customColor:c,isVideo:d,participants:e,thread:f,threadID:g,viewer:h,calleeName:i,isCalleeActive:j},k)}f.make=a}),null);
__d("MessengerWebDriverTestIDs",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({ANIMATED_IMAGE:"animated_image",ATTACHMENT_ROOT:"attachment_root",CHAT_SIDEBAR:"chat_sidebar",INFO_PANEL:"info_panel",SSO_LOGIN_BUTTON:"sso_login_button",INFO_PANEL_BUTTON:"info_panel_button",STICKER:"sticker",SIDEBAR_ITEM:"sidebar_item",DESKTOP_LOGIN_VIEW:"XMessengerDotComLoginViewPlaceholder",CHAT_INPUT:"chat_input:plaintext",CHAT_INPUT_RICH:"chat_input:rich-input"})}),null);
__d("MontageThreadViewContainer.react",["CurrentUser","JSResource","React","gkx","immutable","lazyLoadComponent"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("lazyLoadComponent")(b("JSResource")("MessengerStateMontageThreadView.react").__setRef("MontageThreadViewContainer.react")),h=b("lazyLoadComponent")(b("JSResource")("MontageThreadViewContainerImpl.react").__setRef("MontageThreadViewContainer.react"));a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){__p&&__p();if(b("gkx")("678586")&&!this.props.shouldUseRelay){var a=b("CurrentUser").getID();if(this.props.montageData!=null&&this.props.participants!=null){var c=this.props.montageData,d=this.props.participants;d=Array.from(d.values()).map(function(a){return a.fbid!=null?a.fbid:""}).filter(function(b){return b!==a});var e=d.length===0;e=e?c[a]:c[d[0]];return b("React").jsx(b("React").Suspense,{fallback:b("React").jsx("div",{}),children:b("React").jsx(g,{montageData:e?e:[]})})}return b("React").jsx(b("React").Suspense,{fallback:b("React").jsx("div",{}),children:b("React").jsx(g,{montageData:[]})})}return b("React").jsx(b("React").Suspense,{fallback:b("React").jsx("div",{}),children:b("React").jsx(h,babelHelpers["extends"]({},this.props))})};return c}(b("React").PureComponent);e.exports=a}),null);
__d("MontageThreadViewContainerReact.bs",["ReasonReact.bs","bs_js_null_undefined","MontageThreadViewContainer.react"],(function(a,b,c,d,e,f){"use strict";function a(a,c,d,e,f,g){return b("ReasonReact.bs").wrapJsForReason(b("MontageThreadViewContainer.react"),{threadID:a,montageData:c,onResize:b("bs_js_null_undefined").fromOption(f),participants:d,shouldUseRelay:e},g)}f.make=a}),null);
__d("WorkChatDoNotDisturbStatusReact.bs",["ReasonReact.bs","WorkChatDoNotDisturbStatus"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a,c,d,e,f){var g=b("WorkChatDoNotDisturbStatus").component;if(g==null){var h=b("ReasonReact.bs").statelessComponent("WorkChatDoNotDisturbStatusReact.re");return[h[0],h[1],h[2],h[3],h[4],h[5],h[6],h[7],function(a){return null},h[9],h[10],h[11],h[12]]}else return b("ReasonReact.bs").wrapJsForReason(g,{className:a,thread:c,isDoNotDisturb:d,description:e},f)}f.make=a}),null);
__d("messengerCalculateTruncationState",["Style"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a,c,d,e,f){__p&&__p();if(!e||!c)return;f=f?f.offsetWidth:0;e=Math.ceil(.5*(a.offsetWidth+e.offsetWidth));var g=a.offsetWidth-d.offsetWidth-12;if(e<=g)b("Style").set(a,"text-align","center"),b("Style").set(c,"width","auto"),b("Style").set(c,"margin-left","auto");else{document.body.dir==="rtl"?b("Style").set(a,"text-align","right"):(b("Style").set(a,"text-align","left"),b("Style").set(c,"margin-left",f+"px"));e=Math.max(a.offsetWidth-f-d.offsetWidth-11,0);b("Style").set(c,"width",e+"px")}}e.exports=a}),null);
__d("MessengerDetailViewHeaderReact.bs",["cx","fbt","FBID.bs","bs_curry","Event","React","gkx","Bootload.bs","ReactDOM","debounce","LinkReact.bs","Bootloader","bs_belt_Option","bs_caml_option","CurrentUser","ReasonReact.bs","FBRTCSupport","MercuryConfig","MessengerDomIDs.bs","bs_js_null_undefined","MercuryThreadInfo","MessageRequestUtils","MessagingThreadType","WorkForeignEntityInfo.bs","MercuryParticipantTypes","MercuryThreadTitleReact.bs","MessengerLocalTimeReact.bs","MessengerCustomColorUtils.bs","MessengerJoinableModeType","MessengerWebDriverTestIDs","MessengerInfoIconSVGM4React.bs","MessengerRTCCallButtonReact.bs","MessengerThreadImageM4React.bs","MessengerPresenceStatusReact.bs","MessengerInfoPanelButtonReact.bs","MessengerProfilePresenceReact.bs","MessengerDotComAndInboxM4Check.bs","MontageThreadViewContainerReact.bs","WorkChatDoNotDisturbStatusReact.bs","messengerCalculateTruncationState","MessengerForeignUserCompanyNameReact.bs"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();function a(a){b("Bootloader").loadModules(["BootloadableMessengerUserControlsButtonReact.bs"],a,"MessengerDetailViewHeaderReact.bs");return 0}c={doLoad:a};var i=b("Bootload.bs").Create(c);function j(a){var c,d=(c=b("bs_js_null_undefined")).fromOption(a[0][0]),e=c.fromOption(a[1][0]),f=c.fromOption(a[2][0]),g=c.fromOption(a[3][0]);c=c.fromOption(a[4][0]);return b("messengerCalculateTruncationState")(d,e,f,g,c)}function k(a,c){c[1][3][0]=a==null?void 0:b("bs_caml_option").some(b("ReactDOM").findDOMNode(a));return 0}function l(a,c){c[1][1][0]=a==null?void 0:b("bs_caml_option").some(a);return 0}function m(a,c){c[1][0][0]=a==null?void 0:b("bs_caml_option").some(a);return 0}function n(a,c){c[1][2][0]=a==null?void 0:b("bs_caml_option").some(a);return 0}function o(a,c){c[1][4][0]=a==null?void 0:b("bs_caml_option").some(a);return 0}function p(a,c,d,e){if(a.has_montage&&b("MercuryConfig").MontageThreadViewer&&!b("gkx")("686397"))return b("React").createElement("div",{ref:b("bs_curry")._1(e[0],o),className:"_1cwz"},b("ReasonReact.bs").element(void 0,void 0,b("MontageThreadViewContainerReact.bs").make(a.thread_id,c,d,!1,void 0,[])));else return null}function q(a,c,d,e){__p&&__p();if(b("CurrentUser").isWorkUser()||a===void 0)return null;else{a=b("bs_caml_option").valFromOption(a);var f=a.contact.user_type===b("MercuryParticipantTypes").PAGE;if(f){f=e[1][5][0];if(f!==void 0){e=a.contact.is_messenger_blocked;a=a.contact.fbid;f=b("React").createElement(f.make,{className:"_3xb9 _30yy",isMuted:b("MercuryThreadInfo").isMuted(c),isBlocked:e,pageID:a,threadID:c.thread_id,viewer:d})}else f=null;return b("React").createElement("li",void 0,f)}else return null}}function r(a,c){__p&&__p();c=c.filter(function(b,c,d){if(b==null)return!1;else return b.fbid!==a});var d=c.count();c=c.first();if(d!==1||c==null)return null;else{d={className:"_5eu7"};c=b("bs_caml_option").nullable_to_opt(c.timezone);c!==void 0&&(d.participantTimeZone=b("bs_caml_option").valFromOption(c));return b("React").createElement(b("MessengerLocalTimeReact.bs").make,d)}}function s(a,c){__p&&__p();var d=!b("FBRTCSupport").isMobileDevice();a=a!==void 0?b("bs_caml_option").valFromOption(a).contact.user_type===b("MercuryParticipantTypes").PAGE:!1;var e=c!==void 0?b("bs_caml_option").valFromOption(c).joinable_mode===b("MessengerJoinableModeType").JOINABLE:!1;if(c!==void 0){var f=b("bs_caml_option").valFromOption(c);f=(f.participants.length>1||f.thread_type===b("MessagingThreadType").GROUP)&&b("MercuryThreadInfo").canReply(f)&&!b("MessageRequestUtils").isMessageRequest(f)}else f=!1;c=c!==void 0?b("bs_caml_option").valFromOption(c).thread_type===b("MessagingThreadType").MARKETPLACE:!1;if(d&&!a&&!e&&f)return!c;else return!1}var t=b("MessengerDotComAndInboxM4Check.bs").yes?"_17w2 _6ybr":"_17w2",u=b("MessengerDotComAndInboxM4Check.bs").yes?"_5743 _6y4y":"_5743",v=b("MessengerDotComAndInboxM4Check.bs").yes?"_fl2 _6ymr":"_fl2",w=b("ReasonReact.bs").reducerComponent("MessengerDetailViewHeaderReact");function x(a,c,d,e,f,g,o,x,y){__p&&__p();var z;if(g!==void 0){y=b("bs_caml_option").valFromOption(g);if(b("MessengerDotComAndInboxM4Check.bs").yes){var A=y.gradient_colors;z=A.length!==0?A[0]:b("MessengerCustomColorUtils.bs").customColorOrBlue(y)}else z=b("MessengerCustomColorUtils.bs").customColorOrBlue(y)}else z=b("MessengerCustomColorUtils.bs").defaultColor(0);var B=function(c){if(s(a,g)&&g!==void 0){var d=b("bs_caml_option").valFromOption(g),e=d.thread_id;return b("React").createElement("li",void 0,b("ReasonReact.bs").element(void 0,void 0,b("MessengerRTCCallButtonReact.bs").make("_30yy",z,!1,f,d,e,c,a!==void 0?b("bs_caml_option").valFromOption(a).contact.name:"",a!==void 0?b("bs_caml_option").valFromOption(a).isUserActive:null,[])))}else return null},C=function(c){__p&&__p();if(s(a,g)&&g!==void 0){var d=b("bs_caml_option").valFromOption(g),e=d.thread_id;if(a!==void 0){var h=b("bs_caml_option").valFromOption(a).isUserActive;h=h?"_3qfl":""}else h="";return b("React").createElement("li",void 0,b("ReasonReact.bs").element(void 0,void 0,b("MessengerRTCCallButtonReact.bs").make("_30yy",z,!0,f,d,e,c,a!==void 0?b("bs_caml_option").valFromOption(a).contact.name:"",a!==void 0?b("bs_caml_option").valFromOption(a).isUserActive:null,[])),b("React").createElement("div",{className:h}))}else return null};if(a!==void 0){A=b("bs_caml_option").valFromOption(a).availabilityStatusData;y=A==null?[!1,""]:[A.isDoNotDisturb,A.description]}else y=[!1,""];var D=y[1],E=y[0],F=a!==void 0?!b("WorkForeignEntityInfo.bs").isCoworker(b("bs_caml_option").valFromOption(a).contact):!1,G=function(a){if(b("CurrentUser").isWorkUser())return b("ReasonReact.bs").element(void 0,void 0,b("WorkChatDoNotDisturbStatusReact.bs").make("_6f6k",b("bs_js_null_undefined").fromOption(g),E,D,[]));else return null},H=function(c){if(a!==void 0){c=b("bs_caml_option").valFromOption(a);var d={className:"_2v6o",isUserActive:c.isUserActive},e=b("bs_caml_option").nullable_to_opt(c.lastActive);e!==void 0&&(d.lastActive=b("bs_caml_option").valFromOption(e));e=b("bs_caml_option").nullable_to_opt(c.platform);e!==void 0&&(d.platform=b("bs_caml_option").valFromOption(e));return[!0,b("React").createElement(b("MessengerPresenceStatusReact.bs").make,d)]}else return[!1,null]},I=function(c){if(!b("CurrentUser").isWorkUser()||!F||a===void 0)return[!1,null];else{c=b("bs_caml_option").valFromOption(a);var d=c.contact.company_name;if(d==null)return[!1,null];else return[!0,b("React").createElement(b("MessengerForeignUserCompanyNameReact.bs").make,{className:"_6krh",companyName:b("bs_caml_option").nullable_to_opt(c.contact.company_name)})]}};return[w[0],w[1],w[2],w[3],function(a){__p&&__p();if(!b("MessengerDotComAndInboxM4Check.bs").yes){var c=b("Event").listen(window,"resize",b("debounce")(function(b){return j(a[1])},20));b("bs_curry")._1(a[4],function(a){return c.remove()})}return b("bs_curry")._1(i.load,function(b){var c=a;b=b;c[1][5][0]=b;return 0})},function(a){if(b("MessengerDotComAndInboxM4Check.bs").yes)return 0;else return j(a[1][1])},w[6],w[7],function(i){__p&&__p();if(o!==void 0&&g!==void 0){var j=b("bs_caml_option").valFromOption(g),s=b("bs_caml_option").valFromOption(o),w=h._("Informazioni sulla conversazione"),y=H(0),A=y[0],D=I(0),J=G(0);if(b("MessengerDotComAndInboxM4Check.bs").yes){var K=j.has_montage&&b("MercuryConfig").MontageThreadViewer&&b("gkx")("686397")&&b("gkx")("972782")&&b("gkx")("995308");K=b("gkx")("863504")?b("React").createElement(b("MessengerProfilePresenceReact.bs").make,{className:"_6ynm",size:40,storiesRingEligible:K,thread:j,viewer:s}):b("React").createElement(b("MessengerThreadImageM4React.bs").make,{className:"_6ynm",size:40,storiesRingEligible:K,thread:j,viewer:s})}else K=null;return b("React").createElement("div",{ref:b("bs_curry")._1(i[0],m),className:"_673w"+(b("MessengerDotComAndInboxM4Check.bs").yes?" _6ynl":"")+(!D[0]&&(!A||E)?" _1_fz":"")},p(j,x,f,i),b("React").createElement("div",{key:"threadTitle",ref:b("bs_curry")._1(i[0],l),className:u},K,b("React").createElement("div",{className:b("MessengerDotComAndInboxM4Check.bs").yes?"_6ynn":""},b("React").createElement("h2",{className:t,id:b("MessengerDomIDs.bs").ids.THREAD_TITLE},J,b("ReasonReact.bs").element(void 0,b("bs_curry")._1(i[0],k),b("MercuryThreadTitleReact.bs").make("_3oh-",b("bs_belt_Option").getWithDefault(d,0),j,s,void 0,void 0,void 0,void 0,[]))),E||!A||b("CurrentUser").isWorkUser()&&F?null:y[1],r(s,f),D[1])),b("React").createElement("ul",{key:"buttonsContainer",ref:b("bs_curry")._1(i[0],n),className:v},q(a,j,s,i),B(s),C(s),b("React").createElement("li",void 0,b("React").cloneElement(b("ReasonReact.bs").element(void 0,void 0,b("LinkReact.bs").make(!c,void 0,w,"_30yy",void 0,void 0,void 0,void 0,void 0,void 0,void 0,e,void 0,void 0,"button",void 0,void 0,void 0,void 0,w,[])),{"data-testid":b("MessengerWebDriverTestIDs").INFO_PANEL_BUTTON},b("MessengerDotComAndInboxM4Check.bs").yes?c?b("React").createElement("div",{className:"_6yms"},b("MessengerInfoIconSVGM4React.bs").make(z)):b("React").createElement("div",{className:"_6yms"},b("React").createElement("div",{className:"_6y4z",style:{backgroundColor:z}}),b("MessengerInfoIconSVGM4React.bs").make(z)):b("MessengerInfoPanelButtonReact.bs").make(z,c)),b("React").createElement("div",{"aria-owns":b("MessengerDomIDs.bs").ids.THREAD_INFO_PANEL}))))}else return null},function(a){return[[void 0],[void 0],[void 0],[void 0],[void 0],[void 0]]},w[10],function(a,b){return 0},w[12]]}d=b("ReasonReact.bs").wrapReasonForJs(w,function(a){return x(b("bs_caml_option").nullable_to_opt(a.contactData),a.infoPanelCollapsed,b("bs_caml_option").nullable_to_opt(a.maxTitle),a.onInfoPanelToggle,a.participants,b("bs_caml_option").nullable_to_opt(a.thread),b("FBID.bs").ofString(a.viewer),a.montageData,[])});f.BootloadableMessengerUserControlsButtonReact=c;f.LoadableMessengerUserControlsButtonReact=i;f.calculateTruncationState=j;f.findMercuryTitle=k;f.findTitle=l;f.findRoot=m;f.findButtons=n;f.findMontage=o;f.renderMontageThread=p;f.renderUserControls=q;f.renderLocalTime=r;f.shouldShowCallButton=s;f.titleElemClasses=t;f.titleClasses=u;f.buttonsContainerClasses=v;f.component=w;f.make=x;f.jsComponent=d}),null);